self.addEventListener("install",()=>{self.skipWaiting()}),addEventListener("activate",e=>{e.waitUntil((async()=>{self.registration.navigationPreload&&await self.registration.navigationPreload.enable(),await self.clients.claim()})())}),self.addEventListener("fetch",e=>{let t=e.request;"GET"===t.method&&e.respondWith((async()=>{let a=/^(.*\/[^\/]+\.)\w{10}(\.\w+)$/.exec(t.url);if(null===a){let a=await e.preloadResponse;return void 0!==a?a:fetch(t)}let i=await caches.match(t);return void 0!==i||void 0===(i=await fetch(t))||200!==i.status||"basic"!==i.type?i:(caches.open("ffxiv-gearing-v1").then(async e=>{let n=await e.keys();await e.put(t,i);let l=n.find(e=>e.url.length===t.url.length&&e.url.startsWith(a[1])&&e.url.endsWith(a[2]));void 0!==l&&await e.delete(l)}),i.clone())})())});