(()=>{var e,t,a={4947:(e,t,a)=>{var s={"./gears-1":[345,772],"./gears-1.js":[345,772],"./gears-136":[7026,437],"./gears-136.js":[7026,437],"./gears-255":[7205,336],"./gears-255.js":[7205,336],"./gears-340":[5441,215],"./gears-340.js":[5441,215],"./gears-385":[8404,733],"./gears-385.js":[8404,733],"./gears-401":[7058,221],"./gears-401.js":[7058,221],"./gears-70":[4017,43],"./gears-70.js":[4017,43],"./gears-recent":[7637],"./gears-recent.js":[7637]};function i(e){if(!a.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],i=t[0];return Promise.all(t.slice(1).map(a.e)).then((()=>a(i)))}i.keys=()=>Object.keys(s),i.id=4947,e.exports=i},5366:(e,t,a)=>{var s={"./chevron-right.svg":2256,"./help.svg":7843,"./hq.svg":196,"./jobs/ALC.svg":8594,"./jobs/ARM.svg":9294,"./jobs/AST.svg":6573,"./jobs/BLM.svg":1972,"./jobs/BLU.svg":7184,"./jobs/BRD.svg":9660,"./jobs/BSM.svg":5780,"./jobs/BTN.svg":35,"./jobs/CRP.svg":7728,"./jobs/CUL.svg":9596,"./jobs/DNC.svg":8392,"./jobs/DRG.svg":8583,"./jobs/DRK.svg":6156,"./jobs/FSH.svg":7431,"./jobs/GNB.svg":7200,"./jobs/GSM.svg":2918,"./jobs/LTW.svg":543,"./jobs/MCH.svg":8909,"./jobs/MIN.svg":1500,"./jobs/MNK.svg":8008,"./jobs/NIN.svg":5630,"./jobs/PLD.svg":8290,"./jobs/RDM.svg":6967,"./jobs/SAM.svg":4901,"./jobs/SCH.svg":7768,"./jobs/SMN.svg":7660,"./jobs/WAR.svg":4171,"./jobs/WHM.svg":9533,"./jobs/WVR.svg":8265,"./meteo.svg":595,"./more.svg":7126,"./open-in-new.svg":8467,"./sync.svg":9419};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=o,e.exports=i,i.id=5366},4339:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(3645),i=a.n(s)()((function(e){return e[1]}));i.push([e.id,'body{min-width:1080px;overflow-x:auto;overflow-y:scroll;line-height:1.15;text-align:center;background-color:#f2f2f2;cursor:auto}svg{fill:currentColor;transform:translateZ(0)}.app{position:relative;display:inline-block;padding-bottom:48px;font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,微软雅黑,sans-serif;text-align:initial;color:rgba(0,0,0,.87059)}.app:not(.app-high-saturation) ::selection{background-color:#c8e1ff}.card{background-color:#fff;background-color:var(--mdc-theme-surface,#fff);border-radius:4px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);overflow:hidden}.table{line-height:36px;color:rgba(0,0,0,.87059)}.table td,.table th{padding-top:0;padding-bottom:0;white-space:nowrap}.table th{padding-top:1px;font-weight:400;color:rgba(0,0,0,.6)}.table td{border-top:1px solid #e0e0e0}.table tbody:first-child tr:first-child td{border-top:none}.table tbody tr:hover{background-color:rgba(0,0,0,.03922)}.table tbody tr.-selected{background-color:rgba(98,0,238,.08)}.app-high-saturation .table tbody tr.-selected{background-color:rgba(98,0,238,.16)}.badge-button_badge{top:10px;right:7px;min-width:8px;height:8px;padding:0;transform:none}.rmwc-badge--exited{transform:scale(0)}.job-selector{position:relative;margin-left:3px}.job-selector_column{position:relative;display:inline-block;width:160px;padding:6px 16px 24px;vertical-align:top}.job-selector_group{line-height:34px}.job-selector_group:not(:first-child){margin-top:16px}.job-selector_group-name{padding-left:16px;font-weight:700}.job-selector_item{display:block;padding-left:16px;font-size:14px;color:inherit;text-decoration:none;border-radius:4px}.job-selector_icon{height:18px;margin-left:1px;vertical-align:-4px}.job-selector_background-icon{position:absolute;right:-100px;bottom:-100px;width:480px;color:#6200ee;opacity:.08;pointer-events:none}.job-select-panel{min-width:810px;padding-top:16px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.gears_slot{margin-top:10px;margin-bottom:10px}.app-edit .gears_item[data-id]{cursor:pointer}.gears_item.-group-end td{border-bottom:2px solid transparent}.gears_item.-group-end+.gears_item td{border-top-width:4px;border-top-color:#ededed}.gears_inline-slot{margin-right:6px;font-weight:700;font-size:13px;vertical-align:top}.gears_left{width:320px;padding-left:16px;padding-right:16px}th.gears_left{font-weight:700;text-align:left;color:rgba(0,0,0,.87059)}.gears_name{display:inline-block;max-width:230px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.app-view .gears_name{max-width:198px}.gears_color-red .gears_name{color:#721c24}.app-high-saturation .gears_color-red .gears_name{color:#9c0010}.gears_color-green .gears_name{color:#155724}.app-high-saturation .gears_color-green .gears_name{color:#007a2b}.gears_color-blue .gears_name{color:#003085}.app-high-saturation .gears_color-blue .gears_name{color:#003899}.gears_color-purple .gears_name{color:#36037c}.app-high-saturation .gears_color-purple .gears_name{color:#3e0094}.gears_hq{width:12px;vertical-align:-1px}.gears_patch{margin-left:4px;line-height:1}.gears_level,.gears_patch{color:rgba(0,0,0,.37647);font-size:12px}.gears_level{float:right;margin-left:12px;line-height:34px;margin-top:2px}.gears_more{float:right;margin:6px -10px 0 4px;fill:rgba(0,0,0,.77)}.gears_toogle-all-foods{float:right;height:29px;margin-top:4px;margin-right:-11px;font-size:12px}.gears_materias{position:relative;z-index:0;width:277px;padding-left:13px;padding-right:13px;border-left:1px solid rgba(0,0,0,.12157);border-right:1px solid rgba(0,0,0,.12157)}.gears_materias-synced{position:absolute;z-index:2;top:10px;left:0;right:0;line-height:1;text-align:center;pointer-events:none}.gears_materias-synced>svg{width:16px;color:rgba(0,0,0,.6)}.gears_food-utilization{margin-left:4px}.gears_food-utilization.-full{font-weight:700}.gears_stat{width:60px;text-align:center}.gears_stat.-skeleton{width:86px;white-space:nowrap}.gears_item.-food .gears_stat{line-height:1}.gears_stat-value.-full{font-weight:700}.gears_stat-value.-skeleton{display:inline-block;width:50%;font-weight:700;text-align:right}.gears_stat-value.-skeleton:last-child{margin-right:50%}.gears_stat-caps{display:inline-block;width:50%;padding-left:1px;text-align:left;font-size:12px;line-height:1;color:rgba(0,0,0,.6)}.gears_stat-requirement{display:block;margin-bottom:-2px;font-size:12px;line-height:8px;color:rgba(0,0,0,.54);transform:scale(.9)}.gears_custom-stat-input{width:36px}.gears_empty{color:rgba(0,0,0,.37647)}.gears_materia{position:relative;display:inline-block;width:54px;margin:auto -2px;line-height:26px;text-align:center;border-radius:2px}.gears_materia:not(:empty):after{content:" ";position:absolute;left:5px;right:5px;bottom:4px;border-bottom:2px solid;opacity:.1}.app-edit .gears_materia:hover{z-index:1;background-color:rgba(0,0,0,.05882)}.app-edit .gears_materia.-active,.app-edit .gears_materia:active{z-index:1;background-color:rgba(0,0,0,.10196)}.app-edit .gears_materia:empty:before{content:" ";display:inline-block;height:16px;width:16px;vertical-align:-3px;border:2px solid transparent;border-radius:50%}.gears_item.-synced .gears_materia{opacity:.2}.gears_materia.-normal{color:#155724}.app-high-saturation .gears_materia.-normal{color:#007a2b}.gears_materia.-normal:empty:before{border-color:rgba(0,149,34,.2352941176)}.gears_materia.-advanced{color:#721c24}.app-high-saturation .gears_materia.-advanced{color:#9c0010}.gears_materia.-advanced:empty:before{border-color:rgba(210,0,22,.2235294118)}.condition{margin-top:10px}.condition_divider{display:inline-block;margin:9px 0;height:24px;width:1px;background-color:rgba(0,0,0,.12157);vertical-align:top}.condition_right{float:right}.condition_job{display:inline-block;padding:0 12px;margin:4px;line-height:34px;border-radius:4px;vertical-align:top}.condition_job-icon{width:20px;padding-bottom:2px;margin-left:-2px}.condition_level{display:inline-block;padding-left:16px;line-height:42px;vertical-align:top}.condition_level-value{margin-right:2px}.condition_level-input{width:36px}.condition_level-separator{margin:0 4px}.condition_button{height:34px;min-width:48px;margin:4px 8px;vertical-align:top}.condition_button+.condition_button{margin-left:-4px}.condition_text{padding:0 16px;line-height:42px;vertical-align:top}.condition_filter{margin-left:6px;margin-right:6px}.condition_setting{margin-right:6px}.condition_level-sync-icon{width:14px;vertical-align:-2px}.summary{display:flex;align-items:flex-end;overflow:visible}@media(min-width:1080px){.app-edit .summary{position:fixed;bottom:0;padding:0 12px;margin-left:-12px;border-bottom-left-radius:0;border-bottom-right-radius:0;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}}.app-view .summary>span:not(.summary_divider){margin-top:-2px;margin-bottom:2px}.summary_divider{align-self:stretch;border-left:1px solid rgba(0,0,0,.12157);margin-right:-1px}.summary_left{position:relative;width:320px;height:49px}.summary_middle{position:relative;width:277px}.summary_clan{position:absolute;left:4px;bottom:5px;height:35px;padding:0 12px}.summary_equipped-level{position:absolute;left:260px;bottom:0;font-size:12px;line-height:44px;color:rgba(0,0,0,.37647)}.summary_tiers-toggle{position:absolute;left:10px;bottom:5px;height:35px}.summary_stat{width:60px;padding-top:9px;padding-bottom:4px;line-height:18px;text-align:center}.summary_stat.-skeleton{width:86px}.summary_stat-tier{margin-top:2px;font-size:12px;line-height:14px}.summary_stat-next,.summary_stat-prev{display:inline-block;width:21px;vertical-align:top;white-space:nowrap}.summary_stat-prev{text-align:left}.summary_stat-next{text-align:right}.summary_stat-name{font-size:13px;color:rgba(0,0,0,.65)}.summary_stat-effect{font-size:12px;white-space:nowrap}.summary_stat-effect.-tip{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:default}.summary_stat-effect+.summary_stat-name{display:none}.summary_stat-small{display:inline-block;margin:0 -2px;transform:scale(.83) translateY(1px)}.app-view .summary_stat:last-child .summary_stat-effect-hp{transform:translateX(-4px)}.summary_damage{float:right;width:120px}.summary_damage-tip{display:inline-block;width:16px;margin:-1px -6px -1px 1px;vertical-align:1px;color:rgba(0,0,0,.55)}.about{margin-top:10px;margin-bottom:10px;font-size:13px;line-height:19px;text-align:center;color:rgba(0,0,0,.50196)}.about_separator{margin:0 4px}.about_version{margin-left:4px}.about_link{color:rgba(0,0,0,.50196);text-decoration:none}.about_link:hover{text-decoration:underline}.filter{min-width:500px;padding:16px;line-height:20px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.filter_section{margin-bottom:3px}.filter_section:not(:first-child){margin-top:20px}.filter_title{font-weight:700}.filter_sub{margin-left:6px;font-size:12px;line-height:1;vertical-align:-1px;color:rgba(0,0,0,.6)}.filter_controls{margin-left:-9px}.filter_controls>.mdc-form-field{display:flex;margin-right:20px;margin-bottom:-6px}.level-sync{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.level-sync .rmwc-collapsible-list__children{transition:none}.level-sync_group{font-weight:700}.level-sync_group-icon{width:24px}.level-sync_levels{width:288px;margin:0 4px}.level-sync_job-level-sync,.level-sync_level{display:inline-block;width:48px;line-height:36px;text-align:center;vertical-align:top;border-radius:4px;cursor:pointer}.-popular.level-sync_job-level-sync,.level-sync_level.-popular{font-weight:700}.-selected.level-sync_job-level-sync,.level-sync_level.-selected{background-color:rgba(98,0,238,.08)}.app-high-saturation .-selected.level-sync_job-level-sync,.app-high-saturation .level-sync_level.-selected{background-color:rgba(98,0,238,.16)}.level-sync_job-level-sync{float:right;width:auto;padding:0 12px}.level-sync_cancel{margin:5px 8px 0}.materia-overall{overflow:visible;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.materia-overall_tabbar{border-bottom:1px solid rgba(0,0,0,.12157)}.materia-overall_tabbar .mdc-tab-bar{width:200px}.materia-overall_tabbar .mdc-tab{padding:0 12px;height:40px}.materia-consumption{text-align:center}.materia-consumption th{width:72px;color:inherit}.materia-consumption_empty{color:rgba(0,0,0,.37647)}.materia-consumption_tip{line-height:20px;text-align:left}.table tbody .materia-consumption_tip:hover{background:none}.materia-consumption_tip td{padding:8px 16px}.materia-consumption_tool-duplicates{font-weight:700;line-height:24px}.materia-consumption_tool-duplicates.-disabled{text-decoration:line-through}.materia-consumption_tool-duplicates-switch{margin-left:6px;vertical-align:-2px}.share{min-width:300px;padding:16px;line-height:20px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.share_url{display:block;font-size:12px;color:#6200ee;text-decoration:none}.share_url:hover{text-decoration:underline}.share_tip{margin-top:4px;margin-bottom:-2px;font-size:12px;font-style:italic}.share_copy{position:absolute;bottom:8px;right:8px;height:34px}.import{padding:16px;line-height:20px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.import_title{font-weight:700}.import_bookmarklet{display:block;text-align:center;margin:8px 0;padding:8px;color:#6200ee;text-decoration:none;border:1px dashed rgba(98,0,238,.6);border-radius:4px}.import_bookmarklet:hover{text-decoration:underline}.import_warn{margin-top:4px;font-weight:700;color:#721c24}.setting{min-width:500px;padding:8px 16px 10px;line-height:20px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.setting_section{margin-top:8px}.setting_title{font-weight:700}.setting_sub{margin-left:6px;font-size:12px;line-height:1;vertical-align:-1px;color:rgba(0,0,0,.6)}.setting_controls{margin-left:-9px}.setting_controls>.mdc-form-field{margin-right:20px}.gear-menu{padding:9px 0;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.gear-menu_item{display:block;padding-left:16px;padding-right:32px;line-height:32px;color:inherit;text-decoration:none}.gear-menu_divider{height:1px;margin:8px 0;background-color:rgba(0,0,0,.12157)}.gear-menu_divider+.gear-menu_divider,.gear-menu_divider:first-child,.gear-menu_divider:last-child{display:none}.gear-menu_external{height:1em;fill:currentColor;vertical-align:-2px;opacity:.75}.materias{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.materias tbody tr:hover{background-color:initial}.materias td{padding:0 12px}.materias td:first-child{padding-left:16px}.materias td:last-child{padding-right:16px}.materias_stat-name{text-align:center;border-right:1px solid rgba(0,0,0,.12157)}.materias_row.-invalid{color:rgba(0,0,0,.2)}.materias_grade,.materias_remove{cursor:pointer;text-align:center}.materias_grade:hover,.materias_remove:hover{background-color:rgba(0,0,0,.03922)}.materias_grade:active,.materias_remove:active{background-color:rgba(0,0,0,.10196)}.materias_grade.-selected,.materias_remove.-selected{background-color:rgba(98,0,238,.08)}.app-high-saturation .materias_grade.-selected,.app-high-saturation .materias_remove.-selected{background-color:rgba(98,0,238,.16)}td.materias_meldable{text-align:right;padding-right:0;min-width:40px}td.materias_meldable.-overflowed{color:#dc3545;font-weight:700}.materias_meldable-title{text-align:center;border-right:1px solid rgba(0,0,0,.12157)}.clan{padding:8px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.clan_race{text-align:right;font-weight:700;padding:0 8px}.clan_item{padding:0 8px;line-height:34px;text-align:center;vertical-align:top;border-radius:4px}td:not(:first-child)>.clan_item{margin-left:-2px}',""]);const o=i},4125:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(3645),i=a.n(s)()((function(e){return e[1]}));i.push([e.id,'/* Modified from https://github.com/ghosh/microtip/blob/3a5288376d451e421666680983788cb0a519089d/microtip.css */\n/* -------------------------------------------------------------------\n  Microtip\n\n  Modern, lightweight css-only tooltips\n  Just 1kb minified and gzipped\n\n  @author Ghosh\n  @package Microtip\n\n----------------------------------------------------------------------\n  1. Base Styles\n  2. Direction Modifiers\n  3. Position Modifiers\n--------------------------------------------------------------------*/\n\n\n/* ------------------------------------------------\n  [1] Base Styles\n-------------------------------------------------*/\n\n[aria-label][role~="tooltip"] {\n  position: relative;\n}\n\n[aria-label][role~="tooltip"]::before,\n[aria-label][role~="tooltip"]::after {\n  transform: translate3d(0, 0, 0);\n  -webkit-backface-visibility: hidden;\n  backface-visibility: hidden;\n  will-change: opacity;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity .15s ease 0s;\n  position: absolute;\n  box-sizing: border-box;\n  z-index: 10;\n  transform-origin: top;\n}\n\n[aria-label][role~="tooltip"]::before {\n  background-size: 100% auto !important;\n  content: "";\n}\n\n[aria-label][role~="tooltip"]::after {\n  background: rgba(17, 17, 17, .9);\n  border-radius: 0.25em;\n  color: #ffffff;\n  content: attr(aria-label);\n  font-size: 12px;\n  font-weight: normal;\n  text-decoration: none;\n  text-transform: none;\n  padding: .5em .84em .42em;\n  white-space: nowrap;\n  box-sizing: content-box;\n}\n\n[aria-label][role~="tooltip"]:hover::before,\n[aria-label][role~="tooltip"]:hover::after,\n[aria-label][role~="tooltip"]:focus::before,\n[aria-label][role~="tooltip"]:focus::after {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n\n\n/* ------------------------------------------------\n  [2] Position Modifiers\n-------------------------------------------------*/\n\n[aria-label][role~="tooltip"]::before {\n  background: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%280%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E") no-repeat;\n  height: 6px;\n  width: 18px;\n  margin-bottom: -6px;\n}\n\n[aria-label][role~="tooltip"]::after {\n  margin-bottom: 0;\n}\n\n[aria-label][role~="tooltip"]::before {\n  transform: translate3d(-50%, -5px, 0);\n  bottom: 100%;\n  left: 50%;\n}\n\n[aria-label][role~="tooltip"]::after {\n  transform: translate3d(-50%, -5px, 0);\n  bottom: 100%;\n  left: 50%;\n}\n',""]);const o=i},4222:(e,t,a)=>{"use strict";function s(){var e;return(null===(e=window.history.state)||void 0===e?void 0:e.archiveKey)||void 0}function i(e){window.history.replaceState({archiveKey:e},"")}let o;function n(){if(void 0!==o){let e=s();void 0===e&&(e=function(){let e;do{e=`ffxiv-gearing-${Math.random().toString(36).slice(2,6)}`}while(null!==sessionStorage.getItem(e));return e}(),i(e)),sessionStorage.setItem(e,JSON.stringify(o)),o=void 0}}function r(e){o=e}function l(e){if(void 0===e?e=s():i(e),void 0!==e){const t=sessionStorage.getItem(e);return t?JSON.parse(t):void 0}}a.d(t,{a:()=>r,z:()=>l}),setInterval(n,5e3),window.addEventListener("beforeunload",n)},6277:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patches:()=>s.Z,statNames:()=>i,getCaps:()=>c,jobLevelModifiers:()=>g,jobLevels:()=>p,baseStats:()=>v,customStatMax:()=>u,jobSchemas:()=>N,jobCategories:()=>w,statHighlight:()=>T,materias:()=>D,materiaGrades:()=>L,materiaGradesAdvanced:()=>O,materiaGradeRequiredLevels:()=>M,materiaSuccessRates:()=>C,materiaNames:()=>k,materiaGradeNames:()=>G,materiaStatNames:()=>I,getMateriaName:()=>P,races:()=>E,clans:()=>V,clanStats:()=>R,syncLevels:()=>H,syncLevelIsPopular:()=>q,syncLevelOfJobLevels:()=>z,bluMdmgAdditions:()=>F});var s=a(9602);const i={STR:"力量",DEX:"灵巧",INT:"智力",MND:"精神",VIT:"耐力",CRT:"暴击",DHT:"直击",DET:"信念",SKS:"技速",SPS:"咏唱",TEN:"坚韧",PIE:"信仰",CMS:"作业精度",CRL:"加工精度",CP:"制作力",GTH:"获得力",PCP:"鉴别力",GP:"采集力",PDMG:"物理基本性能",MDMG:"魔法基本性能",DLY:"攻击间隔"},o=a(5841).Z,n=a(5153).Z,r=a(7910).Z,l={};o.level.forEach(((e,t)=>{l[e]=t}));const d={};function c(e,t){const a=null!=t?t:e.level,{slot:s,role:c}=e,g=`${a},${s},${c}`;if(!(g in d)){const e={};for(const t of Object.keys(i))e[t]="DLY"===t?1/0:Math.round(o[t][l[a]]*n[t][s]*r[t][c]/1e4);d[g]=e}return d[g]}const g={50:{main:202,sub:341,div:341,det:202,detTrunc:5,mainTrait:24,ap:75,apTank:53,hp:1700,vit:10.2,vitTank:14.5},60:{main:218,sub:354,div:858,det:820,detTrunc:2,mainTrait:48,ap:100,apTank:78,hp:2600,vit:15.4,vitTank:20.5},70:{main:292,sub:364,div:2170,det:2170,detTrunc:1,mainTrait:48,ap:125,apTank:105,hp:3600,vit:15.9,vitTank:21.5},80:{main:340,sub:380,div:3300,det:3300,detTrunc:1,mainTrait:48,ap:165,apTank:115,hp:4400,vit:22.1,vitTank:31.5}},p=Object.keys(g).map((e=>Number(e))),m=p[p.length-1],v={STR:"main",DEX:"main",INT:"main",MND:"main",VIT:"main",CRT:"sub",DHT:"sub",DET:"main",SKS:"sub",SPS:"sub",TEN:"sub",PIE:"main",CMS:0,CRL:0,CP:180,GTH:0,PCP:0,GP:400},u=1e3,h={tank:["STR","CRT","DET","DHT","SKS","TEN","VIT"],healer:["MND","CRT","DET","DHT","SPS","PIE","VIT"],dpsStr:["STR","CRT","DET","DHT","SKS","VIT"],dpsDex:["DEX","CRT","DET","DHT","SKS","VIT"],dpsInt:["INT","CRT","DET","DHT","SPS","VIT"],crafting:["CMS","CRL","CP"],gathering:["GTH","PCP","GP"]},b=[{slot:3,name:"头部防具",uiGroup:"left"},{slot:4,name:"身体防具",uiGroup:"left"},{slot:5,name:"手部防具",uiGroup:"left"},{slot:6,name:"腰部防具",uiGroup:"left"},{slot:7,name:"腿部防具",uiGroup:"left"},{slot:8,name:"脚部防具",uiGroup:"left"},{slot:9,name:"耳饰",uiGroup:"right"},{slot:10,name:"项链",uiGroup:"right"},{slot:11,name:"手镯",uiGroup:"right"},{slot:12,name:"戒指",uiGroup:"right"},{slot:-12,name:"戒指",uiGroup:"right"},{slot:-1,name:"食物",levelWeight:0,uiGroup:"misc"}],x=[{slot:13,name:"武器",levelWeight:2,uiGroup:"weapon"},...b],j=[{slot:1,name:"主工具",shortName:"主手",uiGroup:"weapon"},{slot:2,name:"副工具",shortName:"副手",uiGroup:"weapon"},...b],f=[...j.slice(0,-1),{slot:17,name:"灵魂水晶",shortName:"水晶",levelWeight:0,uiGroup:"misc"},j[j.length-1]],S=[520,535],_=[490,510],y=_,N={PLD:{name:"骑士",stats:h.tank,slots:[{slot:1,name:"武器",uiGroup:"weapon"},{slot:2,name:"盾牌",uiGroup:"weapon"},...b],defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{STR:100,VIT:110,hp:120},mainStat:"VIT",traitDamageMultiplier:1},WAR:{name:"战士",stats:h.tank,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{STR:105,VIT:110,hp:125},mainStat:"VIT",traitDamageMultiplier:1},DRK:{name:"暗黑骑士",stats:h.tank,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{STR:105,VIT:110,hp:120},mainStat:"VIT",traitDamageMultiplier:1},GNB:{name:"绝枪战士",stats:h.tank,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{STR:100,VIT:110,hp:120},mainStat:"VIT",traitDamageMultiplier:1},WHM:{name:"白魔法师",stats:h.healer,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{MND:115,VIT:100,hp:105},mainStat:"MND",traitDamageMultiplier:1.3},SCH:{name:"学者",stats:h.healer,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{MND:115,VIT:100,hp:105},mainStat:"MND",traitDamageMultiplier:1.3},AST:{name:"占星术士",stats:h.healer,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{MND:115,VIT:100,hp:105},mainStat:"MND",traitDamageMultiplier:1.3},MNK:{name:"武僧",stats:h.dpsStr,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{STR:110,VIT:100,hp:110,gcd:80,gcdReason:"四档“疾风迅雷”状态中"},mainStat:"STR",traitDamageMultiplier:1},DRG:{name:"龙骑士",stats:h.dpsStr,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{STR:115,VIT:105,hp:115},mainStat:"STR",traitDamageMultiplier:1},NIN:{name:"忍者",stats:h.dpsDex,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{DEX:110,VIT:100,hp:108,gcd:85,gcdReason:"“风遁”状态中"},mainStat:"DEX",traitDamageMultiplier:1},SAM:{name:"武士",stats:h.dpsStr,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{STR:112,VIT:100,hp:109,gcd:87,gcdReason:"“士风”状态中"},mainStat:"STR",traitDamageMultiplier:1},BRD:{name:"吟游诗人",stats:h.dpsDex,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{DEX:115,VIT:100,hp:105},mainStat:"DEX",traitDamageMultiplier:1.2},MCH:{name:"机工士",stats:h.dpsDex,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{DEX:115,VIT:100,hp:105},mainStat:"DEX",traitDamageMultiplier:1.2},DNC:{name:"舞者",stats:h.dpsDex,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{DEX:115,VIT:100,hp:105},mainStat:"DEX",traitDamageMultiplier:1.2},BLM:{name:"黑魔法师",stats:h.dpsInt,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{INT:115,VIT:100,hp:105},mainStat:"INT",traitDamageMultiplier:1.3},SMN:{name:"召唤师",stats:h.dpsInt,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{INT:115,VIT:100,hp:105},mainStat:"INT",traitDamageMultiplier:1.3},RDM:{name:"赤魔法师",stats:h.dpsInt,slots:x,defaultItemLevel:S,jobLevel:m,levelSyncable:!0,statModifiers:{INT:115,VIT:100,hp:105},mainStat:"INT",traitDamageMultiplier:1.3},BLU:{name:"青魔法师",stats:h.dpsInt,slots:[{slot:13,name:"武器",levelWeight:0,uiGroup:"weapon"},...b],defaultItemLevel:[390,400],jobLevel:70,levelSyncable:!0,statModifiers:{INT:115,VIT:100,hp:105},mainStat:"INT",noMainStatTrait:!0,traitDamageMultiplier:1.5,partyBonus:1.01},CRP:{name:"刻木匠",stats:h.crafting,slots:f,defaultItemLevel:_,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:8},BSM:{name:"锻铁匠",stats:h.crafting,slots:f,defaultItemLevel:_,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:8},ARM:{name:"铸甲匠",stats:h.crafting,slots:f,defaultItemLevel:_,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:8},GSM:{name:"雕金匠",stats:h.crafting,slots:f,defaultItemLevel:_,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:8},LTW:{name:"制革匠",stats:h.crafting,slots:f,defaultItemLevel:_,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:8},WVR:{name:"裁衣匠",stats:h.crafting,slots:f,defaultItemLevel:_,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:8},ALC:{name:"炼金术士",stats:h.crafting,slots:f,defaultItemLevel:_,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:8},CUL:{name:"烹调师",stats:h.crafting,slots:f,defaultItemLevel:_,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:8},MIN:{name:"采矿工",stats:h.gathering,slots:j,defaultItemLevel:y,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:2},BTN:{name:"园艺工",stats:h.gathering,slots:j,defaultItemLevel:y,jobLevel:m,skeletonGears:!0,toolMateriaDuplicates:2},FSH:{name:"捕鱼人",stats:h.gathering,slots:j,defaultItemLevel:y,jobLevel:m,skeletonGears:!0}},w=a(9282).Z,T={PIE:!0,TEN:!0,DHT:!0,CRT:!0,DET:!0,SKS:!0,SPS:!0},D={PIE:[1,2,3,6,11,40,20,60],DHT:[2,4,6,9,12,40,20,60],CRT:[2,4,6,9,12,40,20,60],DET:[1,3,4,6,12,40,20,60],SPS:[2,4,6,9,12,40,20,60],SKS:[2,4,6,9,12,40,20,60],TEN:[2,4,6,9,12,40,20,60],CMS:[3,4,5,6,11,16,14,21],CRL:[1,2,3,4,7,10,9,13],CP:[1,2,3,4,6,8,7,9],GTH:[3,4,5,6,10,15,12,20],PCP:[3,4,5,6,10,15,12,20],GP:[1,2,3,4,6,8,7,9]},L=[8,7,6,5,4,3,2,1],O=[7,5,4,3,2,1],M=[15,30,45,70,160,290,420,420],C=[[90,82,70,58,17,17,17,17],[48,44,38,32,10,0,10,0],[28,26,22,20,7,0,7,0],[16,16,14,12,5,0,5,0]],k={CRT:"武略",DHT:"神眼",DET:"雄略",SKS:"战技",SPS:"咏唱",TEN:"刚柔",PIE:"信力",CMS:"名匠",CRL:"巨匠",CP:"魔匠",GTH:"达识",PCP:"博识",GP:"器识"},G=["壹","贰","叁","肆","伍","陆","柒","捌"],I={...i,CP:"CP",GP:"GP"};function P(e,t,a){return a?I[e].slice(0,2)+D[e][t-1]:k[e]+G[t-1]}const E=["人族","精灵族","拉拉菲尔族","猫魅族","鲁加族","敖龙族","硌狮族","维埃拉族"],V=["中原之民","高地之民","森林之民","黑影之民","平原之民","沙漠之民","逐日之民","护月之民","北洋之民","红焰之民","晨曦之民","暮晖之民","掠日之民","迷踪之民","密林之民","山林之民"],R={STR:[22,23,20,20,19,19,22,19,22,20,19,23,23,23,20,19].map((e=>e-20)),DEX:[19,20,23,20,23,21,23,22,19,18,22,20,17,17,23,20].map((e=>e-20)),VIT:[20,22,19,19,19,18,20,18,23,23,19,22,23,23,18,19].map((e=>e-20)),INT:[23,18,22,23,22,22,19,21,18,20,20,20,17,17,21,23].map((e=>e-20)),MND:[19,20,19,21,20,23,19,23,21,22,23,18,23,23,21,22].map((e=>e-20))},H=a(3676).Z,q={300:!0,345:!0,375:!0,475:!0,435:!0},z={50:130,60:270,70:400,80:530},F=a(1636).Z},476:(e,t,a)=>{"use strict";var s=a(5893),i=a(3935),o=a(8949),n=(a(6137),a(6725),a(2860)),r=a(2938),l=a(4184),d=a(7294);const c=d.createContext(void 0);function g(){return d.useContext(c)}var p=a(5931),m=a(6277),v=a(8872);const u=a(5366),h=d.memo((function({className:e,name:t}){const a=u("./"+t+".svg").default;return(0,s.jsx)("svg",Object.assign({className:e,viewBox:a.viewBox},{children:(0,s.jsx)("use",{xlinkHref:"#"+a.id},void 0)}),void 0)}));var b=a(7217);const x=e=>{const[t,a]=d.useState(!1),i=d.Children.only(e.children);if(!d.isValidElement(i))return null;const o=()=>a(!0),n=d.cloneElement(i,{...i.props,onFocus:o,onPointerEnter:o,onTouchStart:o,onMouseEnter:o});return t?(0,s.jsx)(b.HW,Object.assign({},e),void 0):n},j=d.forwardRef((({icon:e,className:t,...a},i)=>(0,s.jsx)(x,Object.assign({unbounded:!0},{children:(0,s.jsx)("button",Object.assign({},a,{ref:i,className:l("mdc-icon-button","mdc-icon-button--dense",t),type:"button",children:(0,s.jsx)(h,{className:"mdc-icon-button__icon",name:e},void 0)}),void 0)}),void 0)));var f=a(8736);const S=r.Pi((e=>{const[t,a]=d.useState(!1),[i,o]=d.useState(null),n=e=>{a(!t),e&&e.stopPropagation()};return(0,s.jsxs)(s.Fragment,{children:[e.label({ref:o,expanded:t,toggle:n}),t&&(0,s.jsx)(_,Object.assign({},e,{setExpanded:a,labelElement:i,toggle:n}),void 0)]},void 0)})),_=r.Pi((e=>{const{popper:t,placement:a,modifiers:o,strategy:n,setExpanded:r,labelElement:l,toggle:c}=e,[g,p]=d.useState(null),m=f.D(l,g,{placement:a,modifiers:o,strategy:n}),v=document.getElementById("popper");return y=e=>{const t=e.target;t&&l&&g&&(l.contains(t)||g.contains(t)||(r(!1),y=void 0,e._isClosingDropdown=!0))},N=e=>{const t=e.target;!t||"BODY"!==t.tagName&&t!==l||"Escape"!==e.key||(r(!1),N=void 0)},d.useEffect((()=>()=>{y=void 0,N=void 0}),[]),v&&i.createPortal((0,s.jsx)("div",Object.assign({ref:p,style:m.styles.popper},m.attributes.popper,{onClick:e=>e.stopPropagation(),children:d.createElement(t,{toggle:c,labelElement:l})}),void 0),v)}));let y,N;window.addEventListener("click",(e=>null==y?void 0:y(e)),!0),window.addEventListener("keyup",(e=>null==N?void 0:N(e)),!0);var w=a(6964),T=a.n(w);const D=r.Pi((function({gear:e,toggle:t}){const a=g();return(0,s.jsxs)("div",Object.assign({className:"gear-menu card"},{children:[(0,s.jsx)(x,{children:(0,s.jsx)("div",{children:(0,s.jsxs)(T(),Object.assign({className:"gear-menu_item",component:"div","data-clipboard-text":e.name,onClick:t},{children:["复制道具名",!e.isFood&&e.source&&("source"===a.setting.gearDisplayName||!e.isInstalled)&&"："+e.name]}),void 0)},void 0)},void 0),(0,s.jsx)("div",{className:"gear-menu_divider"},void 0),!e.isFood&&e.source&&"name"===a.setting.gearDisplayName&&e.isInstalled&&(0,s.jsxs)("div",Object.assign({className:"gear-menu_item"},{children:["获取途径：",e.source]}),void 0),void 0!==e.stats.PDMG&&(0,s.jsxs)("div",Object.assign({className:"gear-menu_item"},{children:["物理基本性能：",e.stats.PDMG]}),void 0),void 0!==e.stats.MDMG&&(0,s.jsxs)("div",Object.assign({className:"gear-menu_item"},{children:["魔法基本性能：",e.stats.MDMG]}),void 0),void 0!==e.stats.DLY&&(0,s.jsxs)("div",Object.assign({className:"gear-menu_item"},{children:["攻击间隔：",(e.stats.DLY/1e3).toFixed(2)]}),void 0),(0,s.jsx)("div",{className:"gear-menu_divider"},void 0),e.isInstalled&&(0,s.jsx)(x,{children:(0,s.jsxs)("a",Object.assign({className:"gear-menu_item",href:"https://ff14.huijiwiki.com/wiki/%E7%89%A9%E5%93%81:"+encodeURI(e.name),target:"_blank",tabIndex:0},{children:["在 最终幻想XIV中文维基 中查看 ",(0,s.jsx)(h,{className:"gear-menu_external",name:"open-in-new"},void 0)]}),void 0)},void 0),(0,s.jsx)(x,{children:(0,s.jsxs)("a",Object.assign({className:"gear-menu_item",href:"http://www.garlandtools.org/db/#item/"+Math.abs(e.id),target:"_blank",tabIndex:0},{children:["在 Garland Data 中查看 ",(0,s.jsx)(h,{className:"gear-menu_external",name:"open-in-new"},void 0)]}),void 0)},void 0),(0,s.jsx)(x,{children:(0,s.jsxs)("a",Object.assign({className:"gear-menu_item",href:`./lodestone?jp:${Math.abs(e.id)}`,target:"_blank",tabIndex:0},{children:["在 The Lodestone 中查看 ",(0,s.jsx)(h,{className:"gear-menu_external",name:"open-in-new"},void 0)]}),void 0)},void 0)]}),void 0)})),L=r.Pi((function({materia:e,labelElement:t}){const a=g();return(0,s.jsx)("table",Object.assign({className:"materias table card"},{children:(0,s.jsxs)("tbody",{children:[a.schema.stats.map((a=>a in m.materias&&(0,s.jsxs)("tr",Object.assign({className:l("materias_row",e.gear.currentMeldableStats[a]<=0&&"-invalid")},{children:[(0,s.jsx)("td",Object.assign({className:l("materias_meldable",e.gear.currentMeldableStats[a]<0&&"-overflowed")},{children:e.gear.currentMeldableStats[a]}),void 0),(0,s.jsx)("td",Object.assign({className:"materias_stat-name"},{children:m.materiaStatNames[a].slice(0,2)}),void 0),e.meldableGrades.map((i=>(0,s.jsx)("td",{className:l("materias_grade",e.stat===a&&e.grade===i&&"-selected"),onClick:()=>{if(void 0===e.stat){const e=null==t?void 0:t.nextElementSibling;null===e&&(null==t||t.click()),0===(null==e?void 0:e.childNodes.length)&&e.click()}e.meld(a,i)},children:"+"+m.materias[a][i-1]},i)))]}),a))),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",Object.assign({className:"materias_meldable-title",colSpan:2},{children:"可镶嵌值"}),void 0),(0,s.jsx)("td",Object.assign({className:l("materias_remove",void 0===e.stat&&"-selected"),colSpan:e.meldableGrades.length,onClick:()=>e.meld(void 0)},{children:"不镶嵌魔晶石"}),void 0)]},void 0)]},void 0)}),void 0)})),O=r.Pi((function({materia:e}){const t=g();return(0,s.jsx)(S,{label:({ref:a,expanded:i,toggle:o})=>(0,s.jsx)("span",{ref:a,className:l("gears_materia",e.isAdvanced?"-advanced":"-normal",i&&"-active"),onClick:t.isViewing?void 0:o,onContextMenu:t.isViewing?void 0:t=>{var a;(null===(a=document.getSelection())||void 0===a?void 0:a.toString())||(t.preventDefault(),e.meld(void 0))},children:e.name},void 0),popper:({labelElement:t})=>(0,s.jsx)(L,{materia:e,labelElement:t},void 0),placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[-104-50*e.index,0]}}]},void 0)})),M=r.Pi((function({gear:e,slot:t,isGroupEnd:a}){var i,o;const n=g();return void 0===e?0===(null==t?void 0:t.levelWeight)?null:(0,s.jsxs)("tr",Object.assign({className:l("gears_item",a&&"-group-end")},{children:[(0,s.jsxs)("td",Object.assign({className:"gears_left"},{children:[void 0!==t&&(0,s.jsx)("span",Object.assign({className:"gears_inline-slot"},{children:(null!==(i=t.shortName)&&void 0!==i?i:t.name).slice(0,2)}),void 0),(0,s.jsx)("span",Object.assign({className:"gears_empty"},{children:n.isViewing?"无装备":"无匹配"}),void 0)]}),void 0),(0,s.jsx)("td",{className:"gears_materias"},void 0),(0,s.jsx)("td",{colSpan:n.schema.stats.length},void 0)]}),void 0):(0,s.jsxs)("tr",Object.assign({"data-id":e.id,className:l("gears_item",e.isFood&&"-food",!n.isViewing&&e.isEquipped&&"-selected",a&&"-group-end",!e.isFood&&void 0!==e.syncedLevel&&"-synced"),onClick:n.isViewing?void 0:t=>{t.nativeEvent._isClosingDropdown||t.timeStamp-k<200||n.equip(e)}},{children:[(0,s.jsxs)("td",Object.assign({className:l("gears_left",`gears_color-${e.color}`)},{children:[void 0!==t&&(0,s.jsx)("span",Object.assign({className:"gears_inline-slot"},{children:(null!==(o=t.shortName)&&void 0!==o?o:t.name).slice(0,2)}),void 0),"source"===n.setting.gearDisplayName&&!e.isFood&&e.source?(0,s.jsxs)("span",Object.assign({className:"gears_name"},{children:[e.source,!e.isInstalled&&(0,s.jsx)("span",Object.assign({className:"gears_patch"},{children:e.patch}),void 0)]}),void 0):e.isInstalled?(0,s.jsxs)("span",Object.assign({className:"gears_name"},{children:[e.name,e.hq&&(0,s.jsx)(h,{className:"gears_hq",name:"hq"},void 0)]}),void 0):(0,s.jsxs)("span",Object.assign({className:"gears_name"},{children:[(0,s.jsx)("span",Object.assign({className:"gears_origin"},{children:e.isFood?e.name:"*"+e.source}),void 0),(0,s.jsx)("span",Object.assign({className:"gears_patch"},{children:e.patch}),void 0)]}),void 0),(0,s.jsx)(S,{label:({ref:e,toggle:t})=>(0,s.jsx)(j,{ref:e,className:"gears_more",icon:"more",onClick:t},void 0),popper:({toggle:t})=>(0,s.jsx)(D,{gear:e,toggle:t},void 0),placement:"bottom-end"},void 0),(0,s.jsxs)("span",Object.assign({className:"gears_level"},{children:["il",e.level]}),void 0)]}),void 0),(0,s.jsxs)("td",Object.assign({className:"gears_materias"},{children:[!e.isFood&&e.materias.map(((e,t)=>(0,s.jsx)(O,{materia:e},t))),e.isFood&&(n.isViewing?(0,s.jsxs)("span",Object.assign({className:"gears_food-utilization"},{children:["利用率",e.utilization,"%"]}),void 0):(0,s.jsxs)("span",Object.assign({className:l("gears_food-utilization",100===e.utilization&&"-full"),style:{opacity:e.utilizationOpacity}},{children:[e.utilization,"%"]}),void 0)),!e.isFood&&void 0!==e.syncedLevel&&(0,s.jsx)("div",Object.assign({className:"gears_materias-synced"},{children:(0,s.jsx)(h,{name:"sync"},void 0)}),void 0)]}),void 0),n.schema.stats.map((t=>(0,s.jsxs)("td",Object.assign({className:l("gears_stat",n.schema.skeletonGears&&"-skeleton")},{children:[n.isViewing||e.isFood||!e.customizable||t in e.bareStats||!("DHT"!==t||e.equipLevel<=60||n.schema.stats.length<7)?(0,s.jsx)("span",{className:l("gears_stat-value",e.statHighlights[t]&&"-full",n.schema.skeletonGears&&!e.isFood&&17!==e.slot&&"-skeleton"),children:(e.isFood||e.customizable||void 0!==e.syncedLevel||n.setting.displayMeldedStats?e.stats:e.bareStats)[t]},void 0):(0,s.jsx)(C,{displayValue:e.stats[t],editValue:e.customStats.get(t),onChange:a=>e.setCustomStat(t,a)},void 0),n.schema.skeletonGears&&!e.isFood&&e.materias.length>0&&(0,s.jsxs)("span",Object.assign({className:"gears_stat-caps"},{children:["/",e.caps[t]]}),void 0),!n.isViewing&&"VIT"!==t&&e.isFood&&e.requiredStats[t]&&(0,s.jsxs)("span",Object.assign({className:l("gears_stat-requirement",n.equippedStatsWithoutFood[t]>=e.requiredStats[t]&&"-enough")},{children:[e.requiredStats[t],"+"]}),void 0)]}),t)))]}),void 0)})),C=r.Pi((function({displayValue:e,editValue:t,onChange:a}){var i,o;const[n,r]=d.useState(null!==(i=null==e?void 0:e.toString())&&void 0!==i?i:""),[l,c]=d.useState(e);return e!==l&&(r(null!==(o=null==e?void 0:e.toString())&&void 0!==o?o:""),c(e)),(0,s.jsx)(v.n,{className:"gears_custom-stat-input mdc-text-field--compact",value:n,onChange:e=>{r(e.target.value)},onFocus:e=>{var a;e.target.value=null!==(a=null==t?void 0:t.toString())&&void 0!==a?a:"",r(e.target.value),e.target.select()},onBlur:()=>{c(-1),a(parseInt(n,10))},onClick:e=>{e.stopPropagation()},onKeyPress:e=>{"Enter"===e.key&&e.target.blur()}},void 0)}));let k=0;window.addEventListener("focusout",(e=>{var t;"INPUT"===(null===(t=e.target)||void 0===t?void 0:t.tagName)&&(k=e.timeStamp)}));const G=r.Pi((function({slot:e}){const t=g(),a=t.groupedGears[e.slot];return"comparable"!==t.filterFocus||(null==a?void 0:a.length)>1?(0,s.jsxs)("table",Object.assign({className:"gears_slot table card"},{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",Object.assign({className:"gears_left"},{children:[e.name,-1===e.slot&&(0,s.jsx)(p.z,{className:"gears_toogle-all-foods",children:t.showAllFoods?"显示最优":"显示全部",onClick:t.toggleShowAllFoods},void 0)]}),void 0),(0,s.jsx)("th",Object.assign({className:"gears_materias"},{children:-1===e.slot?"利用率":"魔晶石"}),void 0),t.schema.stats.map((e=>(0,s.jsx)("th",Object.assign({className:l("gears_stat",t.schema.skeletonGears&&"-skeleton")},{children:m.statNames[e]}),e)))]},void 0)},void 0),(0,s.jsx)("tbody",{children:void 0!==a?a.map((e=>(0,s.jsx)(M,{gear:e},e.id))):(0,s.jsx)(M,{gear:void 0},void 0)},void 0)]}),void 0):null})),I=r.Pi((function(){const e=g();return(0,s.jsxs)("table",Object.assign({className:"gears_slot table card"},{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",Object.assign({className:"gears_left-compact"},{children:"装备"}),void 0),(0,s.jsx)("th",Object.assign({className:"gears_materias"},{children:"魔晶石"}),void 0),e.schema.stats.map((e=>(0,s.jsx)("th",Object.assign({className:"gears_stat"},{children:m.statNames[e]}),e)))]},void 0)},void 0),(0,s.jsx)("tbody",{children:e.schema.slots.map(((t,a)=>(0,s.jsx)(M,{gear:e.equippedGears.get(t.slot.toString()),slot:t,isGroupEnd:a<e.schema.slots.length-1&&t.uiGroup!==e.schema.slots[a+1].uiGroup},t.slot)))},void 0)]}),void 0)}));var P=a(8947);const E=d.forwardRef((function({promotion:e,onClick:t,...a},i){const o=g();return(0,s.jsxs)(P.Q,{children:[(0,s.jsx)(p.z,Object.assign({},a,{ref:i,onClick:()=>(o.promotion.off(e),t())}),void 0),(0,s.jsx)(P.C,{className:"badge-button_badge",exited:!o.promotion.get(e)},void 0)]},void 0)})),V=r.Pi((function(){return(0,s.jsxs)("div",Object.assign({className:"job-selector"},{children:[(0,s.jsxs)("div",Object.assign({className:"job-selector_column"},{children:[(0,s.jsxs)(R,Object.assign({name:"防护职业"},{children:[(0,s.jsx)(H,{job:"PLD"},void 0),(0,s.jsx)(H,{job:"WAR"},void 0),(0,s.jsx)(H,{job:"DRK"},void 0),(0,s.jsx)(H,{job:"GNB"},void 0)]}),void 0),(0,s.jsxs)(R,Object.assign({name:"治疗职业"},{children:[(0,s.jsx)(H,{job:"WHM"},void 0),(0,s.jsx)(H,{job:"SCH"},void 0),(0,s.jsx)(H,{job:"AST"},void 0)]}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"job-selector_column"},{children:[(0,s.jsxs)(R,Object.assign({name:"近战职业"},{children:[(0,s.jsx)(H,{job:"MNK"},void 0),(0,s.jsx)(H,{job:"DRG"},void 0),(0,s.jsx)(H,{job:"NIN"},void 0),(0,s.jsx)(H,{job:"SAM"},void 0)]}),void 0),(0,s.jsxs)(R,Object.assign({name:"远程物理职业"},{children:[(0,s.jsx)(H,{job:"BRD"},void 0),(0,s.jsx)(H,{job:"MCH"},void 0),(0,s.jsx)(H,{job:"DNC"},void 0)]}),void 0),(0,s.jsxs)(R,Object.assign({name:"远程魔法职业"},{children:[(0,s.jsx)(H,{job:"BLM"},void 0),(0,s.jsx)(H,{job:"SMN"},void 0),(0,s.jsx)(H,{job:"RDM"},void 0),(0,s.jsx)(H,{job:"BLU"},void 0)]}),void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"job-selector_column"},{children:(0,s.jsxs)(R,Object.assign({name:"能工巧匠"},{children:[(0,s.jsx)(H,{job:"CRP"},void 0),(0,s.jsx)(H,{job:"BSM"},void 0),(0,s.jsx)(H,{job:"ARM"},void 0),(0,s.jsx)(H,{job:"GSM"},void 0),(0,s.jsx)(H,{job:"LTW"},void 0),(0,s.jsx)(H,{job:"WVR"},void 0),(0,s.jsx)(H,{job:"ALC"},void 0),(0,s.jsx)(H,{job:"CUL"},void 0)]}),void 0)}),void 0),(0,s.jsx)("div",Object.assign({className:"job-selector_column"},{children:(0,s.jsxs)(R,Object.assign({name:"大地使者"},{children:[(0,s.jsx)(H,{job:"MIN"},void 0),(0,s.jsx)(H,{job:"BTN"},void 0),(0,s.jsx)(H,{job:"FSH"},void 0)]}),void 0)}),void 0),(0,s.jsx)(h,{className:"job-selector_background-icon",name:"meteo"},void 0)]}),void 0)})),R=r.Pi((function({name:e,children:t}){return(0,s.jsxs)("div",Object.assign({className:"job-selector_group"},{children:[(0,s.jsx)("div",Object.assign({className:"job-selector_group-name"},{children:e}),void 0),t]}),void 0)})),H=r.Pi((function({job:e}){const t=g(),a=m.jobSchemas[e];return(0,s.jsx)(x,{children:(0,s.jsxs)("a",Object.assign({className:"job-selector_item",href:`?${e}`,onClick:a=>{a.preventDefault(),t.setJob(e),window.history.pushState(window.history.state,document.title,window.location.href)}},{children:[a.name,(0,s.jsx)(h,{className:"job-selector_icon",name:"jobs/"+e},void 0)]}),void 0)},void 0)}));var q=a(5120);const z=r.Pi((function(){const e=g();return(0,s.jsxs)("div",Object.assign({className:"filter card"},{children:[(0,s.jsxs)("div",Object.assign({className:"filter_section"},{children:[(0,s.jsx)("span",Object.assign({className:"filter_title"},{children:"“聚焦”模式"}),void 0),(0,s.jsx)("span",Object.assign({className:"filter_sub"},{children:"隐藏大部分装备，对比某几件"}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"filter_controls"},{children:[(0,s.jsx)(q.Y,{label:"不启用",checked:"no"===e.filterFocus,onChange:()=>e.setFilterFocus("no")},void 0),(0,s.jsx)(q.Y,{label:"只显示镶嵌了魔晶石的装备",checked:"melded"===e.filterFocus,onChange:()=>e.setFilterFocus("melded")},void 0),(0,s.jsx)(q.Y,{label:"只显示镶嵌了魔晶石的装备，并隐藏仅有一件装备可供选择的部位",checked:"comparable"===e.filterFocus,onChange:()=>e.setFilterFocus("comparable")},void 0)]}),void 0)]}),void 0)}));var F=a(1807),A=a(3087),B=a(4173);const K=r.Pi((function({toggle:e}){const t=g();return(0,s.jsx)("div",Object.assign({className:"level-sync card"},{children:(0,s.jsxs)(F.a,{children:[m.jobLevels.map((a=>a<=t.schema.jobLevel&&(0,s.jsx)(A.i,{defaultOpen:a===t.jobLevel||a>=t.schema.jobLevel-10&&t.jobLevel>=t.schema.jobLevel-10,handle:(0,s.jsx)(B.ug,{className:"level-sync_group",text:`${a}级`,metaIcon:(0,s.jsx)(h,{className:"level-sync_group-icon",name:"chevron-right"},void 0)},void 0),children:(0,s.jsxs)("div",Object.assign({className:"level-sync_levels"},{children:[m.syncLevels[a].map((i=>(0,s.jsx)(x,{children:(0,s.jsx)("span",{className:l("level-sync_level",m.syncLevelIsPopular[i]&&"-popular",i===t.syncLevel&&"-selected"),onClick:()=>{t.setSyncLevel(i,a),e()},children:i},void 0)},i))),a!==t.schema.jobLevel&&(0,s.jsx)(x,{children:(0,s.jsx)("span",{className:l("level-sync_job-level-sync",a===t.jobLevel&&void 0===t.syncLevel&&"-selected"),onClick:()=>{t.setSyncLevel(void 0,a),e()},children:"仅同步等级"},void 0)},void 0)]}),void 0)},a))),(t.jobLevel!==t.schema.jobLevel||void 0!==t.syncLevel)&&(0,s.jsx)(p.z,{className:"level-sync_cancel",onClick:()=>{t.setSyncLevel(void 0,void 0),e()},children:"取消同步"},void 0)]},void 0)}),void 0)}));var W=a(1512),U=a(2430),Y=a(1037);const $=r.Pi((function(){const e=g(),[t,a]=d.useState(0);return(0,s.jsxs)("div",Object.assign({className:"materia-overall card"},{children:[(0,s.jsx)("div",Object.assign({className:"materia-overall_tabbar"},{children:(0,s.jsxs)(W.n,Object.assign({activeTabIndex:t,onActivate:e=>a(e.detail.index)},{children:[(0,s.jsx)(U.O,{children:"用量预估"},void 0),(0,s.jsx)(U.O,Object.assign({style:{visibility:"hidden",pointerEvents:"none"}},{children:"批量镶嵌"}),void 0)]}),void 0)}),void 0),0===t&&(0,s.jsxs)("table",Object.assign({className:"materia-consumption table"},{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"魔晶石"},void 0),(0,s.jsx)("th",{children:"安全孔"},void 0),(0,s.jsx)("th",{children:"期望"},void 0),(0,s.jsx)("th",{children:"90%*"},void 0),(0,s.jsx)("th",{children:"99%*"},void 0)]},void 0)},void 0),(0,s.jsxs)("tbody",{children:[(()=>{const t=[],a=e.schema.stats.filter((t=>t in e.materiaConsumption));for(const i of a)for(const a of m.materiaGrades){const o=e.materiaConsumption[i][a];void 0!==o&&t.push((0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:m.getMateriaName(i,a,"stat"===e.setting.materiaDisplayName)},void 0),(0,s.jsx)("td",{children:o.safe},void 0),(0,s.jsx)("td",{children:o.expectation},void 0),(0,s.jsx)("td",{children:o.confidence90},void 0),(0,s.jsx)("td",{children:o.confidence99},void 0)]},i+a))}return t})(),0===Object.keys(e.materiaConsumption).length&&(0,s.jsx)("tr",Object.assign({className:"materia-consumption_empty"},{children:(0,s.jsx)("td",Object.assign({colSpan:5},{children:"未镶嵌魔晶石"}),void 0)}),void 0),(0,s.jsx)("tr",Object.assign({className:"materia-consumption_tip"},{children:(0,s.jsxs)("td",Object.assign({colSpan:5},{children:["*以此成功率完成全部镶嵌所需的数量",e.schema.toolMateriaDuplicates>1&&(0,s.jsxs)("div",Object.assign({className:l("materia-consumption_tool-duplicates",!e.duplicateToolMateria&&"-disabled")},{children:[`主副手的用量按照${e.schema.toolMateriaDuplicates}套计算`,(0,s.jsx)(Y.r,{className:"materia-consumption_tool-duplicates-switch",checked:e.duplicateToolMateria,onChange:e.toggleDuplicateToolMateria},void 0)]}),void 0)]}),void 0)}),void 0)]},void 0)]}),void 0),1===t&&(0,s.jsx)("div",{children:"TBD"},void 0)]}),void 0)})),J=r.Pi((function(){const e=g();return(0,s.jsxs)("div",Object.assign({className:"share card"},{children:[(0,s.jsx)("a",Object.assign({className:"share_url",href:e.shareUrl,target:"_blank"},{children:e.shareUrl}),void 0),(0,s.jsx)("div",Object.assign({className:"share_tip"},{children:"分享时只会包含选中的装备。"}),void 0),(0,s.jsx)(T(),{className:"share_copy",component:"span","data-clipboard-text":e.shareUrl,children:(0,s.jsx)(p.z,{children:"复制"},void 0)},void 0)]}),void 0)})),X=r.Pi((function(){const e=g();return(0,s.jsxs)("div",Object.assign({className:"setting card"},{children:[(0,s.jsxs)("div",Object.assign({className:"setting_section"},{children:[(0,s.jsx)("span",Object.assign({className:"setting_title"},{children:"装备名显示方式"}),void 0),(0,s.jsx)("span",Object.assign({className:"setting_sub"},{children:"国服未实装的装备总会显示为获取途径"}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"setting_controls"},{children:[(0,s.jsx)(q.Y,{label:"显示装备名",checked:"name"===e.setting.gearDisplayName,onChange:()=>e.setting.setGearDisplayName("name")},void 0),(0,s.jsx)(q.Y,{label:"显示获取途径",checked:"source"===e.setting.gearDisplayName,onChange:()=>e.setting.setGearDisplayName("source")},void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"setting_section"},{children:(0,s.jsx)("span",Object.assign({className:"setting_title"},{children:"装备颜色方案"}),void 0)}),void 0),(0,s.jsxs)("div",Object.assign({className:"setting_controls"},{children:[(0,s.jsx)(q.Y,{label:"区分竞品",checked:"source"===e.setting.gearColorScheme,onChange:()=>e.setting.setGearColorScheme("source")},void 0),(0,s.jsx)(q.Y,{label:"按稀有度上色",checked:"rarity"===e.setting.gearColorScheme,onChange:()=>e.setting.setGearColorScheme("rarity")},void 0),(0,s.jsx)(q.Y,{label:"不上色",checked:"none"===e.setting.gearColorScheme,onChange:()=>e.setting.setGearColorScheme("none")},void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"setting_section"},{children:(0,s.jsx)("span",Object.assign({className:"setting_title"},{children:"魔晶石显示方式"}),void 0)}),void 0),(0,s.jsxs)("div",Object.assign({className:"setting_controls"},{children:[(0,s.jsx)(q.Y,{label:"显示增益的属性",checked:"stat"===e.setting.materiaDisplayName,onChange:()=>e.setting.setMateriaDisplayName("stat")},void 0),(0,s.jsx)(q.Y,{label:"显示魔晶石本身的名字",checked:"materia"===e.setting.materiaDisplayName,onChange:()=>e.setting.setMateriaDisplayName("materia")},void 0)]}),void 0),(0,s.jsx)("div",Object.assign({className:"setting_section"},{children:(0,s.jsx)("span",Object.assign({className:"setting_title"},{children:"展示包含魔晶石增益的装备属性"}),void 0)}),void 0),(0,s.jsxs)("div",Object.assign({className:"setting_controls"},{children:[(0,s.jsx)(q.Y,{label:"是，展示实际生效的属性",checked:e.setting.displayMeldedStats,onChange:()=>e.setting.setDisplayMeldedStats(!0)},void 0),(0,s.jsx)(q.Y,{label:"否，展示装备的原始属性",checked:!e.setting.displayMeldedStats,onChange:()=>e.setting.setDisplayMeldedStats(!1)},void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"setting_section"},{children:[(0,s.jsx)("span",Object.assign({className:"setting_title"},{children:"隐藏已废弃的装备"}),void 0),(0,s.jsx)("span",Object.assign({className:"setting_sub"},{children:"部分粉色稀有度的装备、未强化的旧点数装备"}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"setting_controls"},{children:[(0,s.jsx)(q.Y,{label:"隐藏",checked:e.setting.hideObsoleteGears,onChange:()=>e.setting.setHideObsoleteGears(!0)},void 0),(0,s.jsx)(q.Y,{label:"显示",checked:!e.setting.hideObsoleteGears,onChange:()=>e.setting.setHideObsoleteGears(!1)},void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"setting_section"},{children:[(0,s.jsx)("span",Object.assign({className:"setting_title"},{children:"高饱和度模式"}),void 0),(0,s.jsx)("span",Object.assign({className:"setting_sub"},{children:"如果默认高亮颜色难以辨识请启用此模式"}),void 0)]}),void 0),(0,s.jsxs)("div",Object.assign({className:"setting_controls"},{children:[(0,s.jsx)(q.Y,{label:"不启用",checked:!e.setting.highSaturation,onChange:()=>e.setting.setHighSaturation(!1)},void 0),(0,s.jsx)(q.Y,{label:"启用",checked:e.setting.highSaturation,onChange:()=>e.setting.setHighSaturation(!0)},void 0)]}),void 0)]}),void 0)})),Z=r.Pi((function(){const e=g(),t=void 0===e.job,a=!e.isViewing&&void 0!==e.job,i=e.isViewing&&void 0!==e.job;return(0,s.jsxs)("div",Object.assign({className:"condition card",style:void 0===e.job?{width:"900px"}:{}},{children:[t&&(0,s.jsx)("span",Object.assign({className:"condition_job -empty"},{children:"选择一个职业开始配装"}),void 0),a&&(0,s.jsx)(S,{label:({ref:t,toggle:a})=>(0,s.jsx)(x,{children:(0,s.jsxs)("span",Object.assign({ref:t,className:"condition_job",onClick:a},{children:[(0,s.jsx)(h,{className:"condition_job-icon",name:"jobs/"+e.job},void 0),(0,s.jsx)("span",Object.assign({className:"condition_job-name"},{children:e.schema.name}),void 0)]}),void 0)},void 0),popper:()=>(0,s.jsx)("div",Object.assign({className:"job-select-panel card"},{children:(0,s.jsx)(V,{},void 0)}),void 0),placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[-4,0]}}]},void 0),i&&(0,s.jsxs)("span",Object.assign({className:"condition_job"},{children:[(0,s.jsx)(h,{className:"condition_job-icon",name:"jobs/"+e.job},void 0),(0,s.jsx)("span",Object.assign({className:"condition_job-name"},{children:e.schema.name}),void 0)]}),void 0),a&&(0,s.jsx)("span",{className:"condition_divider"},void 0),a&&(0,s.jsxs)("span",Object.assign({className:"condition_level"},{children:[(0,s.jsxs)("span",Object.assign({className:"condition_level-value"},{children:[(0,s.jsx)(Q,{value:e.minLevel,onChange:t=>e.setMinLevel(t)},void 0),(0,s.jsx)("span",Object.assign({className:"condition_level-separator"},{children:"-"}),void 0),(0,s.jsx)(Q,{value:e.maxLevel,onChange:t=>e.setMaxLevel(t)},void 0)]}),void 0),"品级"]}),void 0),a&&(0,s.jsx)(S,{label:({ref:e,toggle:t})=>(0,s.jsx)(E,{ref:e,className:"condition_button condition_filter",promotion:"filter",onClick:t,children:"筛选"},void 0),popper:z,placement:"bottom-start"},void 0),(a||i)&&(0,s.jsx)("span",{className:"condition_divider"},void 0),i&&e.schema.levelSyncable&&void 0!==e.syncLevelText&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",Object.assign({className:"condition_text"},{children:[(0,s.jsx)(h,{className:"condition_level-sync-icon",name:"sync"},void 0),e.syncLevelText]}),void 0),(0,s.jsx)("span",{className:"condition_divider"},void 0)]},void 0),a&&e.schema.levelSyncable&&(0,s.jsx)(S,{label:({ref:t,toggle:a})=>{var i;return(0,s.jsxs)(p.z,Object.assign({ref:t,className:"condition_button",onClick:a},{children:[void 0!==e.syncLevelText&&(0,s.jsx)(h,{className:"condition_level-sync-icon",name:"sync"},void 0),null!==(i=e.syncLevelText)&&void 0!==i?i:"品级同步"]}),void 0)},popper:K,placement:"bottom-start"},void 0),(a||i)&&(0,s.jsx)(S,{label:({ref:e,toggle:t})=>(0,s.jsx)(p.z,Object.assign({ref:e,className:"condition_button",onClick:t},{children:"魔晶石"}),void 0),popper:$,placement:"bottom-start"},void 0),(0,s.jsxs)("span",Object.assign({className:"condition_right"},{children:[a&&(0,s.jsx)(S,{label:({ref:e,toggle:t})=>(0,s.jsx)(p.z,Object.assign({ref:e,className:"condition_button",onClick:t},{children:"分享"}),void 0),popper:J,placement:"bottom-end"},void 0),i&&(0,s.jsx)(p.z,{className:"condition_button",children:"迁移至最新版本",onClick:()=>{window.location.href=e.migrateUrl}},void 0),i&&(0,s.jsx)(p.z,{className:"condition_button",onClick:()=>{e.startEditing(),window.history.pushState(null,document.title,window.location.href.replace(/\?.*$/,""))},children:"编辑"},void 0),(a||i)&&(0,s.jsx)(S,{label:({ref:e,toggle:t})=>(0,s.jsx)(p.z,Object.assign({ref:e,className:"condition_button condition_setting",onClick:t},{children:"设置"}),void 0),popper:X,placement:"bottom-end"},void 0),(0,s.jsx)("span",{className:"condition_divider"},void 0),(0,s.jsxs)("span",Object.assign({className:"condition_text"},{children:["数据版本 ",m.patches.data]}),void 0)]}),void 0),t&&(0,s.jsx)(V,{},void 0)]}),void 0)})),Q=(()=>{let e=!1,t=null;return r.Pi((({value:a,onChange:i})=>{const[n,r]=d.useState(a.toString()),[l,c]=d.useState(a);a!==l&&(r(a.toString()),c(a));const g=d.useRef(null);d.useEffect((()=>{const e=e=>{if(e.preventDefault(),0!==e.deltaY){e.target.focus();const t=e.deltaY<0?5:-5;r((e=>(parseInt(e,10)+t).toString()))}},t=g.current;return t.addEventListener("wheel",e,{passive:!1}),()=>t.removeEventListener("wheel",e)}),[]);const p=()=>i(parseInt(n,10)||0);return(0,s.jsx)(v.n,{inputRef:g,className:"condition_level-input mdc-text-field--compact",value:n,onChange:e=>{r(e.target.value)},onFocus:t=>{t.target.select(),e=!0},onBlur:()=>{setTimeout((()=>{e?t=p:o.z((()=>{null==t||t(),t=null,p()}))}),0),e=!1},onKeyPress:e=>{"Enter"===e.key&&e.target.blur()}},void 0)}))})(),ee=r.Pi((function({toggle:e}){const t=g();return(0,s.jsx)("div",Object.assign({className:"clan card"},{children:(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:m.races.map(((a,i)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",Object.assign({className:"clan_race"},{children:a}),void 0),[2*i,2*i+1].map((a=>(0,s.jsx)("td",{children:(0,s.jsx)(x,{children:(0,s.jsx)("div",{className:"clan_item",onClick:()=>{t.setClan(a),e()},children:m.clans[a]},void 0)},void 0)},a)))]},i)))},void 0)},void 0)}),void 0)})),te=r.Pi((function(){const e=g(),t=e.equippedEffects,[a,i]=d.useState(!1);return(0,s.jsxs)("div",Object.assign({className:"summary card"},{children:[(0,s.jsxs)("span",Object.assign({className:"summary_left"},{children:[(0,s.jsx)(S,{label:({ref:t,toggle:a})=>(0,s.jsxs)(p.z,Object.assign({ref:t,className:"summary_clan",onClick:a},{children:[e.raceName," - ",e.clanName]}),void 0),popper:ee,placement:"top-start",modifiers:[{name:"offset",options:{offset:[-8,0]}}],strategy:"fixed"},void 0),(0,s.jsxs)("span",Object.assign({className:"summary_equipped-level"},{children:["il",e.equippedLevel]}),void 0)]}),void 0),(0,s.jsx)("span",{className:"summary_divider"},void 0),(0,s.jsxs)("span",Object.assign({className:"summary_middle"},{children:[!e.isViewing&&t&&(0,s.jsx)(p.z,{className:"summary_tiers-toggle",children:(a?"隐藏":"显示")+"阈值(差值)",onClick:()=>{i(!a),document.querySelector(".app").style.paddingBottom=(a?48:64)+"px"}},void 0),t&&(0,s.jsxs)("span",Object.assign({className:"summary_stat summary_damage"},{children:[t.damage.toFixed(5),(0,s.jsx)("span",{className:"summary_damage-tip","aria-label":"BLU"!==e.job?"包括食物和组队加成，不包括其他任何手动施放的增益（如爆发药、连环计、身形、天语等）":"包括食物和组队加成，包括“以太复制：进攻”，不包括其他手动施放的增益",role:"tooltip",children:(0,s.jsx)(h,{name:"help"},void 0)},void 0),(0,s.jsx)("div",Object.assign({className:"summary_stat-name"},{children:"每威力伤害期望"}),void 0)]}),void 0)]}),void 0),(0,s.jsx)("span",{className:"summary_divider"},void 0),e.schema.stats.map((i=>{var o,n;return(0,s.jsxs)("span",Object.assign({className:l("summary_stat",e.schema.skeletonGears&&"-skeleton")},{children:[a&&void 0!==e.equippedTiers&&void 0!==e.equippedTiers[i]&&(0,s.jsxs)("div",Object.assign({className:"summary_stat-tier"},{children:[(0,s.jsx)("span",Object.assign({className:"summary_stat-prev"},{children:e.equippedTiers[i].prev}),void 0),(0,s.jsxs)("span",Object.assign({className:"summary_stat-next"},{children:["+",e.equippedTiers[i].next]}),void 0)]}),void 0),e.equippedStats[i],t&&(0,s.jsxs)(s.Fragment,{children:[("SKS"===i||"SPS"===i)&&(0,s.jsx)("div",{className:l("summary_stat-effect",(null===(o=e.schema.statModifiers)||void 0===o?void 0:o.gcdReason)&&"-tip"),"aria-label":null===(n=e.schema.statModifiers)||void 0===n?void 0:n.gcdReason,role:"tooltip",children:t.gcd.toFixed(2)+"s"},void 0),"VIT"===i&&(0,s.jsxs)("div",Object.assign({className:"summary_stat-effect summary_stat-effect-hp"},{children:[t.hp,(0,s.jsx)("span",Object.assign({className:"summary_stat-small"},{children:"HP"}),void 0)]}),void 0),"TEN"===i&&(0,s.jsxs)("div",Object.assign({className:"summary_stat-effect"},{children:["-",(100*(t.tenDamage-1)).toFixed(1),"%"]}),void 0),"PIE"===i&&(0,s.jsxs)("div",Object.assign({className:"summary_stat-effect"},{children:[t.mp,(0,s.jsx)("span",Object.assign({className:"summary_stat-small"},{children:"MP"}),void 0),"/3s"]}),void 0)]},void 0),(0,s.jsx)("div",Object.assign({className:"summary_stat-name"},{children:m.statNames[i]}),void 0)]}),i)}))]}),void 0)})),ae=r.Pi((function(){return(0,s.jsxs)("div",Object.assign({className:"about"},{children:[(0,s.jsx)("span",Object.assign({className:"about_name"},{children:"最终幻想14配装器暗影版"}),void 0),(0,s.jsx)("span",Object.assign({className:"about_version"},{children:"2407b"}),void 0),(0,s.jsx)("span",Object.assign({className:"about_separator"},{children:"·"}),void 0),(0,s.jsx)("a",{className:"about_link",href:"https://github.com/Asvel/ffxiv-gearing/blob/shadowbringers/CHANGELOG.md",target:"_blank",children:"更新记录"},void 0),(0,s.jsx)("span",Object.assign({className:"about_separator"},{children:"·"}),void 0),(0,s.jsx)("a",{className:"about_link",href:"https://github.com/Asvel/ffxiv-gearing#license",target:"_blank",children:"许可协议"},void 0),(0,s.jsx)("span",Object.assign({className:"about_separator"},{children:"·"}),void 0),(0,s.jsx)("a",{className:"about_link",href:"https://github.com/Asvel/ffxiv-gearing",target:"_blank",children:"源代码"},void 0)]}),void 0)})),se=r.Pi((function({store:e}){return e.isLoading?null:(0,s.jsx)(c.Provider,Object.assign({value:e},{children:(0,s.jsxs)("div",Object.assign({className:l("app",`app-${e.mode}`,e.setting.highSaturation&&"app-high-saturation")},{children:[(0,s.jsx)(Z,{},void 0),void 0!==e.job&&(e.isViewing?(0,s.jsx)(I,{},void 0):e.schema.slots.map((e=>(0,s.jsx)(G,{slot:e},e.slot)))),void 0!==e.job&&(0,s.jsx)(te,{},void 0),(0,s.jsx)(ae,{},void 0),(0,s.jsx)("div",{id:"popper"},void 0)]}),void 0)}),void 0)}));var ie=a(3379),oe=a.n(ie),ne=a(4339);oe()(ne.Z,{insert:"head",singleton:!1}),ne.Z.locals,o.EH((()=>{void 0===n.h.job||n.h.isLoading||(document.title=`${n.h.schema.name}(il${n.h.equippedLevel}) - 最终幻想14配装器`)}));const re=document.createElement("div");document.body.appendChild(re),i.render((0,s.jsx)(se,{store:n.h},void 0),re)},8561:(e,t,a)=>{"use strict";a.d(t,{P:()=>m,Q:()=>v});var s=a(2567);const i=e=>{const t={};for(let a=0;a<e.length;a++)t[e[a]]=a;return t},o=[{job:"PLD",statDecode:["CRT","DET","DHT","SKS","TEN"]},{job:"WAR",statDecode:["CRT","DET","DHT","SKS","TEN"]},{job:"DRK",statDecode:["CRT","DET","DHT","SKS","TEN"]},{job:"GNB",statDecode:["CRT","DET","DHT","SKS","TEN"]},{job:"WHM",statDecode:["CRT","DET","DHT","SPS","PIE"]},{job:"SCH",statDecode:["CRT","DET","DHT","SPS","PIE"]},{job:"AST",statDecode:["CRT","DET","DHT","SPS","PIE"]},{job:"MNK",statDecode:["CRT","DET","DHT","SKS"]},{job:"DRG",statDecode:["CRT","DET","DHT","SKS"]},{job:"NIN",statDecode:["CRT","DET","DHT","SKS"]},{job:"SAM",statDecode:["CRT","DET","DHT","SKS"]},{job:"BRD",statDecode:["CRT","DET","DHT","SKS"]},{job:"MCH",statDecode:["CRT","DET","DHT","SKS"]},{job:"DNC",statDecode:["CRT","DET","DHT","SKS"]},{job:"BLM",statDecode:["CRT","DET","DHT","SPS"]},{job:"SMN",statDecode:["CRT","DET","DHT","SPS"]},{job:"RDM",statDecode:["CRT","DET","DHT","SPS"]},{job:"BLU",statDecode:["CRT","DET","DHT","SPS"]},{job:"CRP",statDecode:["CMS","CRL","CP"]},{job:"BSM",statDecode:["CMS","CRL","CP"]},{job:"ARM",statDecode:["CMS","CRL","CP"]},{job:"GSM",statDecode:["CMS","CRL","CP"]},{job:"LTW",statDecode:["CMS","CRL","CP"]},{job:"WVR",statDecode:["CMS","CRL","CP"]},{job:"ALC",statDecode:["CMS","CRL","CP"]},{job:"CUL",statDecode:["CMS","CRL","CP"]},{job:"MIN",statDecode:["GTH","PCP","GP"]},{job:"BTN",statDecode:["GTH","PCP","GP"]},{job:"FSH",statDecode:["GTH","PCP","GP"]}],n={};for(let e=0;e<o.length;e++){const t=o[e],a=i(t.statDecode);n[t.job]={index:e,statEncode:a}}const r=[50,60,70,80],l=i(r);var d;!function(e){e[e.Special=6]="Special",e[e.Customizable=7]="Customizable"}(d||(d={}));const c=[10337,10338,10339,10340,10341,10342,10343,10344,17726],g=i(c);class p{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:77}),Object.defineProperty(this,"job",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"jobLevel",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"syncLevel",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"gearId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"gearType",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"materiaSlot",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"materiaStat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"materiaGrade",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"materiaCode",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"specialGear",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"customStat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_version",{enumerable:!0,configurable:!0,writable:!0,value:1})}useVersion(e){this._version=e,e>=1&&(this.job=29,this.jobLevel=80,this.gearId=5e4,this.materiaSlot=6,this.materiaGrade=8),e>=2&&(this.syncLevel=540),e>=3&&(this.jobLevel=4,this.gearType=8,this.specialGear=9,this.customStat=1001)}useJob(e){this.materiaStat=o[n[e].index].statDecode.length,this._version<=2&&(this.materiaCode=this.materiaStat*this.materiaGrade+1)}}function m({job:e,jobLevel:t,syncLevel:a,gears:i}){var c,m,v,u,h,b,x;const j=new p;j.useVersion(3),j.useJob(e);const{statEncode:f}=n[e],{statDecode:S}=o[n[e].index],_=[],y=[];let N=!1;y[j.materiaGrade]=[];for(const{id:e,materias:t,customStats:a}of i)if(e in g)_[d.Special]=1;else if(void 0!==a)_[d.Customizable]=1;else{_[t.length]=1;for(const e of t)null!==e&&void 0!==f[e[0]]?(null!==(c=y[x=e[1]])&&void 0!==c||(y[x]=[]),y[e[1]][f[e[0]]]=1):N=!0}let w=0;for(let e=0;e<j.gearType;e++)void 0!==_[e]&&(_[e]=w,w+=1);let T=0;for(let e=j.materiaGrade;e>=1;e--)if(void 0!==y[e])for(let t=0;t<j.materiaStat;t++)void 0!==y[e][t]&&(y[e][t]=T,T+=1);N&&(T+=1);let D=0;for(;!N&&void 0===y[D];)D++;const L=[],O=[];for(const{id:e,materias:t,customStats:a}of i)if(e>0)if(e in g)O.push(e);else{const s=[];for(const e of t)s.push(null===e||void 0===f[e[0]]?T-1:y[e[1]][f[e[0]]]);L.push({id:e,materias:s,customStats:a})}else console.warn(`share.stringify: gear id ${e} invalid.`);if(0===L.length&&0===O.length)return"";let M=L.length-1;for(;0===(null===(m=L[M])||void 0===m?void 0:m.materias.length);)M--;const C=(null===(v=L[M-1])||void 0===v?void 0:v.id)>(null===(u=L[M])||void 0===u?void 0:u.id);L.sort(((e,t)=>e.id-t.id));let k=0;for(let e=1;e<L.length;e++){const t=L[e].id-L[e-1].id;t>k&&(k=t)}k+=1;let G=1;L.length>1&&((k>=L[0].id||L[1].id-L[0].id<L[L.length-1].id-L[L.length-2].id)&&(G=-1,L.reverse()),L[L.length-1].id-L[L.length-2].id==G*k-1&&(k+=1));let I=0;const P=(e,t)=>{I=s.add(s.multiply(I,t),e<t?e:t-1)},E=e=>P(e?1:0,2);for(let e=L.length-1;e>=0;e--){const{id:t,materias:a,customStats:s}=L[e];if(e>0){const a=(t-L[e-1].id)*G;P(a+(e===L.length-1?1:0),k)}else E(C),E(1===G),P(k,t),P(t,j.gearId);if(void 0!==s)for(let e=S.length-1;e>=0;e--)P(null!==(h=s[S[e]])&&void 0!==h?h:0,j.customStat);else for(let e=a.length-1;e>=0;e--)P(a[e],T);P(_[void 0===s?a.length:d.Customizable],w)}for(const e of O)P(g[e],j.specialGear),P(_[d.Special],w);for(let e=D;e<=j.materiaGrade;e++)if(0!==e)for(let t=j.materiaStat-1;t>=0;t--)E(void 0!==(null===(b=y[e])||void 0===b?void 0:b[t]));P(D,j.materiaGrade+1);for(let e=j.gearType-1;e>=0;e--)E(void 0!==_[e]);return void 0!==a||t!==r[j.jobLevel-1]?(P(null!=a?a:0,j.syncLevel),P(l[t],j.jobLevel),E(!0)):E(!1),P(n[e].index,j.job),P(3,j.version),s.toString(I,62)}function v(e){let t=s.parseInt(e,62);const a=e=>{const a=s.remainder(t,e);return t=s.divide(t,e),a},i=()=>1===a(2),n=new p,l=a(n.version);if(l<3)return function(e,t){const a=e=>{const a=s.remainder(t,e);return t=s.divide(t,e),a},i=new p;i.useVersion(e);const{job:n,statDecode:r}=o[a(i.job)];i.useJob(n);let l=a(i.jobLevel)+1;1===e&&(l=80);const d=e>=2&&a(i.syncLevel)||void 0,c=Array.from({length:a(i.materiaCode)},(()=>{let e=a(i.materiaCode);if(e>0){e-=1;const t=e%i.materiaGrade+1;return[r[Math.floor(e/i.materiaGrade+1e-7)],t]}return null})).reverse(),g=a(i.gearId),m=a(g),v=[];for(;0!==t;){const e=Array.from({length:a(i.materiaSlot)},(()=>c[a(c.length)])).reverse(),t=a(g-m+1)+m;v.push({id:t,materias:e})}return void 0===v.find((e=>e.id===m))&&v.push({id:m,materias:[]}),{job:n,jobLevel:l,syncLevel:d,gears:v}}(l,t);n.useVersion(l);const{job:g,statDecode:m}=o[a(n.job)];n.useJob(g);const v=i(),u=r[v?a(n.jobLevel):n.jobLevel-1],h=v&&a(n.syncLevel)||void 0,b=[];for(let e=0;e<n.gearType;e++)i()&&b.push(e);const x=a(n.materiaGrade+1),j=[];for(let e=n.materiaGrade;e>=x;e--)if(0!==e)for(let t=0;t<n.materiaStat;t++)i()&&j.push([m[t],e]);0===x&&j.push(null);const f=[];let S=0,_=0,y=!1,N=-1;for(;0!==t;){const e=b[a(b.length)],s=[];let o;if(e!==d.Special){if(e===d.Customizable){o={};for(const e of m){const t=a(n.customStat);t>0&&(o[e]=t)}}else for(let t=0;t<e;t++)s[t]=j[a(j.length)];-1===N?(N=a(n.gearId),S=a(N),_=i()?1:-1,y=i()):N+=(a(S)-(0===t?1:0))*_,f.push({id:N,materias:s,customStats:o})}else{const e=c[a(n.specialGear)];f.push({id:e,materias:s})}}return y!==(-1===_)&&f.reverse(),{job:g,jobLevel:u,syncLevel:h,gears:f}}},2277:(e,t,a)=>{"use strict";a.r(t);var s=a(8949),i=a(7090),o=a(6277),n=a(4222),r=a(8561),l=a(2860);const d=s.LO.box(void 0,{deep:!1});s.EH((()=>{const e=d.get();if(void 0===e||""===window.location.search)return;if(l.l9.get())return;const t={mode:"view",job:e.job,jobLevel:e.jobLevel,syncLevel:e.syncLevel,gears:{},equippedGears:{}};for(const a of e.gears)if(l.pS.has(a.id)){const{slot:e}=l.pS.get(a.id),s=void 0===t.equippedGears[e]?a.id:-a.id,i=a.materias.map((e=>({stat:null===e?void 0:e[0],grade:null===e?void 0:e[1]}))),o=a.customStats;t.gears[s]={id:s,materias:i,customStats:o},t.equippedGears[s>0?e:-e]=s}i.Xx(l.h,t)}));const c=()=>{let e=window.location.search.slice(1);if(e in o.jobSchemas)l.h.setJob(e),window.history.replaceState(window.history.state,document.title,window.location.href.replace(/\?.*$/,""));else{if(e.startsWith("import-")){const t=JSON.parse(decodeURIComponent(e.slice("import-".length)));e=r.P(t),window.history.replaceState(window.history.state,document.title,window.location.href.replace(/\?.*$/,`?${e}`))}if(e.length>3){const t=r.Q(e);for(const e of t.gears)(0,l.oG)(e.id);s.z((()=>d.set(t))),l.h.setMode("view")}}};c(),window.addEventListener("popstate",s.aD((()=>{const e=n.z();void 0!==e?i.Xx(l.h,e):(i.Xx(l.h,i.vM(l.yh.create())),c())})))},2860:(e,t,a)=>{"use strict";a.d(t,{jr:()=>u,XV:()=>p,JT:()=>h,rL:()=>b,j_:()=>c,LW:()=>d,pE:()=>r,yh:()=>f,mD:()=>C,GW:()=>M,pS:()=>S,l9:()=>y,V6:()=>O,oG:()=>T,MI:()=>L,h:()=>G});var s=a(7090),i=a(6277),o=a(4222);const n="ffxiv-gearing-setting",r=s.V5.model({gearDisplayName:s.V5.optional(s.V5.string,"name"),gearColorScheme:s.V5.optional(s.V5.string,"source"),materiaDisplayName:s.V5.optional(s.V5.string,"stat"),displayMeldedStats:s.V5.optional(s.V5.boolean,!0),hideObsoleteGears:s.V5.optional(s.V5.boolean,!0),highSaturation:s.V5.optional(s.V5.boolean,!1)}).actions((e=>({afterCreate(){var t;s.Xx(e,JSON.parse(null!==(t=localStorage.getItem(n))&&void 0!==t?t:"{}")),s.cf(e,(e=>localStorage.setItem(n,JSON.stringify(e))))},setGearDisplayName(t){e.gearDisplayName=t},setGearColorScheme(t){e.gearColorScheme=t},setMateriaDisplayName(t){e.materiaDisplayName=t},setDisplayMeldedStats(t){e.displayMeldedStats=t},setHideObsoleteGears(t){e.hideObsoleteGears=t},setHighSaturation(t){e.highSaturation=t}}))),l="ffxiv-gearing-promotion",d=s.V5.model({filter:s.V5.optional(s.V5.boolean,!0)}).views((e=>({get(t){var a;return null!==(a=e[t])&&void 0!==a&&a}}))).actions((e=>({afterCreate(){const t=localStorage.getItem(l),a=JSON.parse(null!=t?t:"{}");if(null===t){let t=!0;for(let e=0;e<localStorage.length;e++)if(localStorage.key(e).startsWith("ffxiv-gearing-")){t=!1;break}if(t)for(const t of Object.keys(s.vM(e)))a[t]=!1;localStorage.setItem(l,JSON.stringify(a))}s.Xx(e,a),s.cf(e,(e=>localStorage.setItem(l,JSON.stringify(e))))},off(t){!0===e[t]&&(e[t]=!1)}}))),c=s.V5.model({stat:s.V5.maybe(s.V5.string),grade:s.V5.maybe(s.V5.number)}).views((e=>({get index(){return Number(e.$treenode.subpath)},get gear(){return s.nc(e,p)}}))).views((e=>({get name(){return void 0===e.stat?"":i.getMateriaName(e.stat,e.grade,"stat"===s.dU(e).setting.materiaDisplayName)},get isAdvanced(){return e.index>=e.gear.materiaSlot},get meldableGrades(){return(e.index>e.gear.materiaSlot?i.materiaGradesAdvanced:i.materiaGrades).filter((t=>e.gear.level>=i.materiaGradeRequiredLevels[t-1]))},get successRate(){if(void 0===e.grade)return;const t=e.index-e.gear.materiaSlot;return t<0?100:i.materiaSuccessRates[t][e.grade-1]}}))).actions((e=>({meld(t,a){e.stat=t,e.grade=a}})));var g=a(8949);const p=s.V5.model("Gear",{id:s.V5.identifierNumber,materias:s.V5.optional(s.V5.array(c),[]),customStats:s.V5.maybe(s.V5.map(s.V5.number))}).views((e=>({get data(){if(!S.has(Math.abs(e.id)))throw ReferenceError(`Gear ${e.id} not exists.`);return S.get(Math.abs(e.id))}}))).views((e=>({get isFood(){return!1},get name(){return e.data.name},get level(){return e.data.level},get slot(){return e.id>0?e.data.slot:-e.data.slot},get jobs(){return i.jobCategories[e.data.jobCategory]},get equipLevel(){return e.data.equipLevel},get materiaSlot(){return e.data.materiaSlot},get materiaAdvanced(){return e.data.materiaAdvanced},get hq(){return e.data.hq},get customizable(){return e.data.customizable},get source(){return e.data.source},get patch(){return e.data.patch},get color(){const{gearColorScheme:t}=s.dU(e).setting;if("none"===t)return"white";const{rarity:a,source:i=""}=e.data;return"source"===t&&v[i.slice(0,2)]||m[a]},get syncedLevel(){let{jobLevel:t,syncLevel:a}=s.nc(e,f);return void 0===a&&t<this.equipLevel&&(a=i.syncLevelOfJobLevels[t]),a<this.level?a:void 0},get caps(){return i.getCaps(e.data)},get bareStats(){return e.data.stats},get materiaStats(){var t;const a={};for(const s of e.materias)if(void 0!==s.stat){const e=i.materias[s.stat][s.grade-1];a[s.stat]=(null!==(t=a[s.stat])&&void 0!==t?t:0)+e}return a},get stats(){var t,a,s;let o={},n=this.bareStats;if(this.customizable&&(n={...n,...e.customStats.toJSON()}),void 0!==this.syncedLevel){const a=i.getCaps(e.data,this.syncedLevel);for(const e of Object.keys(n))o[e]=Math.min(null!==(t=n[e])&&void 0!==t?t:0,a[e])}else if(0===this.materiaSlot)o=n;else for(const e of Object.keys(n).concat(Object.keys(this.materiaStats)))o[e]=Math.min((null!==(a=n[e])&&void 0!==a?a:0)+(null!==(s=this.materiaStats[e])&&void 0!==s?s:0),this.caps[e]);return o},get totalMeldableStats(){var e;const t={};for(const a of Object.keys(this.caps))t[a]=this.caps[a]-(null!==(e=this.bareStats[a])&&void 0!==e?e:0);return t},get currentMeldableStats(){var e;const t={};for(const a of Object.keys(this.caps))t[a]=this.totalMeldableStats[a]-(null!==(e=this.materiaStats[a])&&void 0!==e?e:0);return t},get statHighlights(){var e,t;const a={};for(const s of Object.keys(this.bareStats))a[s]=i.statHighlight[s]&&(null!==(e=this.bareStats[s])&&void 0!==e?e:0)>=(null!==(t=this.caps[s])&&void 0!==t?t:1/0);return a},get isInstalled(){return!(this.patch>i.patches.current)},get isEquipped(){return s.nc(e,f).equippedGears.get(this.slot.toString())===e},get isMelded(){for(const t of e.materias)if(void 0!==t.stat)return!0;return void 0!==e.customStats&&e.customStats.size>0}}))).actions((e=>({setCustomStat(t,a){a>0?e.customStats.set(t,a<=i.customStatMax?a:i.customStatMax):e.customStats.delete(t)},initialize(){const t=e.materiaAdvanced?5:e.materiaSlot;e.materias.length>t&&e.materias.splice(0,t,5),e.materias.length<t&&e.materias.push(...new Array(t-e.materias.length).fill({})),e.customizable&&void 0===e.customStats&&(e.customStats={})},afterCreate(){g.gx((()=>S.has(Math.abs(e.id))),this.initialize)}}))).postProcessSnapshot((e=>(void 0===e.customStats&&delete e.customStats,e))),m={1:"white",2:"green",3:"blue",4:"purple",7:"red"},v={点数:"red",天书:"purple",绝境:"purple"},u=s.V5.model("Food",{id:s.V5.identifierNumber}).views((e=>({get data(){if(!S.has(e.id))throw ReferenceError(`Food ${e.id} not exists.`);return S.get(e.id)}}))).views((e=>({get isFood(){return!0},get name(){return e.data.name},get level(){return e.data.level},get slot(){return e.data.slot},get jobs(){return i.jobCategories[e.data.jobCategory]},get hq(){return!0},get patch(){return e.data.patch},get color(){return"white"},get stats(){return e.data.stats},get statRates(){return e.data.statRates},get requiredStats(){const e={};for(const t of Object.keys(this.stats)){const a=this.statRates[t];void 0!==a&&(e[t]=Math.ceil(100*this.stats[t]/a))}return e},get effectiveStats(){var t,a;const i=s.nc(e,f),o={};for(const e of Object.keys(this.stats)){const s=null!==(t=i.equippedStatsWithoutFood[e])&&void 0!==t?t:1,n=null!==(a=this.statRates[e])&&void 0!==a?a:1/0;o[e]=Math.min(this.stats[e],M(s*n/100))}return o},get statHighlights(){return{[e.data.statMain]:!0}},get utilization(){let e=0,t=0;for(const a of Object.keys(this.stats))e+=this.stats[a],t+=this.effectiveStats[a];return M(t/e*100)},get utilizationOpacity(){return Math.max(.2,(this.utilization/100)**2)},get isInstalled(){return!(this.patch>i.patches.current)},get isEquipped(){return s.nc(e,f).equippedGears.get("-1")===e}}))),h=s.V5.union({dispatcher:e=>{const t=S.get(Math.abs(e.id));return void 0!==t?(void 0!==e.materias&&-1===t.slot&&delete e.materias,-1!==t.slot?p:u):void 0!==e.materias?p:u}},p,u),b=s.V5.maybe(s.V5.reference(h,{get(e,t){const a=t?s.Q0(h,t,e):void 0;return a&&S.has(Math.abs(a.id))?a:void 0},set(e){var t;return null===(t=e)||void 0===t?void 0:t.$treenode.unnormalizedIdentifier}}));var x=a(8561);const j="ffxiv-gearing-clan",f=s.V5.model("Store",{mode:s.V5.optional(s.V5.string,"edit"),job:s.V5.maybe(s.V5.string),jobLevel:s.V5.optional(s.V5.number,80),minLevel:s.V5.optional(s.V5.number,0),maxLevel:s.V5.optional(s.V5.number,0),syncLevel:s.V5.maybe(s.V5.number),filterPatch:s.V5.optional(s.V5.string,"all"),filterFocus:s.V5.optional(s.V5.string,"no"),showAllFoods:s.V5.optional(s.V5.boolean,!1),duplicateToolMateria:s.V5.optional(s.V5.boolean,!0),gears:s.V5.map(h),equippedGears:s.V5.map(b)}).volatile((()=>({promotion:d.create(),clan:Number(localStorage.getItem(j))||0,autoSelectScheduled:!1}))).views((e=>({get setting(){return s.dU(e).setting},get filteredIds(){if(void 0===e.job)return[];if("view"===e.mode)return Array.from(e.gears.keys(),(e=>Number(e)));const t=g.rg((()=>e.equippedGears.toJSON())),a=[];for(const s of O.get()){const{job:o,minLevel:n,maxLevel:r,filterPatch:l,filterFocus:d}=e;!i.jobCategories[s.jobCategory][o]||"all"!==l&&("next"!==l||s.patch>i.patches.next)&&("current"!==l||s.patch>i.patches.current)||!(-1===s.slot?e.showAllFoods||"best"in s:17===s.slot||2===s.slot&&"FSH"===o||s.level>=n&&s.level<=r&&(!s.obsolete||!this.setting.hideObsoleteGears))?(t[s.slot]===s.id&&a.push(s.id),t[-s.slot]===-s.id&&a.push(-s.id)):(a.push(s.id),12===s.slot&&a.push(-s.id))}return a}}))).views((e=>({get isLoading(){return y.get()},get isViewing(){return"view"===e.mode},get schema(){if(void 0===e.job)throw new ReferenceError;return i.jobSchemas[e.job]},get groupedGears(){const t={};for(const a of e.filteredIds){const s=e.gears.get(a.toString());("no"===e.filterFocus||s.isFood||s.isMelded)&&(s.slot in t||(t[s.slot]=[]),t[s.slot].push(s))}return t},get baseStats(){var t,a,s,o;if(void 0===e.job)return{};const n=i.jobLevelModifiers[e.jobLevel],r={PDMG:0,MDMG:0};for(const l of this.schema.stats){const d=null!==(t=i.baseStats[l])&&void 0!==t?t:0;r[l]="number"==typeof d?d:M(n[d]*(null!==(a=this.schema.statModifiers[l])&&void 0!==a?a:100)/100)+(this.schema.noMainStatTrait||l!==this.schema.mainStat?0:n.mainTrait)+(null!==(o=null===(s=i.clanStats[l])||void 0===s?void 0:s[e.clan])&&void 0!==o?o:0)}return r},get equippedStatsWithoutFood(){if(void 0===e.job)return{};const t={...this.baseStats};for(const a of e.equippedGears.values())if(void 0!==a&&!a.isFood)for(const e of Object.keys(a.stats))t[e]=t[e]+a.stats[e];return t},get equippedStats(){var t;if(void 0===e.job)return{};const a=e.equippedGears.get("-1");if(void 0===a)return this.equippedStatsWithoutFood;const s={};for(const e of Object.keys(this.equippedStatsWithoutFood))s[e]=this.equippedStatsWithoutFood[e]+(null!==(t=a.effectiveStats[e])&&void 0!==t?t:0);return s},get equippedLevel(){var t,a,s,i;let o=0,n=0;for(const r of this.schema.slots)o+=(null!==(a=null===(t=e.equippedGears.get(r.slot))||void 0===t?void 0:t.level)&&void 0!==a?a:0)*(null!==(s=r.levelWeight)&&void 0!==s?s:1),n+=null!==(i=r.levelWeight)&&void 0!==i?i:1;return M(o/n)},get materiaConsumption(){const t={};for(const a of e.equippedGears.values()){if(void 0===a||a.isFood)continue;const s=e.duplicateToolMateria&&(1===a.slot||2===a.slot)&&this.schema.toolMateriaDuplicates||1;for(const e of a.materias){if(void 0===e.stat)continue;void 0===t[e.stat]&&(t[e.stat]={}),void 0===t[e.stat][e.grade]&&(t[e.stat][e.grade]={safe:0,expectation:0,confidence90:0,confidence99:0,rates:[]});const a=t[e.stat][e.grade];for(let t=0;t<s;t++)100===e.successRate?a.safe+=1:(a.expectation+=100/e.successRate,a.rates.push(e.successRate/100))}}for(const e of Object.values(t))for(const t of Object.values(e)){t.expectation=t.safe+Math.round(t.expectation);const e=t.rates;if(0===e.length){t.confidence90=t.confidence99=t.safe;continue}const a=[];let s=1,i=0;for(;;){a[s]=[],a[s][e.length-1]=1-(1-e[e.length-1])**s;for(let t=e.length-2;t>=0&&!(e.length-t>s);t--){a[s][t]=0;for(let i=1;i<=s-(e.length-t)+1;i++)a[s][t]+=(1-e[t])**(i-1)*e[t]*a[s-i][t+1]}if(a[s][0]>.9&&0===i&&(i=s),a[s][0]>.99)break;s++}t.confidence90=t.safe+i,t.confidence99=t.safe+s}return t},get syncLevelText(){return void 0!==e.syncLevel?e.syncLevel.toString():e.jobLevel!==this.schema.jobLevel?e.jobLevel+"级":void 0},get raceName(){return i.races[M(e.clan/2)]},get clanName(){return i.clans[e.clan]}}))).views((e=>({get equippedEffects(){var t,a,s,o;const{statModifiers:n,mainStat:r,traitDamageMultiplier:l,partyBonus:d}=e.schema;if(void 0===n||void 0===r||void 0===l)return;const c=i.jobLevelModifiers[e.jobLevel],{main:g,sub:p,div:m,det:v,detTrunc:u}=c,{CRT:h,DET:b,DHT:x,TEN:j,SKS:f,SPS:S,VIT:_,PIE:y,PDMG:N,MDMG:w}=e.equippedStats,T="VIT"===r?"STR":r,D="BLU"===e.job?200:0,L=M(200*(h-p)/m+50+D)/1e3,O=M(200*(h-p)/m+1400)/1e3,C=M((130*(b-g)/v+1e3)/u)*u/1e3,k=M(550*(x-p)/m+D)/1e3,G=M(100*((null!=j?j:p)-p)/m+1e3)/1e3;return{crtChance:L,crtDamage:O,detDamage:C,dhtChance:k,tenDamage:G,damage:.01*(M(g*n[T]/1e3)+(null!==(t="MND"===r||"INT"===r?w:N)&&void 0!==t?t:0)+("BLU"===e.job&&null!==(a=i.bluMdmgAdditions[e.equippedStats.INT-e.baseStats.INT])&&void 0!==a?a:0))*(M(("VIT"===r?c.apTank:c.ap)*(M((null!==(s=e.equippedStats[T])&&void 0!==s?s:0)*(null!=d?d:1.05))-g)/g+100)/100)*C*G*l*((O-1)*L+1)*(.25*k+1),gcd:M(M(2500*(1e3-M(130*((null!=f?f:S)-p)/m))/1e3)*(null!==(o=n.gcd)&&void 0!==o?o:100)/1e3)/100,ssDamage:M(130*((null!=f?f:S)-p)/m+1e3)/1e3,hp:M(c.hp*n.hp/100+("VIT"===r?c.vitTank:c.vit)*(_-g)),mp:M(150*((null!=y?y:g)-g)/m+200)}},get equippedTiers(){var t,a;const{statModifiers:s}=e.schema;if(void 0===s)return;const{main:o,sub:n,div:r,det:l,detTrunc:d}=i.jobLevelModifiers[e.jobLevel],{CRT:c,DET:g,DHT:p,TEN:m,SKS:v,SPS:u,PIE:h}=e.equippedStats;function b(e,t){if(Number.isNaN(e))return;const a=M(e/t);return{prev:C(a*t)-1-e,next:C((a+1)*t)-e}}function x(e,t,a){if(Number.isNaN(e))return;const s=M(M(2.5*(1e3-M(e/t)))*a);return{prev:C((M(1e3-C((s+1)/a)/2.5)+1)*t)-1-e,next:C((M(1e3-C(s/a)/2.5)+1)*t)-e}}return{CRT:b(c-n,r/200),DET:b(g-o,l/130*d),DHT:b(p-n,r/550),TEN:b(m-n,r/100),SKS:x(v-n,r/130,(null!==(t=s.gcd)&&void 0!==t?t:100)/1e3),SPS:x(u-n,r/130,(null!==(a=s.gcd)&&void 0!==a?a:100)/1e3),PIE:b(h-o,r/150)}},get gearset(){var t;if(void 0===e.job)return null;const a=[];for(const s of e.schema.slots){const i=e.equippedGears.get(s.slot.toString());void 0!==i&&a.push({id:i.data.id,materias:i.isFood||void 0!==i.syncedLevel?[]:i.materias.map((e=>void 0!==e.stat?[e.stat,e.grade]:null)),customStats:null===(t=i.customStats)||void 0===t?void 0:t.toJSON()})}return{job:e.job,jobLevel:e.jobLevel,syncLevel:e.syncLevel,gears:a}},get share(){return null===this.gearset?"":x.P(this.gearset)},get shareUrl(){return window.location.origin+window.location.pathname+"?"+this.share},get migrateUrl(){return null===this.gearset?"":"../?import-"+JSON.stringify(this.gearset)}}))).actions((e=>({createGears(){for(const t of e.filteredIds)e.gears.has(t.toString())||e.gears.put(h.create({id:t}))},setMode(t){e.mode=t},setJob(t){var a;const s=e.job&&i.jobSchemas[e.job],o=i.jobSchemas[t];e.job=t,o.jobLevel===(null==s?void 0:s.jobLevel)&&o.levelSyncable||(e.jobLevel=o.jobLevel,e.syncLevel=void 0),o.defaultItemLevel!==(null==s?void 0:s.defaultItemLevel)&&(e.minLevel=o.defaultItemLevel[0],e.maxLevel=o.defaultItemLevel[1]);for(const[a,s]of e.equippedGears.entries())void 0===s||s.jobs[t]||e.equippedGears.delete(a);e.autoSelectScheduled=null!==(a=o.skeletonGears)&&void 0!==a&&a},setMinLevel(t){e.minLevel=t},setMaxLevel(t){e.maxLevel=t},setSyncLevel(t,a){e.syncLevel=t,e.jobLevel=null!=a?a:e.schema.jobLevel},setFilterPatch(t){e.filterPatch=t},setFilterFocus(t){e.filterFocus=t},toggleShowAllFoods(){e.showAllFoods=!e.showAllFoods},toggleDuplicateToolMateria(){e.duplicateToolMateria=!e.duplicateToolMateria},startEditing(){e.mode="edit";let t=1/0,a=-1/0;for(const s of e.schema.slots){const i=e.equippedGears.get(s.slot.toString());void 0!==i&&0!==s.levelWeight&&17726!==i.id&&(i.level<t&&(t=i.level),i.level>a&&(a=i.level))}e.minLevel=t,e.maxLevel=a},equip(t){const a=t.slot.toString();e.equippedGears.get(a)===t?e.equippedGears.delete(a):e.equippedGears.set(a,t)},setClan(t){e.clan=t,localStorage.setItem(j,t.toString())},autoSelect(){if(e.autoSelectScheduled){e.autoSelectScheduled=!1;for(const t of Object.values(e.groupedGears)){let e=t[t.length-1];if(void 0!==e&&!e.isFood&&17!==e.slot){for(let a=t.length-1;a>=0;a--)if(t[a].materiaSlot>0){e=t[a];break}e.isEquipped||this.equip(e)}}}},unprotect(){s.pc(e)}}))).actions((e=>({afterCreate(){for(const t of Object.values(e.equippedGears.toJSON()))T(Math.abs(t));g.EH((()=>L(e.minLevel,e.maxLevel))),g.U5((()=>e.filteredIds),e.createGears,{fireImmediately:!0}),g.U5((()=>e.autoSelectScheduled&&e.groupedGears),e.autoSelect)}}))),S=g.LO.map({},{deep:!1});g.z((()=>{for(const e of a(1571).Z)S.set(e.id,e);for(const e of a(7637).default)S.set(e.id,e)}));const _=g.LO.map({}),y=g.Fl((function(){for(const e of _.values())if("loading"===e)return!0;return!1})),N=async e=>{if(void 0===e||_.has(e))return;g.z((()=>_.set(e,"loading")));const t=(await a(4947)(`./gears-${e}`)).default;g.z((()=>{for(const e of t)S.has(e.id)||S.set(e.id,e);_.set(e,"finished")}))},w=a(8953).Z,T=e=>N(w[e]),D=a(3460).Z,L=(e,t)=>{let a=0;for(;D[a+1]<=e;)a++;for(;D[a]<=t;)N(D[a]),a++};_.set(D[D.length-1],"finished");const O=g.LO.box([],{deep:!1});function M(e){return Math.floor(e+1e-7)}function C(e){return Math.ceil(e-1e-7)}g.EH((()=>{y.get()||g.z((()=>{O.set(Array.from(S.values()).sort(((e,t)=>{const a=e.level-t.level;return 0!==a?a:e.id-t.id})))}))}));const k=o.z();if((null==k?void 0:k.condition)&&(Object.assign(k,k.condition),delete k.condition,o.a(k)),k&&"string"==typeof Object.values(k.equippedGears)[0]){for(const[e,t]of Object.entries(k.equippedGears))k.equippedGears[e]=Number(t);o.a(k)}const G=f.create(k,{setting:r.create()});s.cf(G,(e=>{void 0!==e.job&&"view"!==e.mode&&o.a(e)})),a(2277),window.store=G,window.game=i,s.pc(G),console.log("You can access window.store for data store of this app, and window.game for ffxiv related constants.")}},s={};function i(e){if(s[e])return s[e].exports;var t=s[e]={id:e,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.exports}i.m=a,i.x=e=>{},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,a)=>(i.f[a](e,t),t)),[])),i.u=e=>({43:"gears-70",215:"gears-340",221:"gears-401",336:"gears-255",437:"gears-136",733:"gears-385",772:"gears-1"}[e]+"."+{43:"d9e9b130a2",215:"1ff022eb2d",221:"51c8af6d2b",336:"b70e9062ff",437:"d341d2cac9",733:"ad7f4fd14f",772:"56d7f53d90"}[e]+".js"),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="ffxiv-gearing:",i.l=(a,s,o,n)=>{if(e[a])e[a].push(s);else{var r,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var g=d[c];if(g.getAttribute("src")==a||g.getAttribute("data-webpack")==t+o){r=g;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,i.nc&&r.setAttribute("nonce",i.nc),r.setAttribute("data-webpack",t+o),r.src=a),e[a]=[s];var p=(t,s)=>{r.onerror=r.onload=null,clearTimeout(m);var i=e[a];if(delete e[a],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(s))),t)return t(s)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),l&&document.head.appendChild(r)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={179:0},t=[[476,912,126,619]];i.f.j=(t,a)=>{var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var o=new Promise(((a,i)=>{s=e[t]=[a,i]}));a.push(s[2]=o);var n=i.p+i.u(t),r=new Error;i.l(n,(a=>{if(i.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var o=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",r.name="ChunkLoadError",r.type=o,r.request=n,s[1](r)}}),"chunk-"+t,t)}};var a=e=>{},s=(s,o)=>{for(var n,r,l=o[0],d=o[1],c=o[2],g=o[3],p=0,m=[];p<l.length;p++)r=l[p],i.o(e,r)&&e[r]&&m.push(e[r][0]),e[r]=0;for(n in d)i.o(d,n)&&(i.m[n]=d[n]);for(c&&c(i),s&&s(o);m.length;)m.shift()();return g&&t.push.apply(t,g),a()},o=self.webpackChunkffxiv_gearing=self.webpackChunkffxiv_gearing||[];function n(){for(var a,s=0;s<t.length;s++){for(var o=t[s],n=!0,r=1;r<o.length;r++){var l=o[r];0!==e[l]&&(n=!1)}n&&(t.splice(s--,1),a=i(i.s=o[0]))}return 0===t.length&&(i.x(),i.x=e=>{}),a}o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o));var r=i.x;i.x=()=>(i.x=r||(e=>{}),(a=n)())})(),i.x()})();