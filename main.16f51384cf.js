(()=>{var e,t,a,i={4947:(e,t,a)=>{var i={"./gears-1":[345,772],"./gears-1.js":[345,772],"./gears-136":[7026,437],"./gears-136.js":[7026,437],"./gears-255":[7205,336],"./gears-255.js":[7205,336],"./gears-340":[5441,215],"./gears-340.js":[5441,215],"./gears-385":[8404,733],"./gears-385.js":[8404,733],"./gears-401":[7058,221],"./gears-401.js":[7058,221],"./gears-470":[935,225],"./gears-470.js":[935,225],"./gears-70":[4017,43],"./gears-70.js":[4017,43],"./gears-recent":[7637],"./gears-recent.js":[7637]};function s(e){if(!a.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return Promise.all(t.slice(1).map(a.e)).then((()=>a(s)))}s.keys=()=>Object.keys(i),s.id=4947,e.exports=s},5366:(e,t,a)=>{var i={"./chevron-right.svg":2256,"./help.svg":7843,"./hq.svg":196,"./jobs/ALC.svg":8594,"./jobs/ARM.svg":9294,"./jobs/AST.svg":6573,"./jobs/BLM.svg":1972,"./jobs/BLU.svg":7184,"./jobs/BRD.svg":9660,"./jobs/BSM.svg":5780,"./jobs/BTN.svg":35,"./jobs/CRP.svg":7728,"./jobs/CUL.svg":9596,"./jobs/DNC.svg":8392,"./jobs/DRG.svg":8583,"./jobs/DRK.svg":6156,"./jobs/FSH.svg":7431,"./jobs/GNB.svg":7200,"./jobs/GSM.svg":2918,"./jobs/LTW.svg":543,"./jobs/MCH.svg":8909,"./jobs/MIN.svg":1500,"./jobs/MNK.svg":8008,"./jobs/NIN.svg":5630,"./jobs/PLD.svg":8290,"./jobs/RDM.svg":6967,"./jobs/RPR.svg":9478,"./jobs/SAM.svg":4901,"./jobs/SCH.svg":7768,"./jobs/SGE.svg":9279,"./jobs/SMN.svg":7660,"./jobs/WAR.svg":4171,"./jobs/WHM.svg":9533,"./jobs/WVR.svg":8265,"./meteo.svg":595,"./more.svg":7126,"./open-in-new.svg":8467,"./sync.svg":9419};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=o,e.exports=s,s.id=5366},4339:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(8081),s=a.n(i),o=a(3645),r=a.n(o)()(s());r.push([e.id,'body{background-color:#f2f2f2;cursor:auto;line-height:1.15;min-width:1080px;overflow-x:auto;overflow-y:scroll;text-align:center}svg{fill:currentColor;transform:translateZ(0)}.app{color:rgba(0,0,0,.871);display:inline-block;font-family:Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,微软雅黑,sans-serif;font-size:14px;padding-bottom:48px;position:relative;text-align:initial}.app:not(.app-high-saturation) ::selection{background-color:#c8e1ff}.card{background-color:#fff;background-color:var(--mdc-theme-surface,#fff);border-radius:4px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);overflow:hidden}.table{color:rgba(0,0,0,.871);line-height:36px}.table td,.table th{padding-bottom:0;padding-top:0;white-space:nowrap}.table th{color:rgba(0,0,0,.6);font-weight:400;padding-top:1px}.table td{border-top:1px solid #e0e0e0}.table tbody:first-child tr:first-child td{border-top:none}.table tbody tr:hover{background-color:rgba(0,0,0,.039)}.table tbody tr.-selected{background-color:rgba(98,0,238,.08)}.app-high-saturation .table tbody tr.-selected{background-color:rgba(98,0,238,.16)}.badge-button_badge{height:8px;min-width:8px;padding:0;right:7px;top:10px;transform:none}.rmwc-badge--exited{transform:scale(0)}.job-selector{margin-left:3px;position:relative}.job-selector_column{display:inline-block;padding:6px 16px 24px;position:relative;vertical-align:top;width:160px}.job-selector_group{line-height:34px}.job-selector_group:not(:first-child){margin-top:16px}.job-selector_group-name{font-weight:700;padding-left:16px}.job-selector_item{border-radius:4px;color:inherit;display:block;font-size:14px;padding-left:16px;text-decoration:none}.job-selector_icon{height:18px;margin-left:1px;vertical-align:-4px}.job-selector_background-icon{bottom:-100px;color:#6200ee;opacity:.08;pointer-events:none;position:absolute;right:-100px;width:480px}.job-select-panel{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);min-width:810px;padding-top:16px}.gears_slot{margin-bottom:10px;margin-top:10px}.app-edit .gears_item[data-id]{cursor:pointer}.gears_item.-group-end td{border-bottom:2px solid transparent}.gears_item.-group-end+.gears_item td{border-top-color:#ededed;border-top-width:4px}.gears_inline-slot{font-size:13px;font-weight:700;margin-right:6px;vertical-align:top}.gears_left{padding-left:16px;padding-right:16px;width:320px}th.gears_left{color:rgba(0,0,0,.871);font-weight:700;text-align:left}.gears_name{display:inline-block;max-width:230px;overflow:hidden;text-overflow:ellipsis;vertical-align:top;white-space:nowrap}.app-view .gears_name{max-width:198px}.gears_color-red .gears_name{color:#721c24}.app-high-saturation .gears_color-red .gears_name{color:#9c0010}.gears_color-green .gears_name{color:#155724}.app-high-saturation .gears_color-green .gears_name{color:#007a2b}.gears_color-blue .gears_name{color:#003085}.app-high-saturation .gears_color-blue .gears_name{color:#003899}.gears_color-purple .gears_name{color:#36037c}.app-high-saturation .gears_color-purple .gears_name{color:#3e0094}.gears_hq{vertical-align:-1px;width:12px}.gears_patch{line-height:1;margin-left:4px}.gears_level,.gears_patch{color:rgba(0,0,0,.376);font-size:12px}.gears_level{float:right;line-height:34px;margin-left:12px;margin-top:2px}.gears_more{fill:rgba(0,0,0,.77);float:right;margin:6px -10px 0 4px}.gears_toogle-all-foods{float:right;font-size:12px;height:29px;margin-right:-11px;margin-top:4px}.gears_materias{border-left:1px solid rgba(0,0,0,.122);border-right:1px solid rgba(0,0,0,.122);padding-left:13px;padding-right:13px;position:relative;width:277px;z-index:0}.gears_materias-synced{left:0;line-height:1;pointer-events:none;position:absolute;right:0;text-align:center;top:10px;z-index:2}.gears_materias-synced>svg{color:rgba(0,0,0,.6);width:16px}.gears_food-utilization{margin-left:4px}.gears_food-utilization.-full{font-weight:700}.gears_stat{text-align:center;width:60px}.gears_stat.-skeleton{white-space:nowrap;width:86px}.gears_item.-food .gears_stat{line-height:1}.gears_stat-value.-full{font-weight:700}.gears_stat-value.-skeleton{display:inline-block;font-weight:700;text-align:right;width:50%}.gears_stat-value.-skeleton:last-child{margin-right:50%}.gears_stat-caps{color:rgba(0,0,0,.6);display:inline-block;font-size:12px;line-height:1;padding-left:1px;text-align:left;width:50%}.gears_stat-requirement{color:rgba(0,0,0,.54);display:block;font-size:12px;line-height:8px;margin-bottom:-2px;transform:scale(.9)}.gears_custom-stat-input{width:36px}.gears_empty{color:rgba(0,0,0,.376)}.gears_materia{border-radius:2px;display:inline-block;line-height:26px;margin:auto -2px;position:relative;text-align:center;width:54px}.gears_materia:not(:empty):after{border-bottom:2px solid;bottom:4px;content:" ";left:5px;opacity:.1;position:absolute;right:5px}.app-edit .gears_materia:hover{background-color:rgba(0,0,0,.059);z-index:1}.app-edit .gears_materia.-active,.app-edit .gears_materia:active{background-color:rgba(0,0,0,.102);z-index:1}.app-edit .gears_materia:empty:before{border:2px solid transparent;border-radius:50%;content:" ";display:inline-block;height:16px;vertical-align:-3px;width:16px}.gears_item.-synced .gears_materia{opacity:.2}.gears_materia.-normal{color:#155724}.app-high-saturation .gears_materia.-normal{color:#007a2b}.gears_materia.-normal:empty:before{border-color:rgba(0,149,34,.235)}.gears_materia.-advanced{color:#721c24}.app-high-saturation .gears_materia.-advanced{color:#9c0010}.gears_materia.-advanced:empty:before{border-color:rgba(210,0,22,.224)}.condition{margin-top:10px}.condition_divider{background-color:rgba(0,0,0,.122);display:inline-block;height:24px;margin:9px 0;vertical-align:top;width:1px}.condition_right{float:right}.condition_job{border-radius:4px;display:inline-block;line-height:34px;margin:4px;padding:0 12px;vertical-align:top}.condition_job-icon{margin-left:-2px;padding-bottom:2px;width:20px}.condition_tip{color:rgba(0,0,0,.6);display:inline-block;font-size:12px;line-height:34px;margin-top:5px;text-decoration:none;vertical-align:top}.condition_tip:hover{text-decoration:underline}.condition_tip.-highlight{color:#b00020;font-weight:700}.condition_level{display:inline-block;line-height:42px;padding-left:16px;vertical-align:top}.condition_level-value{margin-right:2px}.condition_level-input{width:36px}.condition_level-separator{margin:0 4px}.condition_button{height:34px;margin:4px 8px;min-width:48px;vertical-align:top}.condition_button+.condition_button{margin-left:-4px}.condition_text{line-height:42px;padding:0 16px;vertical-align:top}.condition_filter{margin-left:6px;margin-right:6px}.condition_setting{margin-right:6px}.condition_level-sync-icon{vertical-align:-2px;width:14px}.summary{align-items:flex-end;display:flex;overflow:visible}@media(min-width:1080px){.app-edit .summary{border-bottom-left-radius:0;border-bottom-right-radius:0;bottom:0;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);margin-left:-12px;padding:0 12px;position:fixed}}.app-view .summary>span:not(.summary_divider){margin-bottom:2px;margin-top:-2px}.summary_divider{align-self:stretch;border-left:1px solid rgba(0,0,0,.122);margin-right:-1px}.summary_left{height:49px;position:relative;width:320px}.summary_middle{position:relative;width:277px}.summary_clan{bottom:5px;height:35px;left:4px;padding:0 12px;position:absolute}.summary_equipped-level{bottom:0;color:rgba(0,0,0,.376);font-size:12px;left:260px;line-height:44px;position:absolute}.summary_tiers-toggle{bottom:5px;height:35px;left:10px;position:absolute}.summary_stat{line-height:18px;padding-bottom:4px;padding-top:9px;text-align:center;width:60px}.summary_stat.-skeleton{width:86px}.summary_stat-tier{font-size:12px;line-height:14px;margin-top:2px}.summary_stat-next,.summary_stat-prev{display:inline-block;vertical-align:top;white-space:nowrap;width:21px}.summary_stat-prev{text-align:left}.summary_stat-next{text-align:right}.summary_stat-name{color:rgba(0,0,0,.65);font-size:13px}.summary_stat-effect{font-size:12px;white-space:nowrap}.summary_stat-effect.-tip{cursor:default;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.summary_stat-effect+.summary_stat-name{display:none}.summary_stat-small{display:inline-block;margin:0 -2px;transform:scale(.83) translateY(1px)}.app-view .summary_stat:last-child .summary_stat-effect-hp{transform:translateX(-4px)}.summary_damage{float:right;width:120px}.summary_damage-tip{color:rgba(0,0,0,.55);display:inline-block;margin:-1px -6px -1px 1px;vertical-align:1px;width:16px}.about{color:rgba(0,0,0,.502);font-size:13px;line-height:19px;margin-bottom:10px;margin-top:10px;text-align:center}.about_separator{margin:0 4px}.about_version{margin-left:4px}.about_link{color:rgba(0,0,0,.502);text-decoration:none}.about_link:hover{text-decoration:underline}.filter{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);line-height:20px;min-width:500px;padding:16px}.filter_section{margin-bottom:3px}.filter_section:not(:first-child){margin-top:20px}.filter_title{font-weight:700}.filter_sub{color:rgba(0,0,0,.6);font-size:12px;line-height:1;margin-left:6px;vertical-align:-1px}.filter_controls{margin-left:-9px}.filter_controls>.mdc-form-field{display:flex;margin-bottom:-6px;margin-right:20px}.level-sync{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.level-sync .rmwc-collapsible-list__children{transition:none}.level-sync_group{font-weight:700}.level-sync_group-icon{width:24px}.level-sync_levels{margin:0 4px;width:288px}.level-sync_job-level-sync,.level-sync_level{border-radius:4px;cursor:pointer;display:inline-block;line-height:36px;text-align:center;vertical-align:top;width:48px}.-popular.level-sync_job-level-sync,.level-sync_level.-popular{font-weight:700}.-selected.level-sync_job-level-sync,.level-sync_level.-selected{background-color:rgba(98,0,238,.08)}.app-high-saturation .-selected.level-sync_job-level-sync,.app-high-saturation .level-sync_level.-selected{background-color:rgba(98,0,238,.16)}.level-sync_job-level-sync{float:right;padding:0 12px;width:auto}.level-sync_cancel{margin:5px 8px 0}.materia-overall{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);overflow:visible}.materia-overall_tabbar{border-bottom:1px solid rgba(0,0,0,.122)}.materia-overall_tabbar .mdc-tab-bar{width:200px}.materia-overall_tabbar .mdc-tab{height:40px;padding:0 12px}.materia-consumption{text-align:center}.materia-consumption th{color:inherit;width:72px}.materia-consumption_empty{color:rgba(0,0,0,.376)}.materia-consumption_tip{line-height:20px;text-align:left}.table tbody .materia-consumption_tip:hover{background:none}.materia-consumption_tip td{padding:8px 16px}.materia-consumption_tool-duplicates{font-weight:700;line-height:24px}.materia-consumption_tool-duplicates.-disabled{text-decoration:line-through}.materia-consumption_tool-duplicates-switch{margin-left:6px;vertical-align:-2px}.share{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);line-height:20px;min-width:300px;padding:16px}.share_url{color:#6200ee;display:block;font-size:12px;text-decoration:none}.share_url:hover{text-decoration:underline}.share_tip{font-size:12px;font-style:italic;margin-bottom:-2px;margin-top:4px}.share_copy{bottom:8px;height:34px;position:absolute;right:8px}.import{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);line-height:20px;padding:16px}.import_title{font-weight:700}.import_bookmarklet{border:1px dashed rgba(98,0,238,.6);border-radius:4px;color:#6200ee;display:block;margin:8px 0;padding:8px;text-align:center;text-decoration:none}.import_bookmarklet:hover{text-decoration:underline}.import_warn{color:#721c24;font-weight:700;margin-top:4px}.setting{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);line-height:20px;min-width:500px;padding:8px 16px 10px}.setting_section{margin-top:8px}.setting_title{font-weight:700}.setting_sub{color:rgba(0,0,0,.6);font-size:12px;line-height:1;margin-left:6px;vertical-align:-1px}.setting_controls{margin-left:-9px}.setting_controls>.mdc-form-field{margin-right:20px}.gear-menu{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);padding:9px 0}.gear-menu_item{color:inherit;display:block;line-height:32px;padding-left:16px;padding-right:32px;text-decoration:none}.gear-menu_divider{background-color:rgba(0,0,0,.122);height:1px;margin:8px 0}.gear-menu_divider+.gear-menu_divider,.gear-menu_divider:first-child,.gear-menu_divider:last-child{display:none}.gear-menu_external{fill:currentColor;height:1em;opacity:.75;vertical-align:-2px}.materias{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.materias tbody tr:hover{background-color:initial}.materias td{padding:0 12px}.materias td:first-child{padding-left:16px}.materias td:last-child{padding-right:16px}.materias_stat-name{border-right:1px solid rgba(0,0,0,.122);text-align:center}.materias_row.-invalid{color:rgba(0,0,0,.2)}.materias_grade,.materias_remove{cursor:pointer;text-align:center}.materias_grade:hover,.materias_remove:hover{background-color:rgba(0,0,0,.039)}.materias_grade:active,.materias_remove:active{background-color:rgba(0,0,0,.102)}.materias_grade.-selected,.materias_remove.-selected{background-color:rgba(98,0,238,.08)}.app-high-saturation .materias_grade.-selected,.app-high-saturation .materias_remove.-selected{background-color:rgba(98,0,238,.16)}td.materias_meldable{min-width:40px;padding-right:0;text-align:right}td.materias_meldable.-overflowed{color:#dc3545;font-weight:700}.materias_meldable-title{border-right:1px solid rgba(0,0,0,.122);text-align:center}.clan{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);padding:8px}.clan_race{font-weight:700;padding:0 8px;text-align:right}.clan_item{border-radius:4px;line-height:34px;padding:0 8px;text-align:center;vertical-align:top}td:not(:first-child)>.clan_item{margin-left:-2px}',""]);const n=r},5373:(e,t,a)=>{"use strict";a.d(t,{a1:()=>l,zD:()=>d});const i=Math.random().toString();function s(){var e;return(null===(e=window.history.state)||void 0===e?void 0:e.archiveKey)||void 0}function o(e){window.history.replaceState({archiveKey:e},"")}let r;function n(){if(void 0!==r){let e=s();void 0!==e&&localStorage.getItem(`${e}.owner`)===i||(e=function(){let e;do{e=`ffxiv-gearing.ew.archive.${Math.random().toString(36).slice(2,10)}`}while(null!==localStorage.getItem(e));return e}(),o(e),localStorage.setItem(`${e}.owner`,i)),localStorage.setItem(e,JSON.stringify(r)),r=void 0}}function l(e){r=e}function d(e){if(void 0===e?e=s():o(e),void 0!==e){localStorage.setItem(`${e}.owner`,i);const t=localStorage.getItem(e);return t?JSON.parse(t):void 0}}setInterval(n,5e3),window.addEventListener("beforeunload",n)},3517:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patches:()=>i.Z,statNames:()=>s,getCaps:()=>c,jobLevelModifiers:()=>m,jobLevels:()=>p,baseStats:()=>v,customStatMax:()=>u,jobSchemas:()=>N,jobCategories:()=>w,statHighlight:()=>T,materias:()=>L,materiaGrades:()=>D,materiaGradesAdvanced:()=>C,materiaGradeRequiredLevels:()=>M,materiaSuccessRates:()=>k,materiaNames:()=>I,materiaGradeNames:()=>P,materiaStatNames:()=>G,getMateriaName:()=>E,races:()=>R,clans:()=>V,clanStats:()=>O,syncLevels:()=>H,syncLevelIsPopular:()=>F,syncLevelOfJobLevels:()=>q,bluMdmgAdditions:()=>z});var i=a(2764);const s={STR:"力量",DEX:"灵巧",INT:"智力",MND:"精神",VIT:"耐力",CRT:"暴击",DHT:"直击",DET:"信念",SKS:"技速",SPS:"咏唱",TEN:"坚韧",PIE:"信仰",CMS:"作业精度",CRL:"加工精度",CP:"制作力",GTH:"获得力",PCP:"鉴别力",GP:"采集力",PDMG:"物理基本性能",MDMG:"魔法基本性能",DLY:"攻击间隔"},o=a(5841).Z,r=a(5153).Z,n=a(7910).Z,l={};o.level.forEach(((e,t)=>{l[e]=t}));const d={};function c(e,t){const a=null!=t?t:e.level,{slot:i,role:c}=e,m=`${a},${i},${c}`;if(!(m in d)){const e={};for(const t of Object.keys(s))e[t]="DLY"===t?1/0:Math.round(o[t][l[a]]*r[t][i]*n[t][c]/1e5);d[m]=e}return d[m]}const m={50:{main:202,sub:341,div:341,det:202,detTrunc:5,ap:75,apTank:53,hp:1700,vit:10.2,vitTank:14.5},60:{main:218,sub:354,div:600,det:600,detTrunc:2,ap:100,apTank:78,hp:2600,vit:15.4,vitTank:20.5},70:{main:292,sub:364,div:900,det:900,detTrunc:1,ap:125,apTank:105,hp:3600,vit:15.9,vitTank:21.5},80:{main:340,sub:380,div:1300,det:1300,detTrunc:1,ap:165,apTank:115,hp:4400,vit:22.1,vitTank:31.5},90:{main:390,sub:400,div:1900,det:1900,detTrunc:1,ap:195,apTank:155,hp:4400,vit:22.1,vitTank:31.5}},p=Object.keys(m).map((e=>Number(e))),g=p[p.length-1],v={STR:"main",DEX:"main",INT:"main",MND:"main",VIT:"main",CRT:"sub",DHT:"sub",DET:"main",SKS:"sub",SPS:"sub",TEN:"sub",PIE:"main",CMS:0,CRL:0,CP:180,GTH:0,PCP:0,GP:400},u=1e3,h={tank:["STR","CRT","DET","DHT","SKS","TEN","VIT"],healer:["MND","CRT","DET","DHT","SPS","PIE","VIT"],dpsStr:["STR","CRT","DET","DHT","SKS","VIT"],dpsDex:["DEX","CRT","DET","DHT","SKS","VIT"],dpsInt:["INT","CRT","DET","DHT","SPS","VIT"],crafting:["CMS","CRL","CP"],gathering:["GTH","PCP","GP"]},b=[{slot:3,name:"头部防具",uiGroup:"left"},{slot:4,name:"身体防具",uiGroup:"left"},{slot:5,name:"手部防具",uiGroup:"left"},{slot:7,name:"腿部防具",uiGroup:"left"},{slot:8,name:"脚部防具",uiGroup:"left"},{slot:9,name:"耳饰",uiGroup:"right"},{slot:10,name:"项链",uiGroup:"right"},{slot:11,name:"手镯",uiGroup:"right"},{slot:12,name:"戒指",uiGroup:"right"},{slot:-12,name:"戒指",uiGroup:"right"},{slot:-1,name:"食物",levelWeight:0,uiGroup:"misc"}],x=[{slot:13,name:"武器",levelWeight:2,uiGroup:"weapon"},...b],f=[{slot:1,name:"主工具",shortName:"主手",uiGroup:"weapon"},{slot:2,name:"副工具",shortName:"副手",uiGroup:"weapon"},...b],j=[...f.slice(0,-1),{slot:17,name:"灵魂水晶",shortName:"水晶",levelWeight:0,uiGroup:"misc"},f[f.length-1]],S=[580,605],_=[560,590],y=_,N={PLD:{name:"骑士",stats:h.tank,slots:[{slot:1,name:"武器",uiGroup:"weapon"},{slot:2,name:"盾牌",uiGroup:"weapon"},...b],defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{STR:100,VIT:110,hp:120},mainStat:"VIT",traitDamageMultiplier:1},WAR:{name:"战士",stats:h.tank,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{STR:105,VIT:110,hp:125},mainStat:"VIT",traitDamageMultiplier:1},DRK:{name:"暗黑骑士",stats:h.tank,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{STR:105,VIT:110,hp:120},mainStat:"VIT",traitDamageMultiplier:1},GNB:{name:"绝枪战士",stats:h.tank,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{STR:100,VIT:110,hp:120},mainStat:"VIT",traitDamageMultiplier:1},WHM:{name:"白魔法师",stats:h.healer,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{MND:115,VIT:100,hp:105},mainStat:"MND",traitDamageMultiplier:1.3},SCH:{name:"学者",stats:h.healer,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{MND:115,VIT:100,hp:105},mainStat:"MND",traitDamageMultiplier:1.3},AST:{name:"占星术士",stats:h.healer,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{MND:115,VIT:100,hp:105},mainStat:"MND",traitDamageMultiplier:1.3},SGE:{name:"贤者",stats:h.healer,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{MND:115,VIT:100,hp:105},mainStat:"MND",traitDamageMultiplier:1.3},MNK:{name:"武僧",stats:h.dpsStr,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{STR:110,VIT:100,hp:110,gcd:80,gcdReason:"“疾风迅雷”状态中"},mainStat:"STR",traitDamageMultiplier:1},DRG:{name:"龙骑士",stats:h.dpsStr,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{STR:115,VIT:105,hp:115},mainStat:"STR",traitDamageMultiplier:1},NIN:{name:"忍者",stats:h.dpsDex,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{DEX:110,VIT:100,hp:108,gcd:85,gcdReason:"“风遁”状态中"},mainStat:"DEX",traitDamageMultiplier:1},SAM:{name:"武士",stats:h.dpsStr,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{STR:112,VIT:100,hp:109,gcd:87,gcdReason:"“风花”状态中"},mainStat:"STR",traitDamageMultiplier:1},RPR:{name:"钐镰客",stats:h.dpsStr,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{STR:115,VIT:105,hp:115},mainStat:"STR",traitDamageMultiplier:1},BRD:{name:"吟游诗人",stats:h.dpsDex,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{DEX:115,VIT:100,hp:105},mainStat:"DEX",traitDamageMultiplier:1.2},MCH:{name:"机工士",stats:h.dpsDex,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{DEX:115,VIT:100,hp:105},mainStat:"DEX",traitDamageMultiplier:1.2},DNC:{name:"舞者",stats:h.dpsDex,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{DEX:115,VIT:100,hp:105},mainStat:"DEX",traitDamageMultiplier:1.2},BLM:{name:"黑魔法师",stats:h.dpsInt,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{INT:115,VIT:100,hp:105},mainStat:"INT",traitDamageMultiplier:1.3},SMN:{name:"召唤师",stats:h.dpsInt,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{INT:115,VIT:100,hp:105},mainStat:"INT",traitDamageMultiplier:1.3},RDM:{name:"赤魔法师",stats:h.dpsInt,slots:x,defaultItemLevel:S,jobLevel:g,levelSyncable:!0,statModifiers:{INT:115,VIT:100,hp:105},mainStat:"INT",traitDamageMultiplier:1.3},BLU:{name:"青魔法师",stats:h.dpsInt,slots:[{slot:13,name:"武器",levelWeight:0,uiGroup:"weapon"},...b],defaultItemLevel:[390,400],jobLevel:70,levelSyncable:!0,statModifiers:{INT:115,VIT:100,hp:105},mainStat:"INT",traitDamageMultiplier:1.5,partyBonus:1.01},CRP:{name:"刻木匠",stats:h.crafting,slots:j,defaultItemLevel:_,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:8},BSM:{name:"锻铁匠",stats:h.crafting,slots:j,defaultItemLevel:_,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:8},ARM:{name:"铸甲匠",stats:h.crafting,slots:j,defaultItemLevel:_,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:8},GSM:{name:"雕金匠",stats:h.crafting,slots:j,defaultItemLevel:_,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:8},LTW:{name:"制革匠",stats:h.crafting,slots:j,defaultItemLevel:_,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:8},WVR:{name:"裁衣匠",stats:h.crafting,slots:j,defaultItemLevel:_,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:8},ALC:{name:"炼金术士",stats:h.crafting,slots:j,defaultItemLevel:_,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:8},CUL:{name:"烹调师",stats:h.crafting,slots:j,defaultItemLevel:_,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:8},MIN:{name:"采矿工",stats:h.gathering,slots:f,defaultItemLevel:y,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:2},BTN:{name:"园艺工",stats:h.gathering,slots:f,defaultItemLevel:y,jobLevel:g,skeletonGears:!0,toolMateriaDuplicates:2},FSH:{name:"捕鱼人",stats:h.gathering,slots:f,defaultItemLevel:y,jobLevel:g,skeletonGears:!0}},w=a(9282).Z,T={PIE:!0,TEN:!0,DHT:!0,CRT:!0,DET:!0,SKS:!0,SPS:!0},L={PIE:[1,2,3,4,6,16,8,24,12,36],DHT:[1,2,3,4,6,16,8,24,12,36],CRT:[1,2,3,4,6,16,8,24,12,36],DET:[1,2,3,4,6,16,8,24,12,36],SPS:[1,2,3,4,6,16,8,24,12,36],SKS:[1,2,3,4,6,16,8,24,12,36],TEN:[1,2,3,4,6,16,8,24,12,36],CMS:[3,4,5,6,11,16,14,21,18,27],CRL:[1,2,3,4,7,10,9,13,12,18],CP:[1,2,3,4,6,8,7,9,8,10],GTH:[3,4,5,6,10,15,12,20,14,25],PCP:[3,4,5,6,10,15,12,20,14,25],GP:[1,2,3,4,6,8,7,9,8,10]},D=[10,9,8,7,6,5,4,3,2,1],C=[9,7,5,4,3,2,1],M=[15,30,45,70,160,290,420,420,560,560],k=[[90,82,70,58,17,17,17,17,17,17],[48,44,38,32,10,0,10,0,10,0],[28,26,22,20,7,0,7,0,7,0],[16,16,14,12,5,0,5,0,5,0]],I={CRT:"武略",DHT:"神眼",DET:"雄略",SKS:"战技",SPS:"咏唱",TEN:"刚柔",PIE:"信力",CMS:"名匠",CRL:"巨匠",CP:"魔匠",GTH:"达识",PCP:"博识",GP:"器识"},P=["壹","贰","叁","肆","伍","陆","柒","捌","玖","拾"],G={...s,CP:"CP",GP:"GP"};function E(e,t,a){return a?G[e].slice(0,2)+L[e][t-1]:I[e]+P[t-1]}const R=["人族","精灵族","拉拉菲尔族","猫魅族","鲁加族","敖龙族","硌狮族","维埃拉族"],V=["中原之民","高地之民","森林之民","黑影之民","平原之民","沙漠之民","逐日之民","护月之民","北洋之民","红焰之民","晨曦之民","暮晖之民","掠日之民","迷踪之民","密林之民","山林之民"],O={STR:[22,23,20,20,19,19,22,19,22,20,19,23,23,23,20,19].map((e=>e-20)),DEX:[19,20,23,20,23,21,23,22,19,18,22,20,17,17,23,20].map((e=>e-20)),VIT:[20,22,19,19,19,18,20,18,23,23,19,22,23,23,18,19].map((e=>e-20)),INT:[23,18,22,23,22,22,19,21,18,20,20,20,17,17,21,23].map((e=>e-20)),MND:[19,20,19,21,20,23,19,23,21,22,23,18,23,23,21,22].map((e=>e-20))},H=a(3676).Z,F={300:!0,345:!0,375:!0,475:!0,435:!0},q={50:130,60:270,70:400,80:530,90:660},z=a(1636).Z},3835:(e,t,a)=>{"use strict";var i=a(5893),s=(a(1087),a(3935)),o=a(8949),r=(a(6137),a(6725),a(1537)),n=a(2766),l=a(4184),d=a(7294);const c=d.createContext(void 0);function m(){return d.useContext(c)}var p=a(5931),g=a(3517),v=a(8872);const u=a(5366),h=d.memo((function({className:e,name:t}){const a=u("./"+t+".svg").default;return(0,i.jsx)("svg",{className:e,viewBox:a.viewBox,children:(0,i.jsx)("use",{xlinkHref:"#"+a.id},void 0)},void 0)}));var b=a(7217);const x=e=>{const[t,a]=d.useState(!1),s=d.Children.only(e.children);if(!d.isValidElement(s))return null;const o=()=>a(!0),r=d.cloneElement(s,{...s.props,onFocus:o,onPointerEnter:o,onTouchStart:o,onMouseEnter:o});return t?(0,i.jsx)(b.HW,{...e},void 0):r},f=d.forwardRef((({icon:e,className:t,...a},s)=>(0,i.jsx)(x,{unbounded:!0,children:(0,i.jsx)("button",{...a,ref:s,className:l("mdc-icon-button","mdc-icon-button--dense",t),type:"button",children:(0,i.jsx)(h,{className:"mdc-icon-button__icon",name:e},void 0)},void 0)},void 0)));var j=a(5778);const S=n.Pi((e=>{const[t,a]=d.useState(!1),[s,o]=d.useState(null),r=e=>{a(!t),e&&e.stopPropagation()};return(0,i.jsxs)(i.Fragment,{children:[e.label({ref:o,expanded:t,toggle:r}),t&&(0,i.jsx)(_,{...e,setExpanded:a,labelElement:s,toggle:r},void 0)]},void 0)})),_=n.Pi((e=>{const{popper:t,placement:a,modifiers:o,strategy:r,setExpanded:n,labelElement:l,toggle:c}=e,[m,p]=d.useState(null),g=j.D(l,m,{placement:a,modifiers:o,strategy:r}),v=document.getElementById("popper");return y=e=>{const t=e.target;t&&l&&m&&(l.contains(t)||m.contains(t)||(n(!1),y=void 0,e._isClosingDropdown=!0))},N=e=>{const t=e.target;!t||"BODY"!==t.tagName&&t!==l||"Escape"!==e.key||(n(!1),N=void 0)},d.useEffect((()=>()=>{y=void 0,N=void 0}),[]),v&&s.createPortal((0,i.jsx)("div",{ref:p,style:g.styles.popper,...g.attributes.popper,onClick:e=>e.stopPropagation(),children:d.createElement(t,{toggle:c,labelElement:l})},void 0),v)}));let y,N;window.addEventListener("click",(e=>null==y?void 0:y(e)),!0),window.addEventListener("keyup",(e=>null==N?void 0:N(e)),!0);var w=a(6964),T=a.n(w);const L=n.Pi((function({gear:e,toggle:t}){const a=m();return(0,i.jsxs)("div",{className:"gear-menu card",children:[(0,i.jsx)(x,{children:(0,i.jsx)("div",{children:(0,i.jsxs)(T(),{className:"gear-menu_item",component:"div","data-clipboard-text":e.name,onClick:t,children:["复制道具名",!e.isFood&&e.source&&("source"===a.setting.gearDisplayName||!e.isInstalled)&&"："+e.name]},void 0)},void 0)},void 0),(0,i.jsx)("div",{className:"gear-menu_divider"},void 0),!e.isFood&&e.source&&"name"===a.setting.gearDisplayName&&e.isInstalled&&(0,i.jsxs)("div",{className:"gear-menu_item",children:["获取途径：",e.source]},void 0),void 0!==e.stats.PDMG&&(0,i.jsxs)("div",{className:"gear-menu_item",children:["物理基本性能：",e.stats.PDMG]},void 0),void 0!==e.stats.MDMG&&(0,i.jsxs)("div",{className:"gear-menu_item",children:["魔法基本性能：",e.stats.MDMG]},void 0),void 0!==e.stats.DLY&&(0,i.jsxs)("div",{className:"gear-menu_item",children:["攻击间隔：",(e.stats.DLY/1e3).toFixed(2)]},void 0),(0,i.jsx)("div",{className:"gear-menu_divider"},void 0),e.isInstalled&&(0,i.jsx)(x,{children:(0,i.jsxs)("a",{className:"gear-menu_item",href:"https://ff14.huijiwiki.com/wiki/%E7%89%A9%E5%93%81:"+encodeURI(e.name),target:"_blank",tabIndex:0,children:["在 最终幻想XIV中文维基 中查看 ",(0,i.jsx)(h,{className:"gear-menu_external",name:"open-in-new"},void 0)]},void 0)},void 0),(0,i.jsx)(x,{children:(0,i.jsxs)("a",{className:"gear-menu_item",href:"http://www.garlandtools.org/db/#item/"+Math.abs(e.id),target:"_blank",tabIndex:0,children:["在 Garland Data 中查看 ",(0,i.jsx)(h,{className:"gear-menu_external",name:"open-in-new"},void 0)]},void 0)},void 0),(0,i.jsx)(x,{children:(0,i.jsxs)("a",{className:"gear-menu_item",href:`./lodestone?jp:${Math.abs(e.id)}`,target:"_blank",tabIndex:0,children:["在 The Lodestone 中查看 ",(0,i.jsx)(h,{className:"gear-menu_external",name:"open-in-new"},void 0)]},void 0)},void 0)]},void 0)})),D=n.Pi((function({materia:e,labelElement:t}){const a=m();return(0,i.jsx)("table",{className:"materias table card",children:(0,i.jsxs)("tbody",{children:[a.schema.stats.map((a=>a in g.materias&&(0,i.jsxs)("tr",{className:l("materias_row",e.gear.currentMeldableStats[a]<=0&&"-invalid"),children:[(0,i.jsx)("td",{className:l("materias_meldable",e.gear.currentMeldableStats[a]<0&&"-overflowed"),children:e.gear.currentMeldableStats[a]},void 0),(0,i.jsx)("td",{className:"materias_stat-name",children:g.materiaStatNames[a].slice(0,2)},void 0),e.meldableGrades.map((s=>(0,i.jsx)("td",{className:l("materias_grade",e.stat===a&&e.grade===s&&"-selected"),onClick:()=>{if(void 0===e.stat){const e=null==t?void 0:t.nextElementSibling;null===e&&(null==t||t.click()),0===(null==e?void 0:e.childNodes.length)&&e.click()}e.meld(a,s)},children:"+"+g.materias[a][s-1]},s)))]},a))),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"materias_meldable-title",colSpan:2,children:"可镶嵌值"},void 0),(0,i.jsx)("td",{className:l("materias_remove",void 0===e.stat&&"-selected"),colSpan:e.meldableGrades.length,onClick:()=>e.meld(void 0),children:"不镶嵌魔晶石"},void 0)]},void 0)]},void 0)},void 0)})),C=n.Pi((function({materia:e}){const t=m();return(0,i.jsx)(S,{label:({ref:a,expanded:s,toggle:o})=>(0,i.jsx)("span",{ref:a,className:l("gears_materia",e.isAdvanced?"-advanced":"-normal",s&&"-active"),onClick:t.isViewing?void 0:o,onContextMenu:t.isViewing?void 0:t=>{var a;(null===(a=document.getSelection())||void 0===a?void 0:a.toString())||(t.preventDefault(),e.meld(void 0))},children:e.name},void 0),popper:({labelElement:t})=>(0,i.jsx)(D,{materia:e,labelElement:t},void 0),placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[-104-50*e.index,0]}}]},void 0)})),M=n.Pi((function({gear:e,slot:t,isGroupEnd:a}){var s,o;const r=m();return void 0===e?0===(null==t?void 0:t.levelWeight)?null:(0,i.jsxs)("tr",{className:l("gears_item",a&&"-group-end"),children:[(0,i.jsxs)("td",{className:"gears_left",children:[void 0!==t&&(0,i.jsx)("span",{className:"gears_inline-slot",children:(null!==(s=t.shortName)&&void 0!==s?s:t.name).slice(0,2)},void 0),(0,i.jsx)("span",{className:"gears_empty",children:r.isViewing?"无装备":"无匹配"},void 0)]},void 0),(0,i.jsx)("td",{className:"gears_materias"},void 0),(0,i.jsx)("td",{colSpan:r.schema.stats.length},void 0)]},void 0):(0,i.jsxs)("tr",{"data-id":e.id,className:l("gears_item",e.isFood&&"-food",!r.isViewing&&e.isEquipped&&"-selected",a&&"-group-end",!e.isFood&&void 0!==e.syncedLevel&&"-synced"),onClick:r.isViewing?void 0:t=>{t.nativeEvent._isClosingDropdown||t.timeStamp-I<200||r.equip(e)},children:[(0,i.jsxs)("td",{className:l("gears_left",`gears_color-${e.color}`),children:[void 0!==t&&(0,i.jsx)("span",{className:"gears_inline-slot",children:(null!==(o=t.shortName)&&void 0!==o?o:t.name).slice(0,2)},void 0),"source"===r.setting.gearDisplayName&&!e.isFood&&e.source?(0,i.jsxs)("span",{className:"gears_name",children:[e.source,!e.isInstalled&&(0,i.jsx)("span",{className:"gears_patch",children:e.patch},void 0)]},void 0):e.isInstalled?(0,i.jsxs)("span",{className:"gears_name",children:[e.name,e.hq&&(0,i.jsx)(h,{className:"gears_hq",name:"hq"},void 0)]},void 0):(0,i.jsxs)("span",{className:"gears_name",children:[(0,i.jsx)("span",{className:"gears_origin",children:e.isFood?e.name:"*"+e.source},void 0),(0,i.jsx)("span",{className:"gears_patch",children:e.patch},void 0)]},void 0),(0,i.jsx)(S,{label:({ref:e,toggle:t})=>(0,i.jsx)(f,{ref:e,className:"gears_more",icon:"more",onClick:t},void 0),popper:({toggle:t})=>(0,i.jsx)(L,{gear:e,toggle:t},void 0),placement:"bottom-end"},void 0),(0,i.jsxs)("span",{className:"gears_level",children:["il",e.level]},void 0)]},void 0),(0,i.jsxs)("td",{className:"gears_materias",children:[!e.isFood&&e.materias.map(((e,t)=>(0,i.jsx)(C,{materia:e},t))),e.isFood&&(r.isViewing?(0,i.jsxs)("span",{className:"gears_food-utilization",children:["利用率",e.utilization,"%"]},void 0):(0,i.jsxs)("span",{className:l("gears_food-utilization",100===e.utilization&&"-full"),style:{opacity:e.utilizationOpacity},children:[e.utilization,"%"]},void 0)),!e.isFood&&void 0!==e.syncedLevel&&(0,i.jsx)("div",{className:"gears_materias-synced",children:(0,i.jsx)(h,{name:"sync"},void 0)},void 0)]},void 0),r.schema.stats.map((t=>(0,i.jsxs)("td",{className:l("gears_stat",r.schema.skeletonGears&&"-skeleton"),children:[r.isViewing||e.isFood||!e.customizable||t in e.bareStats||!("DHT"!==t||e.equipLevel<=60||r.schema.stats.length<7)?(0,i.jsx)("span",{className:l("gears_stat-value",e.statHighlights[t]&&"-full",r.schema.skeletonGears&&!e.isFood&&17!==e.slot&&"-skeleton"),children:(e.isFood||e.customizable||void 0!==e.syncedLevel||r.setting.displayMeldedStats?e.stats:e.bareStats)[t]},void 0):(0,i.jsx)(k,{displayValue:e.stats[t],editValue:e.customStats.get(t),onChange:a=>e.setCustomStat(t,a)},void 0),r.schema.skeletonGears&&!e.isFood&&e.materias.length>0&&(0,i.jsxs)("span",{className:"gears_stat-caps",children:["/",e.caps[t]]},void 0),!r.isViewing&&"VIT"!==t&&e.isFood&&e.requiredStats[t]&&(0,i.jsxs)("span",{className:l("gears_stat-requirement",r.equippedStatsWithoutFood[t]>=e.requiredStats[t]&&"-enough"),children:[e.requiredStats[t],"+"]},void 0)]},t)))]},void 0)})),k=n.Pi((function({displayValue:e,editValue:t,onChange:a}){var s,o;const[r,n]=d.useState(null!==(s=null==e?void 0:e.toString())&&void 0!==s?s:""),[l,c]=d.useState(e);return e!==l&&(n(null!==(o=null==e?void 0:e.toString())&&void 0!==o?o:""),c(e)),(0,i.jsx)(v.n,{className:"gears_custom-stat-input mdc-text-field--compact",value:r,onChange:e=>{n(e.target.value)},onFocus:e=>{var a;e.target.value=null!==(a=null==t?void 0:t.toString())&&void 0!==a?a:"",n(e.target.value),e.target.select()},onBlur:()=>{c(-1),a(parseInt(r,10))},onClick:e=>{e.stopPropagation()},onKeyPress:e=>{"Enter"===e.key&&e.target.blur()}},void 0)}));let I=0;window.addEventListener("focusout",(e=>{var t;"INPUT"===(null===(t=e.target)||void 0===t?void 0:t.tagName)&&(I=e.timeStamp)}));const P=n.Pi((function({slot:e}){const t=m(),a=t.groupedGears[e.slot];return"comparable"!==t.filterFocus||(null==a?void 0:a.length)>1?(0,i.jsxs)("table",{className:"gears_slot table card",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsxs)("th",{className:"gears_left",children:[e.name,-1===e.slot&&(0,i.jsx)(p.z,{className:"gears_toogle-all-foods",children:t.showAllFoods?"显示最优":"显示全部",onClick:t.toggleShowAllFoods},void 0)]},void 0),(0,i.jsx)("th",{className:"gears_materias",children:-1===e.slot?"利用率":"魔晶石"},void 0),t.schema.stats.map((e=>(0,i.jsx)("th",{className:l("gears_stat",t.schema.skeletonGears&&"-skeleton"),children:g.statNames[e]},e)))]},void 0)},void 0),(0,i.jsx)("tbody",{children:void 0!==a?a.map((e=>(0,i.jsx)(M,{gear:e},e.id))):(0,i.jsx)(M,{gear:void 0},void 0)},void 0)]},void 0):null})),G=n.Pi((function(){const e=m();return(0,i.jsxs)("table",{className:"gears_slot table card",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"gears_left-compact",children:"装备"},void 0),(0,i.jsx)("th",{className:"gears_materias",children:"魔晶石"},void 0),e.schema.stats.map((e=>(0,i.jsx)("th",{className:"gears_stat",children:g.statNames[e]},e)))]},void 0)},void 0),(0,i.jsx)("tbody",{children:e.schema.slots.map(((t,a)=>(0,i.jsx)(M,{gear:e.equippedGears.get(t.slot.toString()),slot:t,isGroupEnd:a<e.schema.slots.length-1&&t.uiGroup!==e.schema.slots[a+1].uiGroup},t.slot)))},void 0)]},void 0)}));var E=a(8947);const R=d.forwardRef((function({promotion:e,onClick:t,...a},s){const o=m();return(0,i.jsxs)(E.Q,{children:[(0,i.jsx)(p.z,{...a,ref:s,onClick:()=>(o.promotion.off(e),t())},void 0),(0,i.jsx)(E.C,{className:"badge-button_badge",exited:!o.promotion.get(e)},void 0)]},void 0)})),V=n.Pi((function(){return(0,i.jsxs)("div",{className:"job-selector",children:[(0,i.jsxs)("div",{className:"job-selector_column",children:[(0,i.jsxs)(O,{name:"防护职业",children:[(0,i.jsx)(H,{job:"PLD"},void 0),(0,i.jsx)(H,{job:"WAR"},void 0),(0,i.jsx)(H,{job:"DRK"},void 0),(0,i.jsx)(H,{job:"GNB"},void 0)]},void 0),(0,i.jsxs)(O,{name:"近战职业",children:[(0,i.jsx)(H,{job:"MNK"},void 0),(0,i.jsx)(H,{job:"DRG"},void 0),(0,i.jsx)(H,{job:"NIN"},void 0),(0,i.jsx)(H,{job:"SAM"},void 0),(0,i.jsx)(H,{job:"RPR"},void 0)]},void 0)]},void 0),(0,i.jsxs)("div",{className:"job-selector_column",children:[(0,i.jsxs)(O,{name:"治疗职业",children:[(0,i.jsx)(H,{job:"WHM"},void 0),(0,i.jsx)(H,{job:"SCH"},void 0),(0,i.jsx)(H,{job:"AST"},void 0),(0,i.jsx)(H,{job:"SGE"},void 0)]},void 0),(0,i.jsxs)(O,{name:"远程物理职业",children:[(0,i.jsx)(H,{job:"BRD"},void 0),(0,i.jsx)(H,{job:"MCH"},void 0),(0,i.jsx)(H,{job:"DNC"},void 0)]},void 0),(0,i.jsxs)(O,{name:"远程魔法职业",children:[(0,i.jsx)(H,{job:"BLM"},void 0),(0,i.jsx)(H,{job:"SMN"},void 0),(0,i.jsx)(H,{job:"RDM"},void 0),(0,i.jsx)(H,{job:"BLU"},void 0)]},void 0)]},void 0),(0,i.jsx)("div",{className:"job-selector_column",children:(0,i.jsxs)(O,{name:"能工巧匠",children:[(0,i.jsx)(H,{job:"CRP"},void 0),(0,i.jsx)(H,{job:"BSM"},void 0),(0,i.jsx)(H,{job:"ARM"},void 0),(0,i.jsx)(H,{job:"GSM"},void 0),(0,i.jsx)(H,{job:"LTW"},void 0),(0,i.jsx)(H,{job:"WVR"},void 0),(0,i.jsx)(H,{job:"ALC"},void 0),(0,i.jsx)(H,{job:"CUL"},void 0)]},void 0)},void 0),(0,i.jsx)("div",{className:"job-selector_column",children:(0,i.jsxs)(O,{name:"大地使者",children:[(0,i.jsx)(H,{job:"MIN"},void 0),(0,i.jsx)(H,{job:"BTN"},void 0),(0,i.jsx)(H,{job:"FSH"},void 0)]},void 0)},void 0),(0,i.jsx)(h,{className:"job-selector_background-icon",name:"meteo"},void 0)]},void 0)})),O=n.Pi((function({name:e,children:t}){return(0,i.jsxs)("div",{className:"job-selector_group",children:[(0,i.jsx)("div",{className:"job-selector_group-name",children:e},void 0),t]},void 0)})),H=n.Pi((function({job:e}){const t=m(),a=g.jobSchemas[e];return(0,i.jsx)(x,{children:(0,i.jsxs)("a",{className:"job-selector_item",href:`?${e}`,onClick:a=>{a.preventDefault(),t.setJob(e),window.history.pushState(window.history.state,document.title,window.location.href)},children:[a.name,(0,i.jsx)(h,{className:"job-selector_icon",name:"jobs/"+e},void 0)]},void 0)},void 0)}));var F=a(5120);const q=n.Pi((function(){const e=m();return(0,i.jsxs)("div",{className:"filter card",children:[(0,i.jsxs)("div",{className:"filter_section",children:[(0,i.jsx)("span",{className:"filter_title",children:"实装版本"},void 0),(0,i.jsx)("span",{className:"filter_sub",children:"即使选择只显示国服项目，数值也仍然是国际服版本"},void 0)]},void 0),(0,i.jsxs)("div",{className:"filter_controls",children:[(0,i.jsx)(F.Y,{label:"显示全部",checked:"all"===e.filterPatch,onChange:()=>e.setFilterPatch("all")},void 0),(0,i.jsx)(F.Y,{label:`显示国服已实装和即将实装的项目（≤${g.patches.next}）`,checked:"next"===e.filterPatch,onChange:()=>e.setFilterPatch("next")},void 0),(0,i.jsx)(F.Y,{label:`只显示国服已实装的项目（≤${g.patches.current}）`,checked:"current"===e.filterPatch,onChange:()=>e.setFilterPatch("current")},void 0)]},void 0),(0,i.jsxs)("div",{className:"filter_section",children:[(0,i.jsx)("span",{className:"filter_title",children:"“聚焦”模式"},void 0),(0,i.jsx)("span",{className:"filter_sub",children:"隐藏大部分装备，对比某几件"},void 0)]},void 0),(0,i.jsxs)("div",{className:"filter_controls",children:[(0,i.jsx)(F.Y,{label:"不启用",checked:"no"===e.filterFocus,onChange:()=>e.setFilterFocus("no")},void 0),(0,i.jsx)(F.Y,{label:"只显示镶嵌了魔晶石的装备",checked:"melded"===e.filterFocus,onChange:()=>e.setFilterFocus("melded")},void 0),(0,i.jsx)(F.Y,{label:"只显示镶嵌了魔晶石的装备，并隐藏仅有一件装备可供选择的部位",checked:"comparable"===e.filterFocus,onChange:()=>e.setFilterFocus("comparable")},void 0)]},void 0)]},void 0)}));var z=a(1807),A=a(3087),B=a(4173);const K=n.Pi((function({toggle:e}){const t=m();return(0,i.jsx)("div",{className:"level-sync card",children:(0,i.jsxs)(z.a,{children:[g.jobLevels.map((a=>a<=t.schema.jobLevel&&(0,i.jsx)(A.i,{defaultOpen:a===t.jobLevel||a>=t.schema.jobLevel-10&&t.jobLevel>=t.schema.jobLevel-10,handle:(0,i.jsx)(B.ug,{className:"level-sync_group",text:`${a}级`,metaIcon:(0,i.jsx)(h,{className:"level-sync_group-icon",name:"chevron-right"},void 0)},void 0),children:(0,i.jsxs)("div",{className:"level-sync_levels",children:[g.syncLevels[a].map((s=>(0,i.jsx)(x,{children:(0,i.jsx)("span",{className:l("level-sync_level",g.syncLevelIsPopular[s]&&"-popular",s===t.syncLevel&&"-selected"),onClick:()=>{t.setSyncLevel(s,a),e()},children:s},void 0)},s))),a!==t.schema.jobLevel&&(0,i.jsx)(x,{children:(0,i.jsx)("span",{className:l("level-sync_job-level-sync",a===t.jobLevel&&void 0===t.syncLevel&&"-selected"),onClick:()=>{t.setSyncLevel(void 0,a),e()},children:"仅同步等级"},void 0)},void 0)]},void 0)},a))),(t.jobLevel!==t.schema.jobLevel||void 0!==t.syncLevel)&&(0,i.jsx)(p.z,{className:"level-sync_cancel",onClick:()=>{t.setSyncLevel(void 0,void 0),e()},children:"取消同步"},void 0)]},void 0)},void 0)}));var W=a(1512),$=a(2430),U=a(1037);const Y=n.Pi((function(){const e=m(),[t,a]=d.useState(0);return(0,i.jsxs)("div",{className:"materia-overall card",children:[(0,i.jsx)("div",{className:"materia-overall_tabbar",children:(0,i.jsxs)(W.n,{activeTabIndex:t,onActivate:e=>a(e.detail.index),children:[(0,i.jsx)($.O,{children:"用量预估"},void 0),(0,i.jsx)($.O,{style:{visibility:"hidden",pointerEvents:"none"},children:"批量镶嵌"},void 0)]},void 0)},void 0),0===t&&(0,i.jsxs)("table",{className:"materia-consumption table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"魔晶石"},void 0),(0,i.jsx)("th",{children:"安全孔"},void 0),(0,i.jsx)("th",{children:"期望"},void 0),(0,i.jsx)("th",{children:"90%*"},void 0),(0,i.jsx)("th",{children:"99%*"},void 0)]},void 0)},void 0),(0,i.jsxs)("tbody",{children:[(()=>{const t=[],a=e.schema.stats.filter((t=>t in e.materiaConsumption));for(const s of a)for(const a of g.materiaGrades){const o=e.materiaConsumption[s][a];void 0!==o&&t.push((0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:g.getMateriaName(s,a,"stat"===e.setting.materiaDisplayName)},void 0),(0,i.jsx)("td",{children:o.safe},void 0),(0,i.jsx)("td",{children:o.expectation},void 0),(0,i.jsx)("td",{children:o.confidence90},void 0),(0,i.jsx)("td",{children:o.confidence99},void 0)]},s+a))}return t})(),0===Object.keys(e.materiaConsumption).length&&(0,i.jsx)("tr",{className:"materia-consumption_empty",children:(0,i.jsx)("td",{colSpan:5,children:"未镶嵌魔晶石"},void 0)},void 0),(0,i.jsx)("tr",{className:"materia-consumption_tip",children:(0,i.jsxs)("td",{colSpan:5,children:["*以此成功率完成全部镶嵌所需的数量",e.schema.toolMateriaDuplicates>1&&(0,i.jsxs)("div",{className:l("materia-consumption_tool-duplicates",!e.duplicateToolMateria&&"-disabled"),children:[`主副手的用量按照${e.schema.toolMateriaDuplicates}套计算`,(0,i.jsx)(U.r,{className:"materia-consumption_tool-duplicates-switch",checked:e.duplicateToolMateria,onChange:e.toggleDuplicateToolMateria},void 0)]},void 0)]},void 0)},void 0)]},void 0)]},void 0),1===t&&(0,i.jsx)("div",{children:"TBD"},void 0)]},void 0)})),X=n.Pi((function(){const e=m();return(0,i.jsxs)("div",{className:"share card",children:[(0,i.jsx)("a",{className:"share_url",href:e.shareUrl,target:"_blank",children:e.shareUrl},void 0),(0,i.jsx)("div",{className:"share_tip",children:"分享时只会包含选中的装备。"},void 0),(0,i.jsx)(T(),{className:"share_copy",component:"span","data-clipboard-text":e.shareUrl,children:(0,i.jsx)(p.z,{children:"复制"},void 0)},void 0)]},void 0)})),J=n.Pi((function(){return(0,i.jsxs)("div",{className:"import card",children:[(0,i.jsx)("div",{className:"import_title",children:"使用方法："},void 0),(0,i.jsx)("div",{children:"将下方的链接添加为浏览器书签（一种较方便的方式是拖拽下方链接至书签栏），"},void 0),(0,i.jsx)("div",{children:"然后打开想导入的配装所在的页面，点击此书签。"},void 0),(0,i.jsx)("a",{ref:e=>null==e?void 0:e.setAttribute("href",encodeURI("javascript:void(document.body.appendChild(document.createElement('script')).src='"+window.location.origin+window.location.pathname+"import.js?'+Math.random())")),className:"import_bookmarklet",onClick:e=>e.preventDefault(),children:"导入配装"},void 0),(0,i.jsx)("div",{className:"import_title",children:"目前支持从以下配装器导入："},void 0),(0,i.jsx)("div",{children:"Ariyala's Final Fantasy XIV Toolkit (ffxiv.ariyala.com)"},void 0),(0,i.jsx)("div",{children:"FF14俺tools：装備シミュレータ (ffxiv.es.exdreams.net)"},void 0),(0,i.jsx)("div",{children:"Etro (etro.gg)"},void 0),(0,i.jsx)("div",{children:"FFXIV Teamcraft (ffxivteamcraft.com)"},void 0),(0,i.jsx)("div",{className:"import_warn",children:"此功能可能因上述站点的设计变动而失效，如遇到不可用请反馈。"},void 0)]},void 0)})),Z=n.Pi((function(){const e=m();return(0,i.jsxs)("div",{className:"setting card",children:[(0,i.jsxs)("div",{className:"setting_section",children:[(0,i.jsx)("span",{className:"setting_title",children:"装备名显示方式"},void 0),(0,i.jsx)("span",{className:"setting_sub",children:"国服未实装的装备总会显示为获取途径"},void 0)]},void 0),(0,i.jsxs)("div",{className:"setting_controls",children:[(0,i.jsx)(F.Y,{label:"显示装备名",checked:"name"===e.setting.gearDisplayName,onChange:()=>e.setting.setGearDisplayName("name")},void 0),(0,i.jsx)(F.Y,{label:"显示获取途径",checked:"source"===e.setting.gearDisplayName,onChange:()=>e.setting.setGearDisplayName("source")},void 0)]},void 0),(0,i.jsx)("div",{className:"setting_section",children:(0,i.jsx)("span",{className:"setting_title",children:"装备颜色方案"},void 0)},void 0),(0,i.jsxs)("div",{className:"setting_controls",children:[(0,i.jsx)(F.Y,{label:"区分竞品",checked:"source"===e.setting.gearColorScheme,onChange:()=>e.setting.setGearColorScheme("source")},void 0),(0,i.jsx)(F.Y,{label:"按稀有度上色",checked:"rarity"===e.setting.gearColorScheme,onChange:()=>e.setting.setGearColorScheme("rarity")},void 0),(0,i.jsx)(F.Y,{label:"不上色",checked:"none"===e.setting.gearColorScheme,onChange:()=>e.setting.setGearColorScheme("none")},void 0)]},void 0),(0,i.jsx)("div",{className:"setting_section",children:(0,i.jsx)("span",{className:"setting_title",children:"魔晶石显示方式"},void 0)},void 0),(0,i.jsxs)("div",{className:"setting_controls",children:[(0,i.jsx)(F.Y,{label:"显示增益的属性",checked:"stat"===e.setting.materiaDisplayName,onChange:()=>e.setting.setMateriaDisplayName("stat")},void 0),(0,i.jsx)(F.Y,{label:"显示魔晶石本身的名字",checked:"materia"===e.setting.materiaDisplayName,onChange:()=>e.setting.setMateriaDisplayName("materia")},void 0)]},void 0),(0,i.jsx)("div",{className:"setting_section",children:(0,i.jsx)("span",{className:"setting_title",children:"展示包含魔晶石增益的装备属性"},void 0)},void 0),(0,i.jsxs)("div",{className:"setting_controls",children:[(0,i.jsx)(F.Y,{label:"是，展示实际生效的属性",checked:e.setting.displayMeldedStats,onChange:()=>e.setting.setDisplayMeldedStats(!0)},void 0),(0,i.jsx)(F.Y,{label:"否，展示装备的原始属性",checked:!e.setting.displayMeldedStats,onChange:()=>e.setting.setDisplayMeldedStats(!1)},void 0)]},void 0),(0,i.jsxs)("div",{className:"setting_section",children:[(0,i.jsx)("span",{className:"setting_title",children:"隐藏已废弃的装备"},void 0),(0,i.jsx)("span",{className:"setting_sub",children:"部分粉色稀有度的装备、未强化的旧点数装备"},void 0)]},void 0),(0,i.jsxs)("div",{className:"setting_controls",children:[(0,i.jsx)(F.Y,{label:"隐藏",checked:e.setting.hideObsoleteGears,onChange:()=>e.setting.setHideObsoleteGears(!0)},void 0),(0,i.jsx)(F.Y,{label:"显示",checked:!e.setting.hideObsoleteGears,onChange:()=>e.setting.setHideObsoleteGears(!1)},void 0)]},void 0),(0,i.jsxs)("div",{className:"setting_section",children:[(0,i.jsx)("span",{className:"setting_title",children:"高饱和度模式"},void 0),(0,i.jsx)("span",{className:"setting_sub",children:"如果默认高亮颜色难以辨识请启用此模式"},void 0)]},void 0),(0,i.jsxs)("div",{className:"setting_controls",children:[(0,i.jsx)(F.Y,{label:"不启用",checked:!e.setting.highSaturation,onChange:()=>e.setting.setHighSaturation(!1)},void 0),(0,i.jsx)(F.Y,{label:"启用",checked:e.setting.highSaturation,onChange:()=>e.setting.setHighSaturation(!0)},void 0)]},void 0)]},void 0)})),Q=n.Pi((function(){const e=m(),t=void 0===e.job,a=!e.isViewing&&void 0!==e.job,s=e.isViewing&&void 0!==e.job;return(0,i.jsxs)("div",{className:"condition card",style:void 0===e.job?{width:"900px"}:{},children:[t&&(0,i.jsx)("span",{className:"condition_job -empty",children:"选择一个职业开始配装"},void 0),t&&(0,i.jsx)("a",{className:l("condition_tip",e.promotion.get("legacyLink")&&"-highlight"),href:"./shb/",children:"此工具已适配至《晓月之终途》资料片，如需使用《暗影之逆焰》版本请点击此处",onClick:e.promotion.get("legacyLink")?()=>e.promotion.off("legacyLink"):void 0,onMouseLeave:e.promotion.get("legacyLink")?()=>e.promotion.off("legacyLink"):void 0},void 0),a&&(0,i.jsx)(S,{label:({ref:t,toggle:a})=>(0,i.jsx)(x,{children:(0,i.jsxs)("span",{ref:t,className:"condition_job",onClick:a,children:[(0,i.jsx)(h,{className:"condition_job-icon",name:"jobs/"+e.job},void 0),(0,i.jsx)("span",{className:"condition_job-name",children:e.schema.name},void 0)]},void 0)},void 0),popper:()=>(0,i.jsx)("div",{className:"job-select-panel card",children:(0,i.jsx)(V,{},void 0)},void 0),placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[-4,0]}}]},void 0),s&&(0,i.jsxs)("span",{className:"condition_job",children:[(0,i.jsx)(h,{className:"condition_job-icon",name:"jobs/"+e.job},void 0),(0,i.jsx)("span",{className:"condition_job-name",children:e.schema.name},void 0)]},void 0),a&&(0,i.jsx)("span",{className:"condition_divider"},void 0),a&&(0,i.jsxs)("span",{className:"condition_level",children:[(0,i.jsxs)("span",{className:"condition_level-value",children:[(0,i.jsx)(ee,{value:e.minLevel,onChange:t=>e.setMinLevel(t)},void 0),(0,i.jsx)("span",{className:"condition_level-separator",children:"-"},void 0),(0,i.jsx)(ee,{value:e.maxLevel,onChange:t=>e.setMaxLevel(t)},void 0)]},void 0),"品级"]},void 0),a&&(0,i.jsx)(S,{label:({ref:e,toggle:t})=>(0,i.jsx)(R,{ref:e,className:"condition_button condition_filter",promotion:"filter",onClick:t,children:"筛选"},void 0),popper:q,placement:"bottom-start"},void 0),(a||s)&&(0,i.jsx)("span",{className:"condition_divider"},void 0),s&&e.schema.levelSyncable&&void 0!==e.syncLevelText&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:"condition_text",children:[(0,i.jsx)(h,{className:"condition_level-sync-icon",name:"sync"},void 0),e.syncLevelText]},void 0),(0,i.jsx)("span",{className:"condition_divider"},void 0)]},void 0),a&&e.schema.levelSyncable&&(0,i.jsx)(S,{label:({ref:t,toggle:a})=>{var s;return(0,i.jsxs)(p.z,{ref:t,className:"condition_button",onClick:a,children:[void 0!==e.syncLevelText&&(0,i.jsx)(h,{className:"condition_level-sync-icon",name:"sync"},void 0),null!==(s=e.syncLevelText)&&void 0!==s?s:"品级同步"]},void 0)},popper:K,placement:"bottom-start"},void 0),(a||s)&&(0,i.jsx)(S,{label:({ref:e,toggle:t})=>(0,i.jsx)(p.z,{ref:e,className:"condition_button",onClick:t,children:"魔晶石"},void 0),popper:Y,placement:"bottom-start"},void 0),(0,i.jsxs)("span",{className:"condition_right",children:[a&&(0,i.jsx)(S,{label:({ref:e,toggle:t})=>(0,i.jsx)(p.z,{ref:e,className:"condition_button",onClick:t,children:"分享"},void 0),popper:X,placement:"bottom-end"},void 0),(t||a)&&(0,i.jsx)(S,{label:({ref:e,toggle:t})=>(0,i.jsx)(p.z,{ref:e,className:"condition_button",onClick:t,children:"导入"},void 0),popper:J,placement:"bottom-end"},void 0),s&&(0,i.jsx)(p.z,{className:"condition_button",onClick:()=>{e.startEditing(),window.history.pushState(null,document.title,window.location.href.replace(/\?.*$/,""))},children:"编辑"},void 0),(a||s)&&(0,i.jsx)(S,{label:({ref:e,toggle:t})=>(0,i.jsx)(p.z,{ref:e,className:"condition_button condition_setting",onClick:t,children:"设置"},void 0),popper:Z,placement:"bottom-end"},void 0),(0,i.jsx)("span",{className:"condition_divider"},void 0),(0,i.jsxs)("span",{className:"condition_text",children:["数据版本 ",g.patches.data]},void 0)]},void 0),t&&(0,i.jsx)(V,{},void 0)]},void 0)})),ee=(()=>{let e=!1,t=null;return n.Pi((({value:a,onChange:s})=>{const[r,n]=d.useState(a.toString()),[l,c]=d.useState(a);a!==l&&(n(a.toString()),c(a));const m=d.useRef(null);d.useEffect((()=>{const e=e=>{if(e.preventDefault(),0!==e.deltaY){e.target.focus();const t=e.deltaY<0?5:-5;n((e=>(parseInt(e,10)+t).toString()))}},t=m.current;return t.addEventListener("wheel",e,{passive:!1}),()=>t.removeEventListener("wheel",e)}),[]);const p=()=>s(parseInt(r,10)||0);return(0,i.jsx)(v.n,{inputRef:m,className:"condition_level-input mdc-text-field--compact",value:r,onChange:e=>{n(e.target.value)},onFocus:t=>{t.target.select(),e=!0},onBlur:()=>{setTimeout((()=>{e?t=p:o.z((()=>{null==t||t(),t=null,p()}))}),0),e=!1},onKeyPress:e=>{"Enter"===e.key&&e.target.blur()}},void 0)}))})(),te=n.Pi((function({toggle:e}){const t=m();return(0,i.jsx)("div",{className:"clan card",children:(0,i.jsx)("table",{children:(0,i.jsx)("tbody",{children:g.races.map(((a,s)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"clan_race",children:a},void 0),[2*s,2*s+1].map((a=>(0,i.jsx)("td",{children:(0,i.jsx)(x,{children:(0,i.jsx)("div",{className:"clan_item",onClick:()=>{t.setClan(a),e()},children:g.clans[a]},void 0)},void 0)},a)))]},s)))},void 0)},void 0)},void 0)})),ae=n.Pi((function(){const e=m(),t=e.equippedEffects,[a,s]=d.useState(!1);return(0,i.jsxs)("div",{className:"summary card",children:[(0,i.jsxs)("span",{className:"summary_left",children:[(0,i.jsx)(S,{label:({ref:t,toggle:a})=>(0,i.jsxs)(p.z,{ref:t,className:"summary_clan",onClick:a,children:[e.raceName," - ",e.clanName]},void 0),popper:te,placement:"top-start",modifiers:[{name:"offset",options:{offset:[-8,0]}}],strategy:"fixed"},void 0),(0,i.jsxs)("span",{className:"summary_equipped-level",children:["il",e.equippedLevel]},void 0)]},void 0),(0,i.jsx)("span",{className:"summary_divider"},void 0),(0,i.jsxs)("span",{className:"summary_middle",children:[t&&(0,i.jsx)(p.z,{className:"summary_tiers-toggle",children:(a?"隐藏":"显示")+"阈值(差值)",onClick:()=>{s(!a),document.querySelector(".app").style.paddingBottom=(a?48:64)+"px"}},void 0),t&&(0,i.jsxs)("span",{className:"summary_stat summary_damage",children:[t.damage.toFixed(5),(0,i.jsx)("span",{className:"summary_damage-tip","aria-label":"BLU"!==e.job?"包括食物和组队加成，不包括其他任何手动施放的增益（如爆发药、连环计、身形、天语等）":"包括食物和组队加成，包括“以太复制：进攻”，不包括其他手动施放的增益",role:"tooltip",children:(0,i.jsx)(h,{name:"help"},void 0)},void 0),(0,i.jsx)("div",{className:"summary_stat-name",children:"每威力伤害期望"},void 0)]},void 0)]},void 0),(0,i.jsx)("span",{className:"summary_divider"},void 0),e.schema.stats.map((s=>{var o,r;return(0,i.jsxs)("span",{className:l("summary_stat",e.schema.skeletonGears&&"-skeleton"),children:[a&&void 0!==e.equippedTiers&&void 0!==e.equippedTiers[s]&&(0,i.jsxs)("div",{className:"summary_stat-tier",children:[(0,i.jsx)("span",{className:"summary_stat-prev",children:e.equippedTiers[s].prev},void 0),(0,i.jsxs)("span",{className:"summary_stat-next",children:["+",e.equippedTiers[s].next]},void 0)]},void 0),e.equippedStats[s],t&&(0,i.jsxs)(i.Fragment,{children:[("SKS"===s||"SPS"===s)&&(0,i.jsx)("div",{className:l("summary_stat-effect",e.jobLevel>=80&&(null===(o=e.schema.statModifiers)||void 0===o?void 0:o.gcdReason)&&"-tip"),"aria-label":e.jobLevel>=80?null===(r=e.schema.statModifiers)||void 0===r?void 0:r.gcdReason:void 0,role:"tooltip",children:t.gcd.toFixed(2)+"s"},void 0),"VIT"===s&&(0,i.jsxs)("div",{className:"summary_stat-effect summary_stat-effect-hp",children:[t.hp,(0,i.jsx)("span",{className:"summary_stat-small",children:"HP"},void 0)]},void 0)&&!1,"TEN"===s&&(0,i.jsxs)("div",{className:"summary_stat-effect",children:["-",(100*(t.tenDamage-1)).toFixed(1),"%"]},void 0)&&!1,"PIE"===s&&(0,i.jsxs)("div",{className:"summary_stat-effect",children:[t.mp,(0,i.jsx)("span",{className:"summary_stat-small",children:"MP"},void 0),"/3s"]},void 0)]},void 0),(0,i.jsx)("div",{className:"summary_stat-name",children:g.statNames[s]},void 0)]},s)}))]},void 0)})),ie=n.Pi((function(){return(0,i.jsxs)("div",{className:"about",children:[(0,i.jsx)("span",{className:"about_name",children:"最终幻想14配装器"},void 0),(0,i.jsx)("span",{className:"about_version",children:"2204e"},void 0),(0,i.jsx)("span",{className:"about_separator",children:"·"},void 0),(0,i.jsx)("a",{className:"about_link",href:"https://github.com/Asvel/ffxiv-gearing/blob/master/CHANGELOG.md",target:"_blank",children:"更新记录"},void 0),(0,i.jsx)("span",{className:"about_separator",children:"·"},void 0),(0,i.jsx)("a",{className:"about_link",href:"https://github.com/Asvel/ffxiv-gearing#license",target:"_blank",children:"许可协议"},void 0),(0,i.jsx)("span",{className:"about_separator",children:"·"},void 0),(0,i.jsx)("a",{className:"about_link",href:"https://github.com/Asvel/ffxiv-gearing",target:"_blank",children:"源代码"},void 0)]},void 0)})),se=n.Pi((function({store:e}){return e.isLoading?null:(0,i.jsx)(c.Provider,{value:e,children:(0,i.jsxs)("div",{className:l("app",`app-${e.mode}`,e.setting.highSaturation&&"app-high-saturation"),children:[(0,i.jsx)(Q,{},void 0),void 0!==e.job&&(e.isViewing?(0,i.jsx)(G,{},void 0):e.schema.slots.map((e=>(0,i.jsx)(P,{slot:e},e.slot)))),void 0!==e.job&&(0,i.jsx)(ae,{},void 0),(0,i.jsx)(ie,{},void 0),(0,i.jsx)("div",{id:"popper"},void 0)]},void 0)},void 0)}));var oe,re=a(3379),ne=a.n(re),le=a(7795),de=a.n(le),ce=a(569),me=a.n(ce),pe=a(3565),ge=a.n(pe),ve=a(9216),ue=a.n(ve),he=a(4589),be=a.n(he),xe=a(4339),fe={};fe.styleTagTransform=be(),fe.setAttributes=ge(),fe.insert=me().bind(null,"head"),fe.domAPI=de(),fe.insertStyleElement=ue(),ne()(xe.Z,fe),xe.Z&&xe.Z.locals&&xe.Z.locals,o.EH((()=>{void 0===r.h.job||r.h.isLoading||(document.title=`${r.h.schema.name}(il${r.h.equippedLevel}) - 最终幻想14配装器`)}));const je=document.createElement("div");document.body.appendChild(je),s.render((0,i.jsx)(se,{store:r.h},void 0),je),null===(oe=navigator.serviceWorker)||void 0===oe||oe.register("./serviceworker.js")},1087:()=>{"use strict";var e,t;if(null===localStorage.getItem("ffxiv-gearing.ew.promotion")&&null!==localStorage.getItem("ffxiv-gearing-promotion")){const e=Array.from({length:localStorage.length},((e,t)=>localStorage.key(t)));for(const t of e)if(t.startsWith("ffxiv-gearing-")){const e=t.slice("ffxiv-gearing-".length);if(8===e.length||14===e.length)continue;localStorage.setItem(`ffxiv-gearing.ew.${e}`,localStorage.getItem(t))}}(null===(t=null===(e=window.history.state)||void 0===e?void 0:e.archiveKey)||void 0===t?void 0:t.startsWith("ffxiv-gearing-"))&&(window.history.replaceState(window.history.state,document.title,window.location.href.replace(/\/([^\/]*)$/,"/shb/$1")),window.location.reload())},7929:(e,t,a)=>{"use strict";a.d(t,{Q:()=>u,P:()=>v});const i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s=[];for(let e=0;e<i.length;e++)s[i[e].charCodeAt(0)]=BigInt(e);const o=e=>{const t={};for(let a=0;a<e.length;a++)t[e[a]]=a;return t},r=[{job:"PLD",statDecode:["CRT","DET","DHT","SKS","TEN"]},{job:"WAR",statDecode:["CRT","DET","DHT","SKS","TEN"]},{job:"DRK",statDecode:["CRT","DET","DHT","SKS","TEN"]},{job:"GNB",statDecode:["CRT","DET","DHT","SKS","TEN"]},{job:"WHM",statDecode:["CRT","DET","DHT","SPS","PIE"]},{job:"SCH",statDecode:["CRT","DET","DHT","SPS","PIE"]},{job:"AST",statDecode:["CRT","DET","DHT","SPS","PIE"]},{job:"SGE",statDecode:["CRT","DET","DHT","SPS","PIE"]},{job:"MNK",statDecode:["CRT","DET","DHT","SKS"]},{job:"DRG",statDecode:["CRT","DET","DHT","SKS"]},{job:"NIN",statDecode:["CRT","DET","DHT","SKS"]},{job:"SAM",statDecode:["CRT","DET","DHT","SKS"]},{job:"RPR",statDecode:["CRT","DET","DHT","SKS"]},{job:"BRD",statDecode:["CRT","DET","DHT","SKS"]},{job:"MCH",statDecode:["CRT","DET","DHT","SKS"]},{job:"DNC",statDecode:["CRT","DET","DHT","SKS"]},{job:"BLM",statDecode:["CRT","DET","DHT","SPS"]},{job:"SMN",statDecode:["CRT","DET","DHT","SPS"]},{job:"RDM",statDecode:["CRT","DET","DHT","SPS"]},{job:"BLU",statDecode:["CRT","DET","DHT","SPS"]},{job:"CRP",statDecode:["CMS","CRL","CP"]},{job:"BSM",statDecode:["CMS","CRL","CP"]},{job:"ARM",statDecode:["CMS","CRL","CP"]},{job:"GSM",statDecode:["CMS","CRL","CP"]},{job:"LTW",statDecode:["CMS","CRL","CP"]},{job:"WVR",statDecode:["CMS","CRL","CP"]},{job:"ALC",statDecode:["CMS","CRL","CP"]},{job:"CUL",statDecode:["CMS","CRL","CP"]},{job:"MIN",statDecode:["GTH","PCP","GP"]},{job:"BTN",statDecode:["GTH","PCP","GP"]},{job:"FSH",statDecode:["GTH","PCP","GP"]}],n={};for(let e=0;e<r.length;e++){const t=r[e],a=o(t.statDecode);n[t.job]={index:e,statEncode:a}}const l=[50,60,70,80,90],d=o(l);var c;!function(e){e[e.Special=6]="Special",e[e.Customizable=7]="Customizable"}(c||(c={}));const m=[10337,10338,10339,10340,10341,10342,10343,10344,17726],p=o(m);class g{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:77}),Object.defineProperty(this,"job",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"jobLevel",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"syncLevel",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"gearType",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"gearId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"materiaSlot",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"materiaStat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"materiaGrade",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"specialGear",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"customStat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_version",{enumerable:!0,configurable:!0,writable:!0,value:4})}useVersion(e){this._version=e,e>=4&&(this.job=31,this.jobLevel=5,this.syncLevel=670,this.gearType=8,this.gearId=5e4,this.materiaSlot=6,this.materiaGrade=10,this.specialGear=9,this.customStat=1001)}useJob(e){this.materiaStat=r[n[e].index].statDecode.length}}function v({job:e,jobLevel:t,syncLevel:a,gears:s}){var o,m,v,u,h,b,x;const f=new g;f.useVersion(4),f.useJob(e);const{statEncode:j}=n[e],{statDecode:S}=r[n[e].index],_=[],y=[];let N=!1;y[f.materiaGrade]=[];for(const{id:e,materias:t,customStats:a}of s)if(e in p)_[c.Special]=1;else if(void 0!==a)_[c.Customizable]=1;else{_[t.length]=1;for(const e of t)null!==e&&void 0!==j[e[0]]?(null!==(o=y[x=e[1]])&&void 0!==o||(y[x]=[]),y[e[1]][j[e[0]]]=1):N=!0}let w=0;for(let e=0;e<f.gearType;e++)void 0!==_[e]&&(_[e]=w,w+=1);let T=0;for(let e=f.materiaGrade;e>=1;e--)if(void 0!==y[e])for(let t=0;t<f.materiaStat;t++)void 0!==y[e][t]&&(y[e][t]=T,T+=1);N&&(T+=1);let L=0;for(;!N&&void 0===y[L];)L++;const D=[],C=[];for(const{id:e,materias:t,customStats:a}of s)if(e>0)if(e in p)C.push(e);else{const i=[];for(const e of t)i.push(null===e||void 0===j[e[0]]?T-1:y[e[1]][j[e[0]]]);D.push({id:e,materias:i,customStats:a})}else console.warn(`share.stringify: gear id ${e} invalid.`);if(0===D.length&&0===C.length)return"";let M=D.length-1;for(;0===(null===(m=D[M])||void 0===m?void 0:m.materias.length);)M--;const k=(null===(v=D[M-1])||void 0===v?void 0:v.id)>(null===(u=D[M])||void 0===u?void 0:u.id);D.sort(((e,t)=>e.id-t.id));let I=0;for(let e=1;e<D.length;e++){const t=D[e].id-D[e-1].id;t>I&&(I=t)}I+=1;let P=1;D.length>1&&((I>=D[0].id||D[1].id-D[0].id<D[D.length-1].id-D[D.length-2].id)&&(P=-1,D.reverse()),D[D.length-1].id-D[D.length-2].id==P*I-1&&(I+=1));let G=0n;const E=(e,t)=>{G=G*BigInt(t)+BigInt(e<t?e:t-1)},R=e=>E(e?1:0,2);for(let e=D.length-1;e>=0;e--){const{id:t,materias:a,customStats:i}=D[e];if(e>0){const a=(t-D[e-1].id)*P;E(a+(e===D.length-1?1:0),I)}else R(k),R(1===P),E(I,t),E(t,f.gearId);if(void 0!==i)for(let e=S.length-1;e>=0;e--)E(null!==(h=i[S[e]])&&void 0!==h?h:0,f.customStat);else for(let e=a.length-1;e>=0;e--)E(a[e],T);E(_[void 0===i?a.length:c.Customizable],w)}for(const e of C)E(p[e],f.specialGear),E(_[c.Special],w);for(let e=L;e<=f.materiaGrade;e++)if(0!==e)for(let t=f.materiaStat-1;t>=0;t--)R(void 0!==(null===(b=y[e])||void 0===b?void 0:b[t]));E(L,f.materiaGrade+1);for(let e=f.gearType-1;e>=0;e--)R(void 0!==_[e]);return void 0!==a||t!==l[f.jobLevel-1]?(E(null!=a?a:0,f.syncLevel),E(d[t],f.jobLevel),R(!0)):R(!1),E(n[e].index,f.job),E(4,f.version),function(e){let t="";do{t=i[e%62n]+t,e/=62n}while(e>0);return t}(G)}function u(e){let t=function(e){let t=0n;for(const a of e)t=62n*t+s[a.charCodeAt(0)];return t}(e);const a=e=>{const a=BigInt(e),i=t%a;return t/=a,Number(i)},i=()=>1===a(2),o=new g,n=a(o.version);if(n<4)return"legacy";o.useVersion(n);const{job:d,statDecode:p}=r[a(o.job)];o.useJob(d);const v=i(),u=l[v?a(o.jobLevel):o.jobLevel-1],h=v&&a(o.syncLevel)||void 0,b=[];for(let e=0;e<o.gearType;e++)i()&&b.push(e);const x=a(o.materiaGrade+1),f=[];for(let e=o.materiaGrade;e>=x;e--)if(0!==e)for(let t=0;t<o.materiaStat;t++)i()&&f.push([p[t],e]);0===x&&f.push(null);const j=[];let S=0,_=0,y=!1,N=-1;for(;0n!==t;){const e=b[a(b.length)],s=[];let r;if(e!==c.Special){if(e===c.Customizable){r={};for(const e of p){const t=a(o.customStat);t>0&&(r[e]=t)}}else for(let t=0;t<e;t++)s[t]=f[a(f.length)];-1===N?(N=a(o.gearId),S=a(N),_=i()?1:-1,y=i()):N+=(a(S)-(0n===t?1:0))*_,j.push({id:N,materias:s,customStats:r})}else{const e=m[a(o.specialGear)];j.push({id:e,materias:s})}}return y!==(-1===_)&&j.reverse(),{job:d,jobLevel:u,syncLevel:h,gears:j}}},5193:(e,t,a)=>{"use strict";a.r(t);var i=a(8949),s=a(7090),o=a(3517),r=a(5373),n=a(7929),l=a(1537);const d=i.LO.box(void 0,{deep:!1});i.EH((()=>{const e=d.get();if(void 0===e||""===window.location.search)return;if(l.l9.get())return;const t={mode:"view",job:e.job,jobLevel:e.jobLevel,syncLevel:e.syncLevel,gears:{},equippedGears:{}};for(const a of e.gears)if(l.pS.has(a.id)){const{slot:e}=l.pS.get(a.id),i=void 0===t.equippedGears[e]?a.id:-a.id,s=a.materias.map((e=>({stat:null===e?void 0:e[0],grade:null===e?void 0:e[1]}))),o=a.customStats;t.gears[i]={id:i,materias:s,customStats:o},t.equippedGears[i>0?e:-e]=i}s.Xx(l.h,t)}));const c=()=>{let e=window.location.search.slice(1);if(e in o.jobSchemas)l.h.setJob(e),window.history.replaceState(window.history.state,document.title,window.location.href.replace(/\?.*$/,""));else{if(e.startsWith("import-")){const t=JSON.parse(decodeURIComponent(e.slice("import-".length)));e=n.P(t),window.history.replaceState(window.history.state,document.title,window.location.href.replace(/\?.*$/,`?${e}`))}if(e.length>3){const t=n.Q(e);if("legacy"===t)return void(window.location.href=window.location.href.replace("/?","/shb/?"));for(const e of t.gears)(0,l.oG)(e.id);i.z((()=>d.set(t))),l.h.setMode("view")}}};c(),window.addEventListener("popstate",i.aD((()=>{const e=r.zD();void 0!==e?s.Xx(l.h,e):(s.Xx(l.h,s.vM(l.yh.create())),c())})))},1537:(e,t,a)=>{"use strict";a.d(t,{jr:()=>u,XV:()=>p,JT:()=>h,rL:()=>b,j_:()=>c,LW:()=>d,pE:()=>n,yh:()=>j,mD:()=>k,GW:()=>M,pS:()=>S,l9:()=>y,V6:()=>C,oG:()=>T,MI:()=>D,h:()=>I});var i=a(7090),s=a(3517),o=a(5373);const r="ffxiv-gearing.ew.setting",n=i.V5.model({gearDisplayName:i.V5.optional(i.V5.string,"name"),gearColorScheme:i.V5.optional(i.V5.string,"source"),materiaDisplayName:i.V5.optional(i.V5.string,"stat"),displayMeldedStats:i.V5.optional(i.V5.boolean,!0),hideObsoleteGears:i.V5.optional(i.V5.boolean,!0),highSaturation:i.V5.optional(i.V5.boolean,!1)}).actions((e=>({afterCreate(){var t;i.Xx(e,JSON.parse(null!==(t=localStorage.getItem(r))&&void 0!==t?t:"{}")),i.cf(e,(e=>localStorage.setItem(r,JSON.stringify(e))))},setGearDisplayName(t){e.gearDisplayName=t},setGearColorScheme(t){e.gearColorScheme=t},setMateriaDisplayName(t){e.materiaDisplayName=t},setDisplayMeldedStats(t){e.displayMeldedStats=t},setHideObsoleteGears(t){e.hideObsoleteGears=t},setHighSaturation(t){e.highSaturation=t}}))),l="ffxiv-gearing.ew.promotion",d=i.V5.model({filter:i.V5.optional(i.V5.boolean,!0),legacyLink:i.V5.optional(i.V5.boolean,!0)}).views((e=>({get(t){var a;return null!==(a=e[t])&&void 0!==a&&a}}))).actions((e=>({afterCreate(){const t=localStorage.getItem(l),a=JSON.parse(null!=t?t:"{}");if(null===t){for(const t of Object.keys(i.vM(e)))a[t]=!1;localStorage.setItem(l,JSON.stringify(a))}i.Xx(e,a),i.cf(e,(e=>localStorage.setItem(l,JSON.stringify(e))))},off(t){!0===e[t]&&(e[t]=!1)}}))),c=i.V5.model({stat:i.V5.maybe(i.V5.string),grade:i.V5.maybe(i.V5.number)}).views((e=>({get index(){return Number(e.$treenode.subpath)},get gear(){return i.nc(e,p)}}))).views((e=>({get name(){return void 0===e.stat?"":s.getMateriaName(e.stat,e.grade,"stat"===i.dU(e).setting.materiaDisplayName)},get isAdvanced(){return e.index>=e.gear.materiaSlot},get meldableGrades(){return(e.index>e.gear.materiaSlot?s.materiaGradesAdvanced:s.materiaGrades).filter((t=>e.gear.level>=s.materiaGradeRequiredLevels[t-1]))},get successRate(){if(void 0===e.grade)return;const t=e.index-e.gear.materiaSlot;return t<0?100:s.materiaSuccessRates[t][e.grade-1]}}))).actions((e=>({meld(t,a){e.stat=t,e.grade=a}})));var m=a(8949);const p=i.V5.model("Gear",{id:i.V5.identifierNumber,materias:i.V5.optional(i.V5.array(c),[]),customStats:i.V5.maybe(i.V5.map(i.V5.number))}).views((e=>({get data(){if(!S.has(Math.abs(e.id)))throw ReferenceError(`Gear ${e.id} not exists.`);return S.get(Math.abs(e.id))}}))).views((e=>({get isFood(){return!1},get name(){return e.data.name},get level(){return e.data.level},get slot(){return e.id>0?e.data.slot:-e.data.slot},get jobs(){return s.jobCategories[e.data.jobCategory]},get equipLevel(){return e.data.equipLevel},get materiaSlot(){return e.data.materiaSlot},get materiaAdvanced(){return e.data.materiaAdvanced},get hq(){return e.data.hq},get customizable(){return e.data.customizable},get source(){return e.data.source},get patch(){return e.data.patch},get color(){const{gearColorScheme:t}=i.dU(e).setting;if("none"===t)return"white";const{rarity:a,source:s=""}=e.data;return"source"===t&&v[s.slice(0,2)]||g[a]},get syncedLevel(){let{jobLevel:t,syncLevel:a}=i.nc(e,j);return void 0===a&&t<this.equipLevel&&(a=s.syncLevelOfJobLevels[t]),a<this.level?a:void 0},get caps(){return s.getCaps(e.data)},get bareStats(){return e.data.stats},get materiaStats(){var t;const a={};for(const i of e.materias)if(void 0!==i.stat){const e=s.materias[i.stat][i.grade-1];a[i.stat]=(null!==(t=a[i.stat])&&void 0!==t?t:0)+e}return a},get stats(){var t,a,i;let o={},r=this.bareStats;if(this.customizable&&(r={...r,...e.customStats.toJSON()}),void 0!==this.syncedLevel){const a=s.getCaps(e.data,this.syncedLevel);for(const e of Object.keys(r))o[e]=Math.min(null!==(t=r[e])&&void 0!==t?t:0,a[e])}else if(0===this.materiaSlot)o=r;else for(const e of Object.keys(r).concat(Object.keys(this.materiaStats)))o[e]=Math.min((null!==(a=r[e])&&void 0!==a?a:0)+(null!==(i=this.materiaStats[e])&&void 0!==i?i:0),this.caps[e]);return o},get totalMeldableStats(){var e;const t={};for(const a of Object.keys(this.caps))t[a]=this.caps[a]-(null!==(e=this.bareStats[a])&&void 0!==e?e:0);return t},get currentMeldableStats(){var e;const t={};for(const a of Object.keys(this.caps))t[a]=this.totalMeldableStats[a]-(null!==(e=this.materiaStats[a])&&void 0!==e?e:0);return t},get statHighlights(){var e,t;const a={};for(const i of Object.keys(this.bareStats))a[i]=s.statHighlight[i]&&(null!==(e=this.bareStats[i])&&void 0!==e?e:0)>=(null!==(t=this.caps[i])&&void 0!==t?t:1/0);return a},get isInstalled(){return!(this.patch>s.patches.current)},get isEquipped(){return i.nc(e,j).equippedGears.get(this.slot.toString())===e},get isMelded(){for(const t of e.materias)if(void 0!==t.stat)return!0;return void 0!==e.customStats&&e.customStats.size>0}}))).actions((e=>({setCustomStat(t,a){a>0?e.customStats.set(t,a<=s.customStatMax?a:s.customStatMax):e.customStats.delete(t)},initialize(){const t=e.materiaAdvanced?5:e.materiaSlot;e.materias.length>t&&e.materias.splice(0,t,5),e.materias.length<t&&e.materias.push(...new Array(t-e.materias.length).fill({})),e.customizable&&void 0===e.customStats&&(e.customStats={})},afterCreate(){m.gx((()=>S.has(Math.abs(e.id))),this.initialize)}}))).postProcessSnapshot((e=>(void 0===e.customStats&&delete e.customStats,e))),g={1:"white",2:"green",3:"blue",4:"purple",7:"red"},v={点数:"red",天书:"purple",绝境:"purple"},u=i.V5.model("Food",{id:i.V5.identifierNumber}).views((e=>({get data(){if(!S.has(e.id))throw ReferenceError(`Food ${e.id} not exists.`);return S.get(e.id)}}))).views((e=>({get isFood(){return!0},get name(){return e.data.name},get level(){return e.data.level},get slot(){return e.data.slot},get jobs(){return s.jobCategories[e.data.jobCategory]},get hq(){return!0},get patch(){return e.data.patch},get color(){return"white"},get stats(){return e.data.stats},get statRates(){return e.data.statRates},get requiredStats(){const e={};for(const t of Object.keys(this.stats)){const a=this.statRates[t];void 0!==a&&(e[t]=Math.ceil(100*this.stats[t]/a))}return e},get effectiveStats(){var t,a;const s=i.nc(e,j),o={};for(const e of Object.keys(this.stats)){const i=null!==(t=s.equippedStatsWithoutFood[e])&&void 0!==t?t:1,r=null!==(a=this.statRates[e])&&void 0!==a?a:1/0;o[e]=Math.min(this.stats[e],M(i*r/100))}return o},get statHighlights(){return{[e.data.statMain]:!0}},get utilization(){let e=0,t=0;for(const a of Object.keys(this.stats))e+=this.stats[a],t+=this.effectiveStats[a];return M(t/e*100)},get utilizationOpacity(){return Math.max(.2,(this.utilization/100)**2)},get isInstalled(){return!(this.patch>s.patches.current)},get isEquipped(){return i.nc(e,j).equippedGears.get("-1")===e}}))),h=i.V5.union({dispatcher:e=>{const t=S.get(Math.abs(e.id));return void 0!==t?(void 0!==e.materias&&-1===t.slot&&delete e.materias,-1!==t.slot?p:u):void 0!==e.materias?p:u}},p,u),b=i.V5.maybe(i.V5.reference(h,{get(e,t){const a=t?i.Q0(h,t,e):void 0;return a&&S.has(Math.abs(a.id))?a:void 0},set(e){var t;return null===(t=e)||void 0===t?void 0:t.$treenode.unnormalizedIdentifier}}));var x=a(7929);const f="ffxiv-gearing.ew.clan",j=i.V5.model("Store",{mode:i.V5.optional(i.V5.string,"edit"),job:i.V5.maybe(i.V5.string),jobLevel:i.V5.optional(i.V5.number,90),minLevel:i.V5.optional(i.V5.number,0),maxLevel:i.V5.optional(i.V5.number,0),syncLevel:i.V5.maybe(i.V5.number),filterPatch:i.V5.optional(i.V5.string,"all"),filterFocus:i.V5.optional(i.V5.string,"no"),showAllFoods:i.V5.optional(i.V5.boolean,!1),duplicateToolMateria:i.V5.optional(i.V5.boolean,!0),gears:i.V5.map(h),equippedGears:i.V5.map(b)}).volatile((()=>({promotion:d.create(),clan:Number(localStorage.getItem(f))||0,autoSelectScheduled:!1}))).views((e=>({get setting(){return i.dU(e).setting},get filteredIds(){if(void 0===e.job)return[];if("view"===e.mode)return Array.from(e.gears.keys(),(e=>Number(e)));const t=m.rg((()=>e.equippedGears.toJSON())),a=[];for(const i of C.get()){const{job:o,minLevel:r,maxLevel:n,filterPatch:l}=e;!s.jobCategories[i.jobCategory][o]||"all"!==l&&("next"!==l||i.patch>s.patches.next)&&("current"!==l||i.patch>s.patches.current)||!(-1===i.slot?e.showAllFoods||"best"in i:17===i.slot||2===i.slot&&"FSH"===o||i.level>=r&&i.level<=n&&(!i.obsolete||!this.setting.hideObsoleteGears))?(t[i.slot]===i.id&&a.push(i.id),t[-i.slot]===-i.id&&a.push(-i.id)):(a.push(i.id),12===i.slot&&a.push(-i.id))}return a}}))).views((e=>({get isLoading(){return y.get()},get isViewing(){return"view"===e.mode},get schema(){if(void 0===e.job)throw new ReferenceError;return s.jobSchemas[e.job]},get groupedGears(){const t={};for(const a of e.filteredIds){const i=e.gears.get(a.toString());("no"===e.filterFocus||i.isFood||i.isMelded)&&(i.slot in t||(t[i.slot]=[]),t[i.slot].push(i))}return t},get baseStats(){var t,a,i,o;if(void 0===e.job)return{};const r=s.jobLevelModifiers[e.jobLevel],n={PDMG:0,MDMG:0};for(const l of this.schema.stats){const d=null!==(t=s.baseStats[l])&&void 0!==t?t:0;n[l]="number"==typeof d?d:M(r[d]*(null!==(a=this.schema.statModifiers[l])&&void 0!==a?a:100)/100)+(null!==(o=null===(i=s.clanStats[l])||void 0===i?void 0:i[e.clan])&&void 0!==o?o:0)}return n},get equippedStatsWithoutFood(){if(void 0===e.job)return{};const t={...this.baseStats};for(const a of e.equippedGears.values())if(void 0!==a&&!a.isFood)for(const e of Object.keys(a.stats))t[e]=t[e]+a.stats[e];return t},get equippedStats(){var t;if(void 0===e.job)return{};const a=e.equippedGears.get("-1");if(void 0===a)return this.equippedStatsWithoutFood;const i={};for(const e of Object.keys(this.equippedStatsWithoutFood))i[e]=this.equippedStatsWithoutFood[e]+(null!==(t=a.effectiveStats[e])&&void 0!==t?t:0);return i},get equippedLevel(){var t,a,i,s;let o=0,r=0;for(const n of this.schema.slots)o+=(null!==(a=null===(t=e.equippedGears.get(n.slot))||void 0===t?void 0:t.level)&&void 0!==a?a:0)*(null!==(i=n.levelWeight)&&void 0!==i?i:1),r+=null!==(s=n.levelWeight)&&void 0!==s?s:1;return M(o/r)},get materiaConsumption(){const t={};for(const a of e.equippedGears.values()){if(void 0===a||a.isFood)continue;const i=e.duplicateToolMateria&&(1===a.slot||2===a.slot)&&this.schema.toolMateriaDuplicates||1;for(const e of a.materias){if(void 0===e.stat)continue;void 0===t[e.stat]&&(t[e.stat]={}),void 0===t[e.stat][e.grade]&&(t[e.stat][e.grade]={safe:0,expectation:0,confidence90:0,confidence99:0,rates:[]});const a=t[e.stat][e.grade];for(let t=0;t<i;t++)100===e.successRate?a.safe+=1:(a.expectation+=100/e.successRate,a.rates.push(e.successRate/100))}}for(const e of Object.values(t))for(const t of Object.values(e)){t.expectation=t.safe+Math.round(t.expectation);const e=t.rates;if(0===e.length){t.confidence90=t.confidence99=t.safe;continue}const a=[];let i=1,s=0;for(;;){a[i]=[],a[i][e.length-1]=1-(1-e[e.length-1])**i;for(let t=e.length-2;t>=0&&!(e.length-t>i);t--){a[i][t]=0;for(let s=1;s<=i-(e.length-t)+1;s++)a[i][t]+=(1-e[t])**(s-1)*e[t]*a[i-s][t+1]}if(a[i][0]>.9&&0===s&&(s=i),a[i][0]>.99)break;i++}t.confidence90=t.safe+s,t.confidence99=t.safe+i}return t},get syncLevelText(){return void 0!==e.syncLevel?e.syncLevel.toString():e.jobLevel!==this.schema.jobLevel?e.jobLevel+"级":void 0},get raceName(){return s.races[M(e.clan/2)]},get clanName(){return s.clans[e.clan]}}))).views((e=>({get equippedEffects(){var t,a,i;const{statModifiers:o,mainStat:r,traitDamageMultiplier:n,partyBonus:l}=e.schema;if(void 0===o||void 0===r||void 0===n)return;const d=s.jobLevelModifiers[e.jobLevel],{main:c,sub:m,div:p,det:g,detTrunc:v}=d,{CRT:u,DET:h,DHT:b,TEN:x,SKS:f,SPS:j,VIT:S,PIE:_,PDMG:y,MDMG:N}=e.equippedStats,w="VIT"===r?"STR":r,T="VIT"!==r?o[w]:Math.floor((o.VIT+o.STR)/2),L="BLU"===e.job?200:0,D=M(200*(u-m)/p+50+L)/1e3,C=M(200*(u-m)/p+1400)/1e3,k=M((140*(h-c)/g+1e3)/v)*v/1e3,I=M(550*(b-m)/p+L)/1e3,P=M(100*((null!=x?x:m)-m)/p+1e3)/1e3;return{crtChance:D,crtDamage:C,detDamage:k,dhtChance:I,tenDamage:P,damage:.01*(M(c*T/1e3)+(null!==(t="MND"===r||"INT"===r?N:y)&&void 0!==t?t:0)+("BLU"===e.job&&null!==(a=s.bluMdmgAdditions[e.equippedStats.INT-e.baseStats.INT])&&void 0!==a?a:0))*(M(("VIT"===r?d.apTank:d.ap)*(M((null!==(i=e.equippedStats[w])&&void 0!==i?i:0)*(null!=l?l:1.05))-c)/c+100)/100)*k*P*n*((C-1)*D+1)*(.25*I+1),gcd:M(M(2500*(1e3-M(130*((null!=f?f:j)-m)/p))/1e3)*(e.jobLevel>=80&&o.gcd||100)/1e3)/100,ssDamage:M(130*((null!=f?f:j)-m)/p+1e3)/1e3,hp:M(d.hp*o.hp/100+("VIT"===r?d.vitTank:d.vit)*(S-c)),mp:M(150*((null!=_?_:c)-c)/p+200)}},get equippedTiers(){var t,a;const{statModifiers:i}=e.schema;if(void 0===i)return;const{main:o,sub:r,div:n,det:l,detTrunc:d}=s.jobLevelModifiers[e.jobLevel],{CRT:c,DET:m,DHT:p,TEN:g,SKS:v,SPS:u,PIE:h}=e.equippedStats;function b(e,t){if(Number.isNaN(e))return;const a=M(e/t);return{prev:k(a*t)-1-e,next:k((a+1)*t)-e}}function x(e,t,a){if(Number.isNaN(e))return;const i=M(M(2.5*(1e3-M(e/t)))*a);return{prev:k((M(1e3-k((i+1)/a)/2.5)+1)*t)-1-e,next:k((M(1e3-k(i/a)/2.5)+1)*t)-e}}return{CRT:b(c-r,n/200),DET:b(m-o,l/140*d),DHT:b(p-r,n/550),TEN:b(g-r,n/100),SKS:x(v-r,n/130,(null!==(t=i.gcd)&&void 0!==t?t:100)/1e3),SPS:x(u-r,n/130,(null!==(a=i.gcd)&&void 0!==a?a:100)/1e3),PIE:b(h-o,n/150)}},get share(){var t;if(void 0===e.job)return"";const a=[];for(const i of e.schema.slots){const s=e.equippedGears.get(i.slot.toString());void 0!==s&&a.push({id:s.data.id,materias:s.isFood||void 0!==s.syncedLevel?[]:s.materias.map((e=>void 0!==e.stat?[e.stat,e.grade]:null)),customStats:null===(t=s.customStats)||void 0===t?void 0:t.toJSON()})}return x.P({job:e.job,jobLevel:e.jobLevel,syncLevel:e.syncLevel,gears:a})},get shareUrl(){return window.location.origin+window.location.pathname+"?"+this.share}}))).actions((e=>({createGears(){for(const t of e.filteredIds)e.gears.has(t.toString())||e.gears.put(h.create({id:t}))},setMode(t){e.mode=t},setJob(t){var a;const i=e.job&&s.jobSchemas[e.job],o=s.jobSchemas[t];e.job=t,o.jobLevel===(null==i?void 0:i.jobLevel)&&o.levelSyncable||(e.jobLevel=o.jobLevel,e.syncLevel=void 0),o.defaultItemLevel!==(null==i?void 0:i.defaultItemLevel)&&(e.minLevel=o.defaultItemLevel[0],e.maxLevel=o.defaultItemLevel[1]);for(const[a,i]of e.equippedGears.entries())void 0===i||i.jobs[t]||e.equippedGears.delete(a);e.autoSelectScheduled=null!==(a=o.skeletonGears)&&void 0!==a&&a},setMinLevel(t){e.minLevel=t},setMaxLevel(t){e.maxLevel=t},setSyncLevel(t,a){e.syncLevel=t,e.jobLevel=null!=a?a:e.schema.jobLevel},setFilterPatch(t){e.filterPatch=t},setFilterFocus(t){e.filterFocus=t},toggleShowAllFoods(){e.showAllFoods=!e.showAllFoods},toggleDuplicateToolMateria(){e.duplicateToolMateria=!e.duplicateToolMateria},startEditing(){e.mode="edit";let t=1/0,a=-1/0;for(const i of e.schema.slots){const s=e.equippedGears.get(i.slot.toString());void 0!==s&&0!==i.levelWeight&&17726!==s.id&&(s.level<t&&(t=s.level),s.level>a&&(a=s.level))}e.minLevel=t,e.maxLevel=a},equip(t){const a=t.slot.toString();e.equippedGears.get(a)===t?e.equippedGears.delete(a):e.equippedGears.set(a,t)},setClan(t){e.clan=t,localStorage.setItem(f,t.toString())},autoSelect(){if(e.autoSelectScheduled){e.autoSelectScheduled=!1;for(const t of Object.values(e.groupedGears)){let e=t[t.length-1];if(void 0!==e&&!e.isFood&&17!==e.slot){for(let a=t.length-1;a>=0;a--)if(t[a].materiaSlot>0){e=t[a];break}e.isEquipped||this.equip(e)}}}},unprotect(){i.pc(e)}}))).actions((e=>({afterCreate(){for(const t of Object.values(e.equippedGears.toJSON()))T(Math.abs(t));m.EH((()=>D(e.minLevel,e.maxLevel))),m.U5((()=>e.filteredIds),e.createGears,{fireImmediately:!0}),m.U5((()=>e.autoSelectScheduled&&e.groupedGears),e.autoSelect)}}))),S=m.LO.map({},{deep:!1});m.z((()=>{for(const e of a(1571).Z)S.set(e.id,e);for(const e of a(7637).default)S.set(e.id,e)}));const _=m.LO.map({}),y=m.Fl((function(){for(const e of _.values())if("loading"===e)return!0;return!1})),N=async e=>{if(void 0===e||_.has(e))return;m.z((()=>_.set(e,"loading")));const t=(await a(4947)(`./gears-${e}`)).default;m.z((()=>{for(const e of t)S.has(e.id)||S.set(e.id,e);_.set(e,"finished")}))},w=a(8953).Z,T=e=>N(w[e]),L=a(3460).Z,D=(e,t)=>{let a=0;for(;L[a+1]<=e;)a++;for(;L[a]<=t;)N(L[a]),a++};_.set(L[L.length-1],"finished");const C=m.LO.box([],{deep:!1});function M(e){return Math.floor(e+1e-7)}function k(e){return Math.ceil(e-1e-7)}m.EH((()=>{y.get()||m.z((()=>{C.set(Array.from(S.values()).sort(((e,t)=>{const a=e.level-t.level;return 0!==a?a:e.id-t.id})))}))}));const I=j.create(o.zD(),{setting:n.create()});i.cf(I,(e=>{void 0!==e.job&&"view"!==e.mode&&o.a1(e)})),a(5193),window.store=I,window.game=s,i.pc(I),console.log("You can access window.store for data store of this app, and window.game for ffxiv related constants.")},22:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2716%27 height=%274%27%3E%3Cpath d=%27M4 0h6L7 4%27/%3E%3C/svg%3E"},5647:e=>{"use strict";e.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2736%27 height=%2712%27%3E%3Cpath fill=%27rgba%2817, 17, 17, 0.9%29%27 d=%27M2.658 0h32.004c-6 0-11.627 12.002-16.002 12.002C14.285 12.002 8.594 0 2.658 0Z%27/%3E%3C/svg%3E"}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={id:e,exports:{}};return i[e].call(a.exports,a,a.exports,o),a.exports}o.m=i,e=[],o.O=(t,a,i,s)=>{if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],i=e[c][1],s=e[c][2];for(var n=!0,l=0;l<a.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(n=!1,s<r&&(r=s));if(n){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,i,s]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,a)=>(o.f[a](e,t),t)),[])),o.u=e=>({43:"gears-70",215:"gears-340",221:"gears-401",225:"gears-470",336:"gears-255",437:"gears-136",733:"gears-385",772:"gears-1"}[e]+"."+{43:"9aa2705a4f",215:"b0599be1a8",221:"f760aa3a27",225:"1fab3c78a0",336:"3c5435fb9e",437:"a382634328",733:"8814648361",772:"6e07b7eb79"}[e]+".js"),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="ffxiv-gearing:",o.l=(e,i,s,r)=>{if(t[e])t[e].push(i);else{var n,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var m=d[c];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==a+s){n=m;break}}n||(l=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,o.nc&&n.setAttribute("nonce",o.nc),n.setAttribute("data-webpack",a+s),n.src=e),t[e]=[i];var p=(a,i)=>{n.onerror=n.onload=null,clearTimeout(g);var s=t[e];if(delete t[e],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((e=>e(i))),a)return a(i)},g=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload),l&&document.head.appendChild(n)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{o.b=document.baseURI||self.location.href;var e={179:0};o.f.j=(t,a)=>{var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var s=new Promise(((a,s)=>i=e[t]=[a,s]));a.push(i[2]=s);var r=o.p+o.u(t),n=new Error;o.l(r,(a=>{if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;n.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",n.name="ChunkLoadError",n.type=s,n.request=r,i[1](n)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,a)=>{var i,s,r=a[0],n=a[1],l=a[2],d=0;if(r.some((t=>0!==e[t]))){for(i in n)o.o(n,i)&&(o.m[i]=n[i]);if(l)var c=l(o)}for(t&&t(a);d<r.length;d++)s=r[d],o.o(e,s)&&e[s]&&e[s][0](),e[r[d]]=0;return o.O(c)},a=self.webpackChunkffxiv_gearing=self.webpackChunkffxiv_gearing||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=o.O(void 0,[912,126,619],(()=>o(3835)));r=o.O(r)})();