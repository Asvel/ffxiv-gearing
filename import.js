(()=>{var e={},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.m=e,r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce(function(t,o){return r.f[o](e,t),t},[]))},r.u=function(e){return"lodestone-id.12dcf4206b.js"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},(()=>{var e={},t="ffxiv-gearing:";r.l=function(o,i,n,a){if(e[o]){e[o].push(i);return}if(void 0!==n){for(var l,s,c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var f=c[u];if(f.getAttribute("src")==o||f.getAttribute("data-webpack")==t+n){l=f;break}}}!l&&(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+n),l.src=o),e[o]=[i];var d=function(t,r){l.onerror=l.onload=null,clearTimeout(p);var i=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach(function(e){return e(r)}),t)return t(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),s&&document.head.appendChild(l)}})(),r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r.g.importScripts&&(e=r.g.location+"");var e,t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length){for(var i=o.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=o[i--].src}}if(!e)throw Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={213:0};r.f.j=function(t,o){var i=r.o(e,t)?e[t]:void 0;if(0!==i){if(i)o.push(i[2]);else{var n=new Promise(function(r,o){i=e[t]=[r,o]});o.push(i[2]=n);var a=r.p+r.u(t),l=Error();r.l(a,function(o){if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var n=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,i[1](l)}},"chunk-"+t,t)}}};var t=function(t,o){var i=o[0],n=o[1],a=o[2],l,s,c=0;if(i.some(function(t){return 0!==e[t]})){for(l in n)r.o(n,l)&&(r.m[l]=n[l]);a&&a(r)}for(t&&t(o);c<i.length;c++)s=i[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},o=self.webpackChunkffxiv_gearing=self.webpackChunkffxiv_gearing||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();(async()=>{let e=new URL(document.currentScript.src.replace(/\?[\d.]*$/,"")+"/../").href;r.p=e;let t={job:null,gears:[]},o={6:"PIE",19:"TEN",22:"DHT",27:"CRT",44:"DET",45:"SKS",46:"SPS",10:"GP",11:"CP",70:"CMS",71:"CRL",72:"GTH",73:"PCP"};try{let{characterData:e,ContentGearCalculator:i}=window;if(void 0!==e){let{identifier:r,items:o,materiaData:n}=e.currentSet;for(let e of Object.keys(o)){let r=o[e],i=r.itemID,a=(n[`${e}-${r.itemID}`]||[]).map(e=>{let[t,r]=e.split(":");return[t,Number(r)+1]});t.gears.push({id:i,materias:a})}t.job=r,t.jobLevel=parseInt(i.currentLevel,10)}let{controller:n}=window;if(n?.equipManager!==void 0){let e={CRIT:"CRT",DH:"DHT",CRFT:"CMS",CNTL:"CRL",GATH:"GTH",PERC:"PCP"},o=(await r.e("868").then(r.bind(r,6768))).default,i={};for(let e=0;e<o.length;e++)void 0!==o[e]&&(i[o[e]]=e);for(let r of Object.values(n.equipManager.equipSelectors)){let o=i[r?.selectedItem?.id];if(void 0!==o){let i=r.selectedMateria?.list?.map(t=>[e[t.key]??t.key,t.tier+1])??[];t.gears.push({id:o,materias:i})}}let a=i[n.config.conf.meal?.slice(0,11)];void 0!==a&&t.gears.push({id:a,materias:[]}),t.job=n.config.conf.jobId,t.jobLevel=n.config.conf.lvHigh}if(/\betro\b/i.test(document.title)){let e=document.getElementById("root")._reactRootContainer._internalRoot.current;for(;e.child&&!e.memoizedProps?.value?.store;)e=e.child;let r=e.memoizedProps.value.store.getState(),i={};for(let e of r.materia.materiaSelectOptions)i[e.id]=e;let n={};for(let e of r.food.listResult)n[e.id]=e.item;let a={};for(let e of r.medicine.listResult)a[e.id]=e.item;for(let[e,l]of Object.entries(r.gearsets.gearset)){let s;if(!l)continue;let{id:c}=l;if(l.baseItemId){c=l.baseItemId,s={};for(let e=0;e<=6;e++){let t=o[l[`param${e}`]],r=l[`param${e}Value`];void 0!==t&&r>0&&(s[t]=r)}}if(c){"food"===e&&(c=n[c]),"medicine"===e&&(c=a[c]);let l=c;"fingerL"===e&&(l+="L"),"fingerR"===e&&(l+="R");let u=r.gearsets.gearset.materia?.[l],f=[];if(u)for(let[e,t]of Object.entries(u)){let r=i[t];void 0!==r&&r.param in o&&(f[e-1]=[o[r.param],r.tier])}t.gears.push({id:c,materias:f,customStats:s})}}t.job=r.jobs.currentJob.abbrev,t.jobLevel=r.gearsets.gearset.level,t.syncLevel=r.gearsets.gearset.itemLevelSync}let a=document.getElementsByTagName("app-gearset-display")[0];if(void 0!==a){let e;let r=Array.from(document.getElementsByTagName("script"),e=>e.getAttribute("src")).find(e=>e?.includes("/main-")),i=await (await fetch(r)).text(),n=/path:"gearset",loadChildren:\(\)=>import\("([^"]+)"/.exec(i)[1],l=new URL(n,r).href,{GearsetModule:s}=await import(l),c=s.prototype.constructor.ɵinj.imports.find(e=>e.providers).providers[0].useValue[0].component,{copyToClipboard:u}=c.prototype;c.prototype.copyToClipboard=function(){e=this},a.querySelector('.page-title [nztype="snippets"]').parentNode.click(),c.prototype.copyToClipboard=u;let f=e=>new Promise(t=>{e.subscribe(e=>t(e))}),d=await f(e.gearset$),p=await f(e.lazyData.getEntry("materias")),m={};for(let e of(p.forEach(e=>{m[e.itemId]=e}),Object.values(d)))if(e?.itemId){let r=e.materias.map(e=>{let t=m[e];if(!t)return null;let r=o[t.baseParamId];return r?[r,t.tier]:null});t.gears.push({id:e.itemId,materias:r})}let g=await f(e.food$);g&&t.gears.push({id:g.ID,materias:[]});let b=await f(e.lazyData.getEntry("jobAbbr"));t.job=b[d.job].en,t.jobLevel=await f(e.level$)}let{currentGearSet:l,currentSheet:s}=window;if(l?.equipment!==void 0){let e={crit:"CRT",determination:"DET",dhit:"DHT",skillspeed:"SKS",spellspeed:"SPS",tenacity:"TEN",piety:"PIE"};for(let r of Object.values(l.equipment)){let o;if(!r)continue;let{id:i}=r.gearItem,n=r.melds.map(({equippedMateria:t})=>t&&[e[t.primaryStat],t.materiaGrade]);if(r.relicStats)for(let[t,i]of(o={},Object.entries(r.relicStats)))i&&(o[e[t]]=i);t.gears.push({id:i,materias:n,customStats:o})}l.food&&t.gears.push({id:l.food.id,materias:[]}),t.job=s.classJobName,t.jobLevel=s.level,t.syncLevel=s.ilvlSync,665===t.syncLevel&&(t.syncLevel=void 0)}}catch(e){}if(null!==t.job){let r=e+"?import-"+encodeURIComponent(JSON.stringify(t));console.log(r),null===window.open(r)&&prompt("打开此链接进行导入：",r)}else alert("未能在此页面中找到支持导入的数据。")})()})();