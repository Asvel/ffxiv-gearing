(()=>{var e={},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.m=e,r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,o)=>(r.f[o](e,t),t),[])),r.u=e=>"lodestone-id.aa8adc714f.js",(()=>{r.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})()})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ffxiv-gearing:";r.l=function(o,i,a,l){if(e[o]){e[o].push(i);return}if(void 0!==a)for(var n,s,c=document.getElementsByTagName("script"),p=0;p<c.length;p++){var d=c[p];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+a){n=d;break}}n||(s=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,r.nc&&n.setAttribute("nonce",r.nc),n.setAttribute("data-webpack",t+a),n.src=o),e[o]=[i];var u=function(t,r){n.onerror=n.onload=null,clearTimeout(f);var i=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach(function(e){return e(r)}),t)return t(r)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),s&&document.head.appendChild(n)}})(),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r.g.importScripts&&(e=r.g.location+"");var e,t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var i=o.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=o[i--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={213:0};r.f.j=function(t,o){var i=r.o(e,t)?e[t]:void 0;if(0!==i){if(i)o.push(i[2]);else{var a=new Promise((r,o)=>i=e[t]=[r,o]);o.push(i[2]=a);var l=r.p+r.u(t),n=Error();r.l(l,function(o){if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;n.message="Loading chunk "+t+" failed.\n("+a+": "+l+")",n.name="ChunkLoadError",n.type=a,n.request=l,i[1](n)}},"chunk-"+t,t)}}};var t=(t,o)=>{var i,a,l=o[0],n=o[1],s=o[2],c=0;if(l.some(t=>0!==e[t])){for(i in n)r.o(n,i)&&(r.m[i]=n[i]);s&&s(r)}for(t&&t(o);c<l.length;c++)a=l[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},o=self.webpackChunkffxiv_gearing=self.webpackChunkffxiv_gearing||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),(async()=>{let e=new URL(document.currentScript.src.replace(/\?[\d.]*$/,"")+"/../").href;r.p=e;let t={job:null,gears:[]},o={6:"PIE",19:"TEN",22:"DHT",27:"CRT",44:"DET",45:"SKS",46:"SPS",10:"GP",11:"CP",70:"CMS",71:"CRL",72:"GTH",73:"PCP"};try{let{characterData:e,ContentGearCalculator:i}=window;if(void 0!==e){let{identifier:r,items:o,materiaData:a}=e.currentSet;for(let e of Object.keys(o)){let r=o[e],i=r.itemID,l=(a[`${e}-${r.itemID}`]||[]).map(e=>{let[t,r]=e.split(":");return[t,Number(r)+1]});t.gears.push({id:i,materias:l})}t.job=r,t.jobLevel=parseInt(i.currentLevel,10)}let{controller:a}=window;if(a?.equipManager!==void 0){let e={CRIT:"CRT",DH:"DHT",CRFT:"CMS",CNTL:"CRL",GATH:"GTH",PERC:"PCP"},o=(await r.e("868").then(r.bind(r,6768))).default,i={};for(let e=0;e<o.length;e++)void 0!==o[e]&&(i[o[e]]=e);for(let r of Object.values(a.equipManager.equipSelectors)){let o=i[r?.selectedItem?.id];if(void 0!==o){let i=r.selectedMateria?.list?.map(t=>[e[t.key]??t.key,t.tier+1])??[];t.gears.push({id:o,materias:i})}}let l=i[a.config.conf.meal?.slice(0,11)];void 0!==l&&t.gears.push({id:l,materias:[]}),t.job=a.config.conf.jobId,t.jobLevel=a.config.conf.lvHigh}if(/\betro\b/i.test(document.title)){let e=document.getElementById("root")._reactRootContainer._internalRoot.current;for(;e.child&&!e.memoizedProps?.value?.store;)e=e.child;let r=e.memoizedProps.value.store.getState(),i={};for(let e of r.materia.materiaSelectOptions)i[e.id]=e;let a={};for(let e of r.food.listResult)a[e.id]=e.item;let l={};for(let e of r.medicine.listResult)l[e.id]=e.item;for(let[e,n]of Object.entries(r.gearsets.gearset)){let s;if(!n)continue;let{id:c}=n;if(n.baseItemId){c=n.baseItemId,s={};for(let e=0;e<=6;e++){let t=o[n[`param${e}`]],r=n[`param${e}Value`];void 0!==t&&r>0&&(s[t]=r)}}if(c){"food"===e&&(c=a[c]),"medicine"===e&&(c=l[c]);let n=c;"fingerL"===e&&(n+="L"),"fingerR"===e&&(n+="R");let p=r.gearsets.gearset.materia?.[n],d=[];if(p)for(let[e,t]of Object.entries(p)){let r=i[t];void 0!==r&&r.param in o&&(d[e-1]=[o[r.param],r.tier])}t.gears.push({id:c,materias:d,customStats:s})}}t.job=r.jobs.currentJob.abbrev,t.jobLevel=r.gearsets.gearset.level,t.syncLevel=r.gearsets.gearset.itemLevelSync}let l=document.getElementsByTagName("app-gearset-display")[0];if(void 0!==l){let e;let r=Array.from(document.getElementsByTagName("script"),e=>e.getAttribute("src")).find(e=>e?.includes("/main-")),i=await (await fetch(r)).text(),a=/path:"gearset",loadChildren:\(\)=>import\("([^"]+)"/.exec(i)[1],n=new URL(a,r).href,{GearsetModule:s}=await import(n),c=s.prototype.constructor.ɵinj.imports.find(e=>e.providers).providers[0].useValue[0].component,{copyToClipboard:p}=c.prototype;c.prototype.copyToClipboard=function(){e=this},l.querySelector('.page-title [nztype="snippets"]').parentNode.click(),c.prototype.copyToClipboard=p;let d=e=>new Promise(t=>{e.subscribe(e=>t(e))}),u=await d(e.gearset$),f=await d(e.lazyData.getEntry("materias")),m={};for(let e of(f.forEach(e=>{m[e.itemId]=e}),Object.values(u)))if(e?.itemId){let r=e.materias.map(e=>{let t=m[e];if(!t)return null;let r=o[t.baseParamId];return r?[r,t.tier]:null});t.gears.push({id:e.itemId,materias:r})}let g=await d(e.food$);g&&t.gears.push({id:g.ID,materias:[]});let b=await d(e.lazyData.getEntry("jobAbbr"));t.job=b[u.job].en,t.jobLevel=await d(e.level$)}let{currentGearSet:n,currentSheet:s}=window;if(n?.equipment!==void 0){let e={crit:"CRT",determination:"DET",dhit:"DHT",skillspeed:"SKS",spellspeed:"SPS",tenacity:"TEN",piety:"PIE"};for(let r of Object.values(n.equipment)){let o;if(!r)continue;let{id:i}=r.gearItem,a=r.melds.map(({equippedMateria:t})=>t&&[e[t.primaryStat],t.materiaGrade]);if(r.relicStats)for(let[t,i]of(o={},Object.entries(r.relicStats)))i&&(o[e[t]]=i);t.gears.push({id:i,materias:a,customStats:o})}n.food&&t.gears.push({id:n.food.id,materias:[]}),t.job=s.classJobName,t.jobLevel=s.level,t.syncLevel=s.ilvlSync,665===t.syncLevel&&(t.syncLevel=void 0)}}catch(e){}if(null!==t.job){let r=e+"?import-"+encodeURIComponent(JSON.stringify(t));console.log(r),null===window.open(r)&&prompt("打开此链接进行导入：",r)}else alert("未能在此页面中找到支持导入的数据。")})()})();